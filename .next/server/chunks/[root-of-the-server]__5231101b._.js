module.exports=[61724,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js"))},47909,(e,t,r)=>{t.exports=e.r(61724)},17413,(e,t,r)=>{(()=>{"use strict";let r,n,i,o,s;var a,l,u,c,d,p,h,f,g,m,y,_,E,v,b,S,T={491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(223),i=r(172),o=r(930),s="context",a=new n.NoopContextManager;class l{constructor(){}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,i.registerGlobal)(s,e,o.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,i.getGlobal)(s)||a}disable(){this._getContextManager().disable(),(0,i.unregisterGlobal)(s,o.DiagAPI.instance())}}t.ContextAPI=l},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(56),i=r(912),o=r(957),s=r(172);class a{constructor(){function e(e){return function(...t){let r=(0,s.getGlobal)("diag");if(r)return r[e](...t)}}const t=this;t.setLogger=(e,r={logLevel:o.DiagLogLevel.INFO})=>{var n,a,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(n=e.stack)?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});let u=(0,s.getGlobal)("diag"),c=(0,i.createLogLevelDiagLogger)(null!=(a=r.logLevel)?a:o.DiagLogLevel.INFO,e);if(u&&!r.suppressOverrideMessage){let e=null!=(l=Error().stack)?l:"<failed to generate stacktrace>";u.warn(`Current logger will be overwritten from ${e}`),c.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,s.registerGlobal)("diag",c,t,!0)},t.disable=()=>{(0,s.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new a),this._instance}}t.DiagAPI=a},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(660),i=r(172),o=r(930),s="metrics";class a{constructor(){}static getInstance(){return this._instance||(this._instance=new a),this._instance}setGlobalMeterProvider(e){return(0,i.registerGlobal)(s,e,o.DiagAPI.instance())}getMeterProvider(){return(0,i.getGlobal)(s)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,i.unregisterGlobal)(s,o.DiagAPI.instance())}}t.MetricsAPI=a},181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(172),i=r(874),o=r(194),s=r(277),a=r(369),l=r(930),u="propagation",c=new i.NoopTextMapPropagator;class d{constructor(){this.createBaggage=a.createBaggage,this.getBaggage=s.getBaggage,this.getActiveBaggage=s.getActiveBaggage,this.setBaggage=s.setBaggage,this.deleteBaggage=s.deleteBaggage}static getInstance(){return this._instance||(this._instance=new d),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(u,e,l.DiagAPI.instance())}inject(e,t,r=o.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=o.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(u,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(u)||c}}t.PropagationAPI=d},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(172),i=r(846),o=r(139),s=r(607),a=r(930),l="trace";class u{constructor(){this._proxyTracerProvider=new i.ProxyTracerProvider,this.wrapSpanContext=o.wrapSpanContext,this.isSpanContextValid=o.isSpanContextValid,this.deleteSpan=s.deleteSpan,this.getSpan=s.getSpan,this.getActiveSpan=s.getActiveSpan,this.getSpanContext=s.getSpanContext,this.setSpan=s.setSpan,this.setSpanContext=s.setSpanContext}static getInstance(){return this._instance||(this._instance=new u),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(l,this._proxyTracerProvider,a.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(l,a.DiagAPI.instance()),this._proxyTracerProvider=new i.ProxyTracerProvider}}t.TraceAPI=u},277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(491),i=(0,r(780).createContextKey)("OpenTelemetry Baggage Key");function o(e){return e.getValue(i)||void 0}t.getBaggage=o,t.getActiveBaggage=function(){return o(n.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(i,t)},t.deleteBaggage=function(e){return e.deleteValue(i)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let n=new r(this._entries);return n._entries.set(e,t),n}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(930),i=r(993),o=r(830),s=n.DiagAPI.instance();t.createBaggage=function(e={}){return new i.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(s.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:o.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0,t.context=r(491).ContextAPI.getInstance()},223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(780);t.NoopContextManager=class{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){const t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,n)=>{let i=new r(t._currentContext);return i._currentContext.set(e,n),i},t.deleteValue=e=>{let n=new r(t._currentContext);return n._currentContext.delete(e),n}}}t.ROOT_CONTEXT=new r},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0,t.diag=r(930).DiagAPI.instance()},56:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(172);function i(e,t,r){let i=(0,n.getGlobal)("diag");if(i)return r.unshift(t),i[e](...r)}t.DiagComponentLogger=class{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return i("debug",this._namespace,e)}error(...e){return i("error",this._namespace,e)}info(...e){return i("info",this._namespace,e)}warn(...e){return i("warn",this._namespace,e)}verbose(...e){return i("verbose",this._namespace,e)}}},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];t.DiagConsoleLogger=class{constructor(){for(let e=0;e<r.length;e++)this[r[e].n]=function(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}(r[e].c)}}},912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(957);t.createLogLevelDiagLogger=function(e,t){function r(r,n){let i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,(r=t.DiagLogLevel||(t.DiagLogLevel={}))[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"},172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(200),i=r(521),o=r(130),s=i.VERSION.split(".")[0],a=Symbol.for(`opentelemetry.js.api.${s}`),l=n._globalThis;t.registerGlobal=function(e,t,r,n=!1){var o;let s=l[a]=null!=(o=l[a])?o:{version:i.VERSION};if(!n&&s[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(s.version!==i.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${s.version} for ${e} does not match previously registered API v${i.VERSION}`);return r.error(t.stack||t.message),!1}return s[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${i.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let n=null==(t=l[a])?void 0:t.version;if(n&&(0,o.isCompatible)(n))return null==(r=l[a])?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${i.VERSION}.`);let r=l[a];r&&delete r[e]}},130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(521),i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function o(e){let t=new Set([e]),r=new Set,n=e.match(i);if(!n)return()=>!1;let o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=o.prerelease)return function(t){return t===e};function s(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(i);if(!n)return s(e);let a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=a.prerelease||o.major!==a.major)return s(e);if(0===o.major)return o.minor===a.minor&&o.patch<=a.patch?(t.add(e),!0):s(e);return o.minor<=a.minor?(t.add(e),!0):s(e)}}t._makeCompatibilityCheck=o,t.isCompatible=o(n.VERSION)},886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0,t.metrics=r(653).MetricsAPI.getInstance()},901:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,(r=t.ValueType||(t.ValueType={}))[r.INT=0]="INT",r[r.DOUBLE=1]="DOUBLE"},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class n{}t.NoopMetric=n;class i extends n{add(e,t){}}t.NoopCounterMetric=i;class o extends n{add(e,t){}}t.NoopUpDownCounterMetric=o;class s extends n{record(e,t){}}t.NoopHistogramMetric=s;class a{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=a;class l extends a{}t.NoopObservableCounterMetric=l;class u extends a{}t.NoopObservableGaugeMetric=u;class c extends a{}t.NoopObservableUpDownCounterMetric=c,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new i,t.NOOP_HISTOGRAM_METRIC=new s,t.NOOP_UP_DOWN_COUNTER_METRIC=new o,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new u,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new c,t.createNoopMeter=function(){return t.NOOP_METER}},660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(102);class i{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=i,t.NOOP_METER_PROVIDER=new i},200:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(46),t)},651:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._globalThis=void 0,r._globalThis="object"==typeof globalThis?globalThis:e.g},46:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(651),t)},939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0,t.propagation=r(181).PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0,t.NoopTextMapPropagator=class{inject(e,t){}extract(e,t){return e}fields(){return[]}}},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},845:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0,t.trace=r(997).TraceAPI.getInstance()},403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(476);t.NonRecordingSpan=class{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}},614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(491),i=r(607),o=r(403),s=r(139),a=n.ContextAPI.getInstance();t.NoopTracer=class{startSpan(e,t,r=a.active()){var n;if(null==t?void 0:t.root)return new o.NonRecordingSpan;let l=r&&(0,i.getSpanContext)(r);return"object"==typeof(n=l)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&(0,s.isSpanContextValid)(l)?new o.NonRecordingSpan(l):new o.NonRecordingSpan}startActiveSpan(e,t,r,n){let o,s,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(o=t,l=r):(o=t,s=r,l=n);let u=null!=s?s:a.active(),c=this.startSpan(e,o,u),d=(0,i.setSpan)(u,c);return a.with(d,l,void 0,c)}}},124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(614);t.NoopTracerProvider=class{getTracer(e,t,r){return new n.NoopTracer}}},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=new(r(614)).NoopTracer;t.ProxyTracer=class{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):n}}},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(125),i=new(r(124)).NoopTracerProvider;t.ProxyTracerProvider=class{getTracer(e,t,r){var i;return null!=(i=this.getDelegateTracer(e,t,r))?i:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!=(e=this._delegate)?e:i}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)}}},996:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,(r=t.SamplingDecision||(t.SamplingDecision={}))[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(780),i=r(403),o=r(491),s=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function a(e){return e.getValue(s)||void 0}function l(e,t){return e.setValue(s,t)}t.getSpan=a,t.getActiveSpan=function(){return a(o.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(s)},t.setSpanContext=function(e,t){return l(e,new i.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null==(t=a(e))?void 0:t.spanContext()}},325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(564);class i{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),i=r.indexOf("=");if(-1!==i){let o=r.slice(0,i),s=r.slice(i+1,t.length);(0,n.validateKey)(o)&&(0,n.validateValue)(s)&&e.set(o,s)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new i;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=i},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,o=RegExp(`^(?:${n}|${i})$`),s=/^[ -~]{0,255}[!-~]$/,a=/,|=/;t.validateKey=function(e){return o.test(e)},t.validateValue=function(e){return s.test(e)&&!a.test(e)}},98:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(325);t.createTraceState=function(e){return new n.TraceStateImpl(e)}},476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},357:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,(r=t.SpanKind||(t.SpanKind={}))[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"},139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(476),i=r(403),o=/^([0-9a-f]{32})$/i,s=/^[0-9a-f]{16}$/i;function a(e){return o.test(e)&&e!==n.INVALID_TRACEID}function l(e){return s.test(e)&&e!==n.INVALID_SPANID}t.isValidTraceId=a,t.isValidSpanId=l,t.isSpanContextValid=function(e){return a(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new i.NonRecordingSpan(e)}},847:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,(r=t.SpanStatusCode||(t.SpanStatusCode={}))[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"},475:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,(r=t.TraceFlags||(t.TraceFlags={}))[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},A={};function O(e){var t=A[e];if(void 0!==t)return t.exports;var r=A[e]={exports:{}},n=!0;try{T[e].call(r.exports,r,r.exports,O),n=!1}finally{n&&delete A[e]}return r.exports}O.ab="/ROOT/node_modules/next/dist/compiled/@opentelemetry/api/";var w={};Object.defineProperty(w,"__esModule",{value:!0}),w.trace=w.propagation=w.metrics=w.diag=w.context=w.INVALID_SPAN_CONTEXT=w.INVALID_TRACEID=w.INVALID_SPANID=w.isValidSpanId=w.isValidTraceId=w.isSpanContextValid=w.createTraceState=w.TraceFlags=w.SpanStatusCode=w.SpanKind=w.SamplingDecision=w.ProxyTracerProvider=w.ProxyTracer=w.defaultTextMapSetter=w.defaultTextMapGetter=w.ValueType=w.createNoopMeter=w.DiagLogLevel=w.DiagConsoleLogger=w.ROOT_CONTEXT=w.createContextKey=w.baggageEntryMetadataFromString=void 0,a=O(369),Object.defineProperty(w,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return a.baggageEntryMetadataFromString}}),l=O(780),Object.defineProperty(w,"createContextKey",{enumerable:!0,get:function(){return l.createContextKey}}),Object.defineProperty(w,"ROOT_CONTEXT",{enumerable:!0,get:function(){return l.ROOT_CONTEXT}}),u=O(972),Object.defineProperty(w,"DiagConsoleLogger",{enumerable:!0,get:function(){return u.DiagConsoleLogger}}),c=O(957),Object.defineProperty(w,"DiagLogLevel",{enumerable:!0,get:function(){return c.DiagLogLevel}}),d=O(102),Object.defineProperty(w,"createNoopMeter",{enumerable:!0,get:function(){return d.createNoopMeter}}),p=O(901),Object.defineProperty(w,"ValueType",{enumerable:!0,get:function(){return p.ValueType}}),h=O(194),Object.defineProperty(w,"defaultTextMapGetter",{enumerable:!0,get:function(){return h.defaultTextMapGetter}}),Object.defineProperty(w,"defaultTextMapSetter",{enumerable:!0,get:function(){return h.defaultTextMapSetter}}),f=O(125),Object.defineProperty(w,"ProxyTracer",{enumerable:!0,get:function(){return f.ProxyTracer}}),g=O(846),Object.defineProperty(w,"ProxyTracerProvider",{enumerable:!0,get:function(){return g.ProxyTracerProvider}}),m=O(996),Object.defineProperty(w,"SamplingDecision",{enumerable:!0,get:function(){return m.SamplingDecision}}),y=O(357),Object.defineProperty(w,"SpanKind",{enumerable:!0,get:function(){return y.SpanKind}}),_=O(847),Object.defineProperty(w,"SpanStatusCode",{enumerable:!0,get:function(){return _.SpanStatusCode}}),E=O(475),Object.defineProperty(w,"TraceFlags",{enumerable:!0,get:function(){return E.TraceFlags}}),v=O(98),Object.defineProperty(w,"createTraceState",{enumerable:!0,get:function(){return v.createTraceState}}),b=O(139),Object.defineProperty(w,"isSpanContextValid",{enumerable:!0,get:function(){return b.isSpanContextValid}}),Object.defineProperty(w,"isValidTraceId",{enumerable:!0,get:function(){return b.isValidTraceId}}),Object.defineProperty(w,"isValidSpanId",{enumerable:!0,get:function(){return b.isValidSpanId}}),S=O(476),Object.defineProperty(w,"INVALID_SPANID",{enumerable:!0,get:function(){return S.INVALID_SPANID}}),Object.defineProperty(w,"INVALID_TRACEID",{enumerable:!0,get:function(){return S.INVALID_TRACEID}}),Object.defineProperty(w,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return S.INVALID_SPAN_CONTEXT}}),r=O(67),Object.defineProperty(w,"context",{enumerable:!0,get:function(){return r.context}}),n=O(506),Object.defineProperty(w,"diag",{enumerable:!0,get:function(){return n.diag}}),i=O(886),Object.defineProperty(w,"metrics",{enumerable:!0,get:function(){return i.metrics}}),o=O(939),Object.defineProperty(w,"propagation",{enumerable:!0,get:function(){return o.propagation}}),s=O(845),Object.defineProperty(w,"trace",{enumerable:!0,get:function(){return s.trace}}),w.default={context:r.context,diag:n.diag,metrics:i.metrics,propagation:o.propagation,trace:s.trace},t.exports=w})()},42315,(e,t,r)=>{"use strict";t.exports=e.r(18622)},47540,(e,t,r)=>{"use strict";t.exports=e.r(42315).vendored["react-rsc"].React},19481,(e,t,r)=>{"use strict";var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={},l={RequestCookies:()=>g,ResponseCookies:()=>m,parseCookie:()=>d,parseSetCookie:()=>p,stringifyCookie:()=>c};for(var u in l)n(a,u,{get:l[u],enumerable:!0});function c(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function d(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function p(e){if(!e)return;let[[t,r],...n]=d(e),{domain:i,expires:o,httponly:s,maxage:a,path:l,samesite:u,secure:c,partitioned:p,priority:g}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));{var m,y,_={name:t,value:decodeURIComponent(r),domain:i,...o&&{expires:new Date(o)},...s&&{httpOnly:!0},..."string"==typeof a&&{maxAge:Number(a)},path:l,...u&&{sameSite:h.includes(m=(m=u).toLowerCase())?m:void 0},...c&&{secure:!0},...g&&{priority:f.includes(y=(y=g).toLowerCase())?y:void 0},...p&&{partitioned:!0}};let e={};for(let t in _)_[t]&&(e[t]=_[t]);return e}}t.exports=((e,t,r,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))s.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(a=i(t,l))||a.enumerable});return e})(n({},"__esModule",{value:!0}),a);var h=["strict","lax","none"],f=["low","medium","high"],g=class{constructor(e){this._parsed=new Map,this._headers=e;const t=e.get("cookie");if(t)for(const[e,r]of d(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>c(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>c(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},m=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;const i=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(const e of Array.isArray(i)?i:function(e){if(!e)return[];var t,r,n,i,o,s=[],a=0;function l(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,o=!1;l();)if(","===(r=e.charAt(a))){for(n=a,a+=1,l(),i=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(o=!0,a=i,s.push(e.substring(t,n)),t=a):a=n+1}else a+=1;(!o||a>=e.length)&&s.push(e.substring(t,e.length))}return s}(i)){const t=p(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=c(r);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(c).join("; ")}}},93118,(e,t,r)=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="/ROOT/node_modules/next/dist/compiled/cookie/");var e,r,n,i,o={};o.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var i={},o=t.split(n),s=(r||{}).decode||e,a=0;a<o.length;a++){var l=o[a],u=l.indexOf("=");if(!(u<0)){var c=l.substr(0,u).trim(),d=l.substr(++u,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==i[c]&&(i[c]=function(e,t){try{return t(e)}catch(t){return e}}(d,s))}}return i},o.serialize=function(e,t,n){var o=n||{},s=o.encode||r;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var a=s(t);if(a&&!i.test(a))throw TypeError("argument val is invalid");var l=e+"="+a;if(null!=o.maxAge){var u=o.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(o.domain){if(!i.test(o.domain))throw TypeError("option domain is invalid");l+="; Domain="+o.domain}if(o.path){if(!i.test(o.path))throw TypeError("option path is invalid");l+="; Path="+o.path}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(l+="; HttpOnly"),o.secure&&(l+="; Secure"),o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l},e=decodeURIComponent,r=encodeURIComponent,n=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,t.exports=o})()},47114,(e,t,r)=>{"use strict";function n(e,t,r){if(e){for(let n of(r&&(r=r.toLowerCase()),e))if(t===n.domain?.split(":",1)[0].toLowerCase()||r===n.defaultLocale.toLowerCase()||n.locales?.some(e=>e.toLowerCase()===r))return n}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"detectDomainLocale",{enumerable:!0,get:function(){return n}})},49084,(e,t,r)=>{"use strict";function n(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removeTrailingSlash",{enumerable:!0,get:function(){return n}})},97741,(e,t,r)=>{"use strict";function n(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"parsePath",{enumerable:!0,get:function(){return n}})},34292,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(97741);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:o}=(0,n.parsePath)(e);return`${t}${r}${i}${o}`}},87622,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathSuffix",{enumerable:!0,get:function(){return i}});let n=e.r(97741);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:o}=(0,n.parsePath)(e);return`${r}${t}${i}${o}`}},98389,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"pathHasPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(97741);function i(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,n.parsePath)(e);return r===t||r.startsWith(t+"/")}},95414,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLocale",{enumerable:!0,get:function(){return o}});let n=e.r(34292),i=e.r(98389);function o(e,t,r,o){if(!t||t===r)return e;let s=e.toLowerCase();return!o&&((0,i.pathHasPrefix)(s,"/api")||(0,i.pathHasPrefix)(s,`/${t.toLowerCase()}`))?e:(0,n.addPathPrefix)(e,`/${t}`)}},25627,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"formatNextPathnameInfo",{enumerable:!0,get:function(){return a}});let n=e.r(49084),i=e.r(34292),o=e.r(87622),s=e.r(95414);function a(e){let t=(0,s.addLocale)(e.pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix);return(e.buildId||!e.trailingSlash)&&(t=(0,n.removeTrailingSlash)(t)),e.buildId&&(t=(0,o.addPathSuffix)((0,i.addPathPrefix)(t,`/_next/data/${e.buildId}`),"/"===e.pathname?"index.json":".json")),t=(0,i.addPathPrefix)(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:(0,o.addPathSuffix)(t,"/"):(0,n.removeTrailingSlash)(t)}},64512,(e,t,r)=>{"use strict";function n(e,t){let r;if(t?.host&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getHostname",{enumerable:!0,get:function(){return n}})},13545,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"normalizeLocalePath",{enumerable:!0,get:function(){return i}});let n=new WeakMap;function i(e,t){let r;if(!t)return{pathname:e};let i=n.get(t);i||(i=t.map(e=>e.toLowerCase()),n.set(t,i));let o=e.split("/",2);if(!o[1])return{pathname:e};let s=o[1].toLowerCase(),a=i.indexOf(s);return a<0?{pathname:e}:(r=t[a],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}},50955,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removePathPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(98389);function i(e,t){if(!(0,n.pathHasPrefix)(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:`/${r}`}},60622,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getNextPathnameInfo",{enumerable:!0,get:function(){return s}});let n=e.r(13545),i=e.r(50955),o=e.r(98389);function s(e,t){let{basePath:r,i18n:s,trailingSlash:a}=t.nextConfig??{},l={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):a};r&&(0,o.pathHasPrefix)(l.pathname,r)&&(l.pathname=(0,i.removePathPrefix)(l.pathname,r),l.basePath=r);let u=l.pathname;if(l.pathname.startsWith("/_next/data/")&&l.pathname.endsWith(".json")){let e=l.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");l.buildId=e[0],u="index"!==e[1]?`/${e.slice(1).join("/")}`:"/",!0===t.parseData&&(l.pathname=u)}if(s){let e=t.i18nProvider?t.i18nProvider.analyze(l.pathname):(0,n.normalizeLocalePath)(l.pathname,s.locales);l.locale=e.detectedLocale,l.pathname=e.pathname??l.pathname,!e.detectedLocale&&l.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(u):(0,n.normalizeLocalePath)(u,s.locales)).detectedLocale&&(l.locale=e.detectedLocale)}return l}},99536,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextURL",{enumerable:!0,get:function(){return c}});let n=e.r(47114),i=e.r(25627),o=e.r(64512),s=e.r(60622),a=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function l(e,t){return new URL(String(e).replace(a,"localhost"),t&&String(t).replace(a,"localhost"))}let u=Symbol("NextURLInternal");class c{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[u]={url:l(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,i,a;let l=(0,s.getNextPathnameInfo)(this[u].url.pathname,{nextConfig:this[u].options.nextConfig,parseData:!0,i18nProvider:this[u].options.i18nProvider}),c=(0,o.getHostname)(this[u].url,this[u].options.headers);this[u].domainLocale=this[u].options.i18nProvider?this[u].options.i18nProvider.detectDomainLocale(c):(0,n.detectDomainLocale)(null==(t=this[u].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,c);let d=(null==(r=this[u].domainLocale)?void 0:r.defaultLocale)||(null==(a=this[u].options.nextConfig)||null==(i=a.i18n)?void 0:i.defaultLocale);this[u].url.pathname=l.pathname,this[u].defaultLocale=d,this[u].basePath=l.basePath??"",this[u].buildId=l.buildId,this[u].locale=l.locale??d,this[u].trailingSlash=l.trailingSlash}formatPathname(){return(0,i.formatNextPathnameInfo)({basePath:this[u].basePath,buildId:this[u].buildId,defaultLocale:this[u].options.forceLocale?void 0:this[u].defaultLocale,locale:this[u].locale,pathname:this[u].url.pathname,trailingSlash:this[u].trailingSlash})}formatSearch(){return this[u].url.search}get buildId(){return this[u].buildId}set buildId(e){this[u].buildId=e}get locale(){return this[u].locale??""}set locale(e){var t,r;if(!this[u].locale||!(null==(r=this[u].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[u].locale=e}get defaultLocale(){return this[u].defaultLocale}get domainLocale(){return this[u].domainLocale}get searchParams(){return this[u].url.searchParams}get host(){return this[u].url.host}set host(e){this[u].url.host=e}get hostname(){return this[u].url.hostname}set hostname(e){this[u].url.hostname=e}get port(){return this[u].url.port}set port(e){this[u].url.port=e}get protocol(){return this[u].url.protocol}set protocol(e){this[u].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[u].url=l(e),this.analyze()}get origin(){return this[u].url.origin}get pathname(){return this[u].url.pathname}set pathname(e){this[u].url.pathname=e}get hash(){return this[u].url.hash}set hash(e){this[u].url.hash=e}get search(){return this[u].url.search}set search(e){this[u].url.search=e}get password(){return this[u].url.password}set password(e){this[u].url.password=e}get username(){return this[u].url.username}set username(e){this[u].url.username=e}get basePath(){return this[u].basePath}set basePath(e){this[u].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new c(String(this),this[u].options)}}},91401,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={ACTION_SUFFIX:function(){return y},APP_DIR_ALIAS:function(){return G},CACHE_ONE_YEAR:function(){return I},DOT_NEXT_ALIAS:function(){return j},ESLINT_DEFAULT_DIRS:function(){return eo},GSP_NO_RETURNED_VALUE:function(){return Q},GSSP_COMPONENT_MEMBER_ERROR:function(){return er},GSSP_NO_RETURNED_VALUE:function(){return ee},HTML_CONTENT_TYPE_HEADER:function(){return s},INFINITE_CACHE:function(){return P},INSTRUMENTATION_HOOK_FILENAME:function(){return M},JSON_CONTENT_TYPE_HEADER:function(){return a},MATCHED_PATH_HEADER:function(){return c},MIDDLEWARE_FILENAME:function(){return N},MIDDLEWARE_LOCATION_REGEXP:function(){return x},NEXT_BODY_SUFFIX:function(){return v},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return R},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return S},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return T},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return C},NEXT_CACHE_TAGS_HEADER:function(){return b},NEXT_CACHE_TAG_MAX_ITEMS:function(){return O},NEXT_CACHE_TAG_MAX_LENGTH:function(){return w},NEXT_DATA_SUFFIX:function(){return _},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return u},NEXT_META_SUFFIX:function(){return E},NEXT_QUERY_PARAM_PREFIX:function(){return l},NEXT_RESUME_HEADER:function(){return A},NON_STANDARD_NODE_ENV:function(){return en},PAGES_DIR_ALIAS:function(){return U},PRERENDER_REVALIDATE_HEADER:function(){return d},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return p},PROXY_FILENAME:function(){return k},PROXY_LOCATION_REGEXP:function(){return D},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return J},ROOT_DIR_ALIAS:function(){return L},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return W},RSC_ACTION_ENCRYPTION_ALIAS:function(){return $},RSC_ACTION_PROXY_ALIAS:function(){return B},RSC_ACTION_VALIDATE_ALIAS:function(){return q},RSC_CACHE_WRAPPER_ALIAS:function(){return H},RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS:function(){return V},RSC_MOD_REF_PROXY_ALIAS:function(){return F},RSC_PREFETCH_SUFFIX:function(){return h},RSC_SEGMENTS_DIR_SUFFIX:function(){return f},RSC_SEGMENT_SUFFIX:function(){return g},RSC_SUFFIX:function(){return m},SERVER_PROPS_EXPORT_ERROR:function(){return Z},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return Y},SERVER_PROPS_SSG_CONFLICT:function(){return z},SERVER_RUNTIME:function(){return es},SSG_FALLBACK_EXPORT_ERROR:function(){return ei},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return K},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return X},TEXT_PLAIN_CONTENT_TYPE_HEADER:function(){return o},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return et},WEBPACK_LAYERS:function(){return eu},WEBPACK_RESOURCE_QUERIES:function(){return ec},WEB_SOCKET_MAX_RECONNECTIONS:function(){return ea}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o="text/plain",s="text/html; charset=utf-8",a="application/json; charset=utf-8",l="nxtP",u="nxtI",c="x-matched-path",d="x-prerender-revalidate",p="x-prerender-revalidate-if-generated",h=".prefetch.rsc",f=".segments",g=".segment.rsc",m=".rsc",y=".action",_=".json",E=".meta",v=".body",b="x-next-cache-tags",S="x-next-revalidated-tags",T="x-next-revalidate-tag-token",A="next-resume",O=128,w=256,C=1024,R="_N_T_",I=31536e3,P=0xfffffffe,N="middleware",x=`(?:src/)?${N}`,k="proxy",D=`(?:src/)?${k}`,M="instrumentation",U="private-next-pages",j="private-dot-next",L="private-next-root-dir",G="private-next-app-dir",F="private-next-rsc-mod-ref-proxy",q="private-next-rsc-action-validate",B="private-next-rsc-server-reference",H="private-next-rsc-cache-wrapper",V="private-next-rsc-track-dynamic-import",$="private-next-rsc-action-encryption",W="private-next-rsc-action-client-wrapper",J="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",K="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",Y="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",z="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",X="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",Z="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",Q="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",ee="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",et="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",er="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",en='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',ei="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",eo=["app","pages","components","lib","src"],es={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},ea=12,el={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},eu={...el,GROUP:{builtinReact:[el.reactServerComponents,el.actionBrowser],serverOnly:[el.reactServerComponents,el.actionBrowser,el.instrument,el.middleware],neutralTarget:[el.apiNode,el.apiEdge],clientOnly:[el.serverSideRendering,el.appPagesBrowser],bundled:[el.reactServerComponents,el.actionBrowser,el.serverSideRendering,el.appPagesBrowser,el.shared,el.instrument,el.middleware],appPages:[el.reactServerComponents,el.serverSideRendering,el.appPagesBrowser,el.actionBrowser]}},ec={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},80333,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={fromNodeOutgoingHttpHeaders:function(){return s},normalizeNextQueryParam:function(){return c},splitCookiesString:function(){return a},toNodeOutgoingHttpHeaders:function(){return l},validateURL:function(){return u}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e.r(91401);function s(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function a(e){var t,r,n,i,o,s=[],a=0;function l(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,o=!1;l();)if(","===(r=e.charAt(a))){for(n=a,a+=1,l(),i=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(o=!0,a=i,s.push(e.substring(t,n)),t=a):a=n+1}else a+=1;(!o||a>=e.length)&&s.push(e.substring(t,e.length))}return s}function l(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...a(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function u(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function c(e){for(let t of[o.NEXT_QUERY_PARAM_PREFIX,o.NEXT_INTERCEPTION_MARKER_PREFIX])if(e!==t&&e.startsWith(t))return e.substring(t.length);return null}},47389,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={PageSignatureError:function(){return o},RemovedPageError:function(){return s},RemovedUAError:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});class o extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class s extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class a extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},472,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={RequestCookies:function(){return o.RequestCookies},ResponseCookies:function(){return o.ResponseCookies},stringifyCookie:function(){return o.stringifyCookie}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e.r(19481)},29666,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={INTERNALS:function(){return u},NextRequest:function(){return c}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e.r(99536),s=e.r(80333),a=e.r(47389),l=e.r(472),u=Symbol("internal request");class c extends Request{constructor(e,t={}){const r="string"!=typeof e&&"url"in e?e.url:String(e);(0,s.validateURL)(r),t.body&&"half"!==t.duplex&&(t.duplex="half"),e instanceof Request?super(e,t):super(r,t);const n=new o.NextURL(r,{headers:(0,s.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:t.nextConfig});this[u]={cookies:new l.RequestCookies(this.headers),nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[u].cookies}get nextUrl(){return this[u].nextUrl}get page(){throw new a.RemovedPageError}get ua(){throw new a.RemovedUAError}get url(){return this[u].url}}},30759,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReflectAdapter",{enumerable:!0,get:function(){return n}});class n{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},46633,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextResponse",{enumerable:!0,get:function(){return d}});let n=e.r(472),i=e.r(99536),o=e.r(80333),s=e.r(30759),a=e.r(472),l=Symbol("internal response"),u=new Set([301,302,303,307,308]);function c(e,t){var r;if(null==e||null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class d extends Response{constructor(e,t={}){super(e,t);const r=this.headers,u=new Proxy(new a.ResponseCookies(r),{get(e,i,o){switch(i){case"delete":case"set":return(...o)=>{let s=Reflect.apply(e[i],e,o),l=new Headers(r);return s instanceof a.ResponseCookies&&r.set("x-middleware-set-cookie",s.getAll().map(e=>(0,n.stringifyCookie)(e)).join(",")),c(t,l),s};default:return s.ReflectAdapter.get(e,i,o)}}});this[l]={cookies:u,url:t.url?new i.NextURL(t.url,{headers:(0,o.toNodeOutgoingHttpHeaders)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[l].cookies}static json(e,t){let r=Response.json(e,t);return new d(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!u.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",(0,o.validateURL)(e)),new d(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,o.validateURL)(e)),c(t,r),new d(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),c(e,t),new d(null,{...e,headers:t})}}},87963,(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ImageResponse",{enumerable:!0,get:function(){return n}})},99299,(e,t,r)=>{var n={226:function(t,r){!function(n,i){"use strict";var o="function",s="undefined",a="object",l="string",u="major",c="model",d="name",p="type",h="vendor",f="version",g="architecture",m="console",y="mobile",_="tablet",E="smarttv",v="wearable",b="embedded",S="Amazon",T="Apple",A="ASUS",O="BlackBerry",w="Browser",C="Chrome",R="Firefox",I="Google",P="Huawei",N="Microsoft",x="Motorola",k="Opera",D="Samsung",M="Sharp",U="Sony",j="Xiaomi",L="Zebra",G="Facebook",F="Chromium OS",q="Mac OS",B=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},H=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},V=function(e,t){return typeof e===l&&-1!==$(t).indexOf($(e))},$=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,350)},J=function(e,t){for(var r,n,i,s,l,u,c=0;c<t.length&&!l;){var d=t[c],p=t[c+1];for(r=n=0;r<d.length&&!l&&d[r];)if(l=d[r++].exec(e))for(i=0;i<p.length;i++)u=l[++n],typeof(s=p[i])===a&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):void 0:this[s[0]]=u?s[1].call(this,u,s[2]):void 0:4===s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):void 0):this[s]=u||void 0;c+=2}},K=function(e,t){for(var r in t)if(typeof t[r]===a&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(V(t[r][n],e))return"?"===r?void 0:r}else if(V(t[r],e))return"?"===r?void 0:r;return e},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,f],[/opios[\/ ]+([\w\.]+)/i],[f,[d,k+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[d,k]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[d,"UC"+w]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[f,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+w],f],[/\bfocus\/([\w\.]+)/i],[f,[d,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[d,k+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[d,k+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[d,"MIUI "+w]],[/fxios\/([-\w\.]+)/i],[f,[d,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+w]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+w],f],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,G],f],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[d,C+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,C+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[d,"Android "+w]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[f,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[d,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,f],[/(cobalt)\/([\w\.]+)/i],[d,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,$]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",$]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,$]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[h,D],[p,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[h,D],[p,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[h,T],[p,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[h,T],[p,_]],[/(macintosh);/i],[c,[h,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[h,M],[p,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[h,P],[p,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[h,P],[p,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[h,j],[p,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[h,j],[p,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[h,"OPPO"],[p,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[h,"Vivo"],[p,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[h,"Realme"],[p,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[h,x],[p,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[h,x],[p,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[h,"LG"],[p,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[h,"LG"],[p,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[h,"Lenovo"],[p,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[h,"Nokia"],[p,y]],[/(pixel c)\b/i],[c,[h,I],[p,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[h,I],[p,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[h,U],[p,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[h,U],[p,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[h,"OnePlus"],[p,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[h,S],[p,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[h,S],[p,y]],[/(playbook);[-\w\),; ]+(rim)/i],[c,h,[p,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[h,O],[p,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[h,A],[p,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[h,A],[p,y]],[/(nexus 9)/i],[c,[h,"HTC"],[p,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[c,/_/g," "],[p,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[h,"Acer"],[p,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[h,"Meizu"],[p,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,c,[p,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,c,[p,_]],[/(surface duo)/i],[c,[h,N],[p,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[h,"Fairphone"],[p,y]],[/(u304aa)/i],[c,[h,"AT&T"],[p,y]],[/\bsie-(\w*)/i],[c,[h,"Siemens"],[p,y]],[/\b(rct\w+) b/i],[c,[h,"RCA"],[p,_]],[/\b(venue[\d ]{2,7}) b/i],[c,[h,"Dell"],[p,_]],[/\b(q(?:mv|ta)\w+) b/i],[c,[h,"Verizon"],[p,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[h,"Barnes & Noble"],[p,_]],[/\b(tm\d{3}\w+) b/i],[c,[h,"NuVision"],[p,_]],[/\b(k88) b/i],[c,[h,"ZTE"],[p,_]],[/\b(nx\d{3}j) b/i],[c,[h,"ZTE"],[p,y]],[/\b(gen\d{3}) b.+49h/i],[c,[h,"Swiss"],[p,y]],[/\b(zur\d{3}) b/i],[c,[h,"Swiss"],[p,_]],[/\b((zeki)?tb.*\b) b/i],[c,[h,"Zeki"],[p,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],c,[p,_]],[/\b(ns-?\w{0,9}) b/i],[c,[h,"Insignia"],[p,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[h,"NextBook"],[p,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],c,[p,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],c,[p,y]],[/\b(ph-1) /i],[c,[h,"Essential"],[p,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[h,"Envizen"],[p,_]],[/\b(trio[-\w\. ]+) b/i],[c,[h,"MachSpeed"],[p,_]],[/\btu_(1491) b/i],[c,[h,"Rotor"],[p,_]],[/(shield[\w ]+) b/i],[c,[h,"Nvidia"],[p,_]],[/(sprint) (\w+)/i],[h,c,[p,y]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[h,N],[p,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[h,L],[p,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[h,L],[p,y]],[/smart-tv.+(samsung)/i],[h,[p,E]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[h,D],[p,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,"LG"],[p,E]],[/(apple) ?tv/i],[h,[c,T+" TV"],[p,E]],[/crkey/i],[[c,C+"cast"],[h,I],[p,E]],[/droid.+aft(\w)( bui|\))/i],[c,[h,S],[p,E]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[h,M],[p,E]],[/(bravia[\w ]+)( bui|\))/i],[c,[h,U],[p,E]],[/(mitv-\w{5}) bui/i],[c,[h,j],[p,E]],[/Hbbtv.*(technisat) (.*);/i],[h,c,[p,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,W],[c,W],[p,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,E]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,c,[p,m]],[/droid.+; (shield) bui/i],[c,[h,"Nvidia"],[p,m]],[/(playstation [345portablevi]+)/i],[c,[h,U],[p,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[h,N],[p,m]],[/((pebble))app/i],[h,c,[p,v]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[h,T],[p,v]],[/droid.+; (glass) \d/i],[c,[h,I],[p,v]],[/droid.+; (wt63?0{2,3})\)/i],[c,[h,L],[p,v]],[/(quest( 2| pro)?)/i],[c,[h,G],[p,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[p,b]],[/(aeobc)\b/i],[c,[h,S],[p,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[p,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,y]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[f,K,Y]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[f,K,Y]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,q],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,f],[/\(bb(10);/i],[f,[d,O]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[d,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[d,C+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,F],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,f],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,f]]},X=function(e,t){if(typeof e===a&&(t=e,e=void 0),!(this instanceof X))return new X(e,t).getResult();var r=typeof n!==s&&n.navigator?n.navigator:void 0,i=e||(r&&r.userAgent?r.userAgent:""),m=r&&r.userAgentData?r.userAgentData:void 0,E=t?B(z,t):z,v=r&&r.userAgent==i;return this.getBrowser=function(){var e,t={};return t[d]=void 0,t[f]=void 0,J.call(t,i,E.browser),t[u]=typeof(e=t[f])===l?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0,v&&r&&r.brave&&typeof r.brave.isBrave==o&&(t[d]="Brave"),t},this.getCPU=function(){var e={};return e[g]=void 0,J.call(e,i,E.cpu),e},this.getDevice=function(){var e={};return e[h]=void 0,e[c]=void 0,e[p]=void 0,J.call(e,i,E.device),v&&!e[p]&&m&&m.mobile&&(e[p]=y),v&&"Macintosh"==e[c]&&r&&typeof r.standalone!==s&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[c]="iPad",e[p]=_),e},this.getEngine=function(){var e={};return e[d]=void 0,e[f]=void 0,J.call(e,i,E.engine),e},this.getOS=function(){var e={};return e[d]=void 0,e[f]=void 0,J.call(e,i,E.os),v&&!e[d]&&m&&"Unknown"!=m.platform&&(e[d]=m.platform.replace(/chrome os/i,F).replace(/macos/i,q)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===l&&e.length>350?W(e,350):e,this},this.setUA(i),this};if(X.VERSION="1.0.35",X.BROWSER=H([d,f,u]),X.CPU=H([g]),X.DEVICE=H([c,h,p,m,y,E,_,v,b]),X.ENGINE=X.OS=H([d,f]),typeof r!==s)t.exports&&(r=t.exports=X),r.UAParser=X;else if(typeof define===o&&define.amd)e.r,void 0!==X&&e.v(X);else typeof n!==s&&(n.UAParser=X);var Z=typeof n!==s&&(n.jQuery||n.Zepto);if(Z&&!Z.ua){var Q=new X;Z.ua=Q.getResult(),Z.ua.get=function(){return Q.getUA()},Z.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var r in t)Z.ua[r]=t[r]}}}(this)}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},s=!0;try{n[e].call(r.exports,r,r.exports,o),s=!1}finally{s&&delete i[e]}return r.exports}o.ab="/ROOT/node_modules/next/dist/compiled/ua-parser-js/",t.exports=o(226)},4386,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i={isBot:function(){return a},userAgent:function(){return u},userAgentFromString:function(){return l}};for(var o in i)Object.defineProperty(r,o,{enumerable:!0,get:i[o]});let s=(n=e.r(99299))&&n.__esModule?n:{default:n};function a(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}function l(e){return{...(0,s.default)(e),isBot:void 0!==e&&a(e)}}function u({headers:e}){return l(e.get("user-agent")||void 0)}},79187,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"URLPattern",{enumerable:!0,get:function(){return n}});let n="undefined"==typeof URLPattern?void 0:URLPattern},53309,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"after",{enumerable:!0,get:function(){return i}});let n=e.r(56704);function i(e){let t=n.workAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:r}=t;return r.after(e)}},81053,(e,t,r)=>{"use strict";var n,i;Object.defineProperty(r,"__esModule",{value:!0}),n=e.r(53309),i=r,Object.keys(n).forEach(function(e){"default"===e||Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(i,e,{enumerable:!0,get:function(){return n[e]}})})},65252,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DynamicServerError:function(){return s},isDynamicServerError:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o="DYNAMIC_SERVER_USAGE";class s extends Error{constructor(e){super(`Dynamic server usage: ${e}`),this.description=e,this.digest=o}}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===o}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},97573,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={StaticGenBailoutError:function(){return s},isStaticGenBailoutError:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o="NEXT_STATIC_GEN_BAILOUT";class s extends Error{constructor(...e){super(...e),this.code=o}}function a(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===o}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},4642,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={isHangingPromiseRejectionError:function(){return o},makeDevtoolsIOAwarePromise:function(){return d},makeHangingPromise:function(){return u}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});function o(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===s}let s="HANGING_PROMISE_REJECTION";class a extends Error{constructor(e,t){super(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${e}".`),this.route=e,this.expression=t,this.digest=s}}let l=new WeakMap;function u(e,t,r){if(e.aborted)return Promise.reject(new a(t,r));{let n=new Promise((n,i)=>{let o=i.bind(null,new a(t,r)),s=l.get(e);if(s)s.push(o);else{let t=[o];l.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return n.catch(c),n}}function c(){}function d(e,t,r){return t.stagedRendering?t.stagedRendering.delayUntilStage(r,void 0,e):new Promise(t=>{setTimeout(()=>{t(e)},0)})}},96306,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={METADATA_BOUNDARY_NAME:function(){return o},OUTLET_BOUNDARY_NAME:function(){return a},ROOT_LAYOUT_BOUNDARY_NAME:function(){return l},VIEWPORT_BOUNDARY_NAME:function(){return s}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o="__next_metadata_boundary__",s="__next_viewport_boundary__",a="__next_outlet_boundary__",l="__next_root_layout_boundary__"},38244,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={atLeastOneTask:function(){return a},scheduleImmediate:function(){return s},scheduleOnNextTick:function(){return o},waitAtLeastOneReactRenderTask:function(){return l}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e=>{Promise.resolve().then(()=>{process.nextTick(e)})},s=e=>{setImmediate(e)};function a(){return new Promise(e=>s(e))}function l(){return new Promise(e=>setImmediate(e))}},31584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={BailoutToCSRError:function(){return s},isBailoutToCSRError:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o="BAILOUT_TO_CLIENT_SIDE_RENDERING";class s extends Error{constructor(e){super(`Bail out to client-side rendering: ${e}`),this.reason=e,this.digest=o}}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===o}},76414,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"InvariantError",{enumerable:!0,get:function(){return n}});class n extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}},8211,(e,t,r)=>{"use strict";function n(){let e,t,r=new Promise((r,n)=>{e=r,t=n});return{resolve:e,reject:t,promise:r}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createPromiseWithResolvers",{enumerable:!0,get:function(){return n}})},18185,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i={RenderStage:function(){return l},StagedRenderingController:function(){return u}};for(var o in i)Object.defineProperty(r,o,{enumerable:!0,get:i[o]});let s=e.r(76414),a=e.r(8211);var l=((n={})[n.Static=1]="Static",n[n.Runtime=2]="Runtime",n[n.Dynamic=3]="Dynamic",n);class u{constructor(e=null){this.abortSignal=e,this.currentStage=1,this.runtimeStagePromise=(0,a.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,a.createPromiseWithResolvers)(),e&&e.addEventListener("abort",()=>{let{reason:t}=e;this.currentStage<2&&(this.runtimeStagePromise.promise.catch(c),this.runtimeStagePromise.reject(t)),this.currentStage<3&&(this.dynamicStagePromise.promise.catch(c),this.dynamicStagePromise.reject(t))},{once:!0})}advanceStage(e){!(this.currentStage>=e)&&(this.currentStage=e,e>=2&&this.runtimeStagePromise.resolve(),e>=3&&this.dynamicStagePromise.resolve())}getStagePromise(e){switch(e){case 2:return this.runtimeStagePromise.promise;case 3:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new s.InvariantError(`Invalid render stage: ${e}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(e){return this.getStagePromise(e)}delayUntilStage(e,t,r){var n,i,o;let s,a=(n=this.getStagePromise(e),i=t,o=r,s=new Promise((e,t)=>{n.then(e.bind(null,o),t)}),void 0!==i&&(s.displayName=i),s);return this.abortSignal&&a.catch(c),a}}function c(){}},68665,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i,o={Postpone:function(){return I},PreludeState:function(){return X},abortAndThrowOnSynchronousRequestDataAccess:function(){return R},abortOnSynchronousPlatformIOAccess:function(){return w},accessedDynamicData:function(){return j},annotateDynamicAccess:function(){return B},consumeDynamicAccess:function(){return L},createDynamicTrackingState:function(){return E},createDynamicValidationState:function(){return v},createHangingInputAbortSignal:function(){return q},createRenderInBrowserAbortSignal:function(){return F},delayUntilRuntimeStage:function(){return ee},formatDynamicAPIAccesses:function(){return G},getFirstDynamicReason:function(){return b},isDynamicPostpone:function(){return x},isPrerenderInterruptedError:function(){return U},logDisallowedDynamicError:function(){return Z},markCurrentScopeAsDynamic:function(){return S},postponeWithTracking:function(){return P},throwIfDisallowedDynamic:function(){return Q},throwToInterruptStaticGeneration:function(){return T},trackAllowedDynamicAccess:function(){return z},trackDynamicDataInDynamicRender:function(){return A},trackSynchronousPlatformIOAccessInDev:function(){return C},useDynamicRouteParams:function(){return H},useDynamicSearchParams:function(){return V}};for(var s in o)Object.defineProperty(r,s,{enumerable:!0,get:o[s]});let a=(n=e.r(47540))&&n.__esModule?n:{default:n},l=e.r(65252),u=e.r(97573),c=e.r(32319),d=e.r(56704),p=e.r(4642),h=e.r(96306),f=e.r(38244),g=e.r(31584),m=e.r(76414),y=e.r(18185),_="function"==typeof a.default.unstable_postpone;function E(e){return{isDebugDynamicAccesses:e,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function v(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function b(e){var t;return null==(t=e.dynamicAccesses[0])?void 0:t.expression}function S(e,t,r){if(t)switch(t.type){case"cache":case"unstable-cache":case"private-cache":return}if(!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw Object.defineProperty(new u.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(t)switch(t.type){case"prerender-ppr":return P(e.route,r,t.dynamicTracking);case"prerender-legacy":t.revalidate=0;let n=Object.defineProperty(new l.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=r,e.dynamicUsageStack=n.stack,n}}}function T(e,t,r){let n=Object.defineProperty(new l.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}function A(e){switch(e.type){case"cache":case"unstable-cache":case"private-cache":return}}function O(e,t,r){let n=M(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`);r.controller.abort(n);let i=r.dynamicTracking;i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t})}function w(e,t,r,n){let i=n.dynamicTracking;O(e,t,n),i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicErrorWithStack=r)}function C(e){e.stagedRendering&&e.stagedRendering.advanceStage(y.RenderStage.Dynamic)}function R(e,t,r,n){if(!1===n.controller.signal.aborted){O(e,t,n);let i=n.dynamicTracking;i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicErrorWithStack=r)}throw M(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}function I({reason:e,route:t}){let r=c.workUnitAsyncStorage.getStore();P(t,e,r&&"prerender-ppr"===r.type?r.dynamicTracking:null)}function P(e,t,r){(function(){if(!_)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),a.default.unstable_postpone(N(e,t))}function N(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function x(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message&&k(e.message)}function k(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===k(N("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let D="NEXT_PRERENDER_INTERRUPTED";function M(e){let t=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t.digest=D,t}function U(e){return"object"==typeof e&&null!==e&&e.digest===D&&"name"in e&&"message"in e&&e instanceof Error}function j(e){return e.length>0}function L(e,t){return e.dynamicAccesses.push(...t.dynamicAccesses),e.dynamicAccesses}function G(e){return e.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function F(){let e=new AbortController;return e.abort(Object.defineProperty(new g.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),e.signal}function q(e){switch(e.type){case"prerender":case"prerender-runtime":let t=new AbortController;if(e.cacheSignal)e.cacheSignal.inputReady().then(()=>{t.abort()});else{let r=(0,c.getRuntimeStagePromise)(e);r?r.then(()=>(0,f.scheduleOnNextTick)(()=>t.abort())):(0,f.scheduleOnNextTick)(()=>t.abort())}return t.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function B(e,t){let r=t.dynamicTracking;r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:e})}function H(e){let t=d.workAsyncStorage.getStore(),r=c.workUnitAsyncStorage.getStore();if(t&&r)switch(r.type){case"prerender-client":case"prerender":{let n=r.fallbackRouteParams;n&&n.size>0&&a.default.use((0,p.makeHangingPromise)(r.renderSignal,t.route,e));break}case"prerender-ppr":{let n=r.fallbackRouteParams;if(n&&n.size>0)return P(t.route,e,r.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new m.InvariantError(`\`${e}\` was called during a runtime prerender. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new m.InvariantError(`\`${e}\` was called inside a cache scope. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function V(e){let t=d.workAsyncStorage.getStore(),r=c.workUnitAsyncStorage.getStore();if(t)switch(!r&&(0,c.throwForMissingRequestStore)(e),r.type){case"prerender-client":a.default.use((0,p.makeHangingPromise)(r.renderSignal,t.route,e));break;case"prerender-legacy":case"prerender-ppr":if(t.forceStatic)return;throw Object.defineProperty(new g.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new m.InvariantError(`\`${e}\` was called from a Server Component. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new m.InvariantError(`\`${e}\` was called inside a cache scope. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let $=/\n\s+at Suspense \(<anonymous>\)/,W=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${h.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),J=RegExp(`\\n\\s+at ${h.METADATA_BOUNDARY_NAME}[\\n\\s]`),K=RegExp(`\\n\\s+at ${h.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),Y=RegExp(`\\n\\s+at ${h.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function z(e,t,r,n){if(!Y.test(t)){if(J.test(t)){r.hasDynamicMetadata=!0;return}if(K.test(t)){r.hasDynamicViewport=!0;return}if(W.test(t)){r.hasAllowedDynamic=!0,r.hasSuspenseAboveBody=!0;return}else if($.test(t)){r.hasAllowedDynamic=!0;return}else{var i,o;let s;if(n.syncDynamicErrorWithStack)return void r.dynamicErrors.push(n.syncDynamicErrorWithStack);let a=(i=`Route "${e.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,o=t,(s=Object.defineProperty(Error(i),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})).stack=s.name+": "+i+o,s);return void r.dynamicErrors.push(a)}}}var X=((i={})[i.Full=0]="Full",i[i.Empty=1]="Empty",i[i.Errored=2]="Errored",i);function Z(e,t){console.error(t),e.dev||(e.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${e.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${e.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function Q(e,t,r,n){if(n.syncDynamicErrorWithStack)throw Z(e,n.syncDynamicErrorWithStack),new u.StaticGenBailoutError;if(0!==t){if(r.hasSuspenseAboveBody)return;let n=r.dynamicErrors;if(n.length>0){for(let t=0;t<n.length;t++)Z(e,n[t]);throw new u.StaticGenBailoutError}if(r.hasDynamicViewport)throw console.error(`Route "${e.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new u.StaticGenBailoutError;if(1===t)throw console.error(`Route "${e.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new u.StaticGenBailoutError}else if(!1===r.hasAllowedDynamic&&r.hasDynamicMetadata)throw console.error(`Route "${e.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new u.StaticGenBailoutError}function ee(e,t){return e.runtimeStagePromise?e.runtimeStagePromise.then(()=>t):t}},43824,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={isRequestAPICallableInsideAfter:function(){return u},throwForSearchParamsAccessInUseCache:function(){return l},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e.r(97573),s=e.r(24725);function a(e,t){throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${e} with \`dynamic = "error"\` couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function l(e,t){let r=Object.defineProperty(Error(`Route ${e.route} used \`searchParams\` inside "use cache". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await \`searchParams\` outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E842",enumerable:!1,configurable:!0});throw Error.captureStackTrace(r,t),e.invalidDynamicUsageError??=r,r}function u(){let e=s.afterTaskAsyncStorage.getStore();return(null==e?void 0:e.rootTaskSpawnPhase)==="action"}},75674,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"connection",{enumerable:!0,get:function(){return u}});let n=e.r(56704),i=e.r(32319),o=e.r(68665),s=e.r(97573),a=e.r(4642),l=e.r(43824);function u(){let e=n.workAsyncStorage.getStore(),t=i.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside \`after()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but \`after()\` executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E827",enumerable:!1,configurable:!0});if(e.forceStatic)return Promise.resolve(void 0);if(e.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E847",enumerable:!1,configurable:!0});if(t)switch(t.type){case"cache":{let t=Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual request, but caches must be able to be produced before a request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E841",enumerable:!1,configurable:!0});throw Error.captureStackTrace(t,u),e.invalidDynamicUsageError??=t,t}case"private-cache":{let t=Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside "use cache: private". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E837",enumerable:!1,configurable:!0});throw Error.captureStackTrace(t,u),e.invalidDynamicUsageError??=t,t}case"unstable-cache":throw Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside a function cached with \`unstable_cache()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E840",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-runtime":return(0,a.makeHangingPromise)(t.renderSignal,e.route,"`connection()`");case"prerender-ppr":return(0,o.postponeWithTracking)(e.route,"connection",t.dynamicTracking);case"prerender-legacy":return(0,o.throwToInterruptStaticGeneration)("connection",e,t);case"request":return(0,o.trackDynamicDataInDynamicRender)(t),Promise.resolve(void 0)}}(0,i.throwForMissingRequestStore)("connection")}e.r(18185)},89171,(e,t,r)=>{let n={NextRequest:e.r(29666).NextRequest,NextResponse:e.r(46633).NextResponse,ImageResponse:e.r(87963).ImageResponse,userAgentFromString:e.r(4386).userAgentFromString,userAgent:e.r(4386).userAgent,URLPattern:e.r(79187).URLPattern,after:e.r(81053).after,connection:e.r(75674).connection};t.exports=n,r.NextRequest=n.NextRequest,r.NextResponse=n.NextResponse,r.ImageResponse=n.ImageResponse,r.userAgentFromString=n.userAgentFromString,r.userAgent=n.userAgent,r.URLPattern=n.URLPattern,r.after=n.after,r.connection=n.connection},33405,(e,t,r)=>{t.exports=e.x("child_process",()=>require("child_process"))},22734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},25705,(e,t,r)=>{"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)},l=function(e){if(!e||"[object Object]"!==i.call(e))return!1;var t,r=n.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!o)return!1;for(t in e);return void 0===t||n.call(e,t)},u=function(e,t){o&&"__proto__"===t.name?o(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!n.call(e,t))return;else if(s)return s(e,t).value}return e[t]};t.exports=function e(){var t,r,n,i,o,s,d=arguments[0],p=1,h=arguments.length,f=!1;for("boolean"==typeof d&&(f=d,d=arguments[1]||{},p=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});p<h;++p)if(t=arguments[p],null!=t)for(r in t)n=c(d,r),d!==(i=c(t,r))&&(f&&i&&(l(i)||(o=a(i)))?(o?(o=!1,s=n&&a(n)?n:[]):s=n&&l(n)?n:{},u(d,{name:r,newValue:e(f,s,i)})):void 0!==i&&u(d,{name:r,newValue:i}));return d}},451,e=>{e.v({name:"gaxios",version:"7.1.3",description:"A simple common HTTP client specifically for Google APIs and services.",main:"build/cjs/src/index.js",types:"build/cjs/src/index.d.ts",files:["build/"],exports:{".":{import:{types:"./build/esm/src/index.d.ts",default:"./build/esm/src/index.js"},require:{types:"./build/cjs/src/index.d.ts",default:"./build/cjs/src/index.js"}}},scripts:{lint:"gts check --no-inline-config",test:"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000",compile:"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean"},repository:{type:"git",directory:"packages/gaxios",url:"https://github.com/googleapis/google-cloud-node-core.git"},keywords:["google"],engines:{node:">=18"},author:"Google, LLC",license:"Apache-2.0",devDependencies:{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6",assert:"^2.0.0",browserify:"^17.0.0",c8:"^10.0.0",cors:"^2.8.5",express:"^5.0.0",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",linkinator:"^6.1.2",mocha:"^11.1.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","stream-browserify":"^3.0.0",tmp:"0.2.5","ts-loader":"^9.5.2",typescript:"^5.8.3",webpack:"^5.35.0","webpack-cli":"^6.0.1"},dependencies:{extend:"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2",rimraf:"^5.0.1"},homepage:"https://github.com/googleapis/google-cloud-node-core/tree/main/packages/gaxios"})},61675,(e,t,r)=>{"use strict";t.exports={pkg:e.r(451)}},27078,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.GaxiosError=r.GAXIOS_ERROR_SYMBOL=void 0,r.defaultErrorRedactor=function e(t){let r="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function n(e){e&&e.forEach((t,n)=>{(/^authentication$/i.test(n)||/^authorization$/i.test(n)||/secret/i.test(n))&&e.set(n,r)})}function i(e,t){if("object"==typeof e&&null!==e&&"string"==typeof e[t]){let n=e[t];(/grant_type=/i.test(n)||/assertion=/i.test(n)||/secret/i.test(n))&&(e[t]=r)}}function o(e){!e||"object"!=typeof e||(e instanceof FormData||e instanceof URLSearchParams||"forEach"in e&&"set"in e?e.forEach((t,n)=>{(["grant_type","assertion"].includes(n)||/secret/.test(n))&&e.set(n,r)}):("grant_type"in e&&(e.grant_type=r),"assertion"in e&&(e.assertion=r),"client_secret"in e&&(e.client_secret=r)))}return t.config&&(n(t.config.headers),i(t.config,"data"),o(t.config.data),i(t.config,"body"),o(t.config.body),t.config.url.searchParams.has("token")&&t.config.url.searchParams.set("token",r),t.config.url.searchParams.has("client_secret")&&t.config.url.searchParams.set("client_secret",r)),t.response&&(e({config:t.response.config}),n(t.response.headers),t.response.bodyUsed&&(i(t.response,"data"),o(t.response.data))),t};let i=n(e.r(25705)),o=n(e.r(61675)).default.pkg;r.GAXIOS_ERROR_SYMBOL=Symbol.for(`${o.name}-gaxios-error`);class s extends Error{config;response;code;status;error;[r.GAXIOS_ERROR_SYMBOL]=o.version;static[Symbol.hasInstance](e){return!!e&&"object"==typeof e&&r.GAXIOS_ERROR_SYMBOL in e&&e[r.GAXIOS_ERROR_SYMBOL]===o.version||Function.prototype[Symbol.hasInstance].call(s,e)}constructor(e,t,r,n){if(super(e,{cause:n}),this.config=t,this.response=r,this.error=n instanceof Error?n:void 0,this.config=(0,i.default)(!0,{},t),this.response&&(this.response.config=(0,i.default)(!0,{},this.response.config)),this.response){try{this.response.data=function(e,t){switch(e){case"stream":default:return t;case"json":return JSON.parse(JSON.stringify(t));case"arraybuffer":return JSON.parse(Buffer.from(t).toString("utf8"));case"blob":return JSON.parse(t.text())}}(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}n instanceof DOMException?this.code=n.name:n&&"object"==typeof n&&"code"in n&&("string"==typeof n.code||"number"==typeof n.code)&&(this.code=n.code)}static extractAPIErrorFromResponse(e,t="The request failed"){let r=t;if("string"==typeof e.data&&(r=e.data),e.data&&"object"==typeof e.data&&"error"in e.data&&e.data.error&&!e.ok){if("string"==typeof e.data.error)return{message:e.data.error,code:e.status,status:e.statusText};if("object"==typeof e.data.error){r="message"in e.data.error&&"string"==typeof e.data.error.message?e.data.error.message:r;let t="status"in e.data.error&&"string"==typeof e.data.error.status?e.data.error.status:e.statusText,n="code"in e.data.error&&"number"==typeof e.data.error.code?e.data.error.code:e.status;if("errors"in e.data.error&&Array.isArray(e.data.error.errors)){let i=[];for(let t of e.data.error.errors)"object"==typeof t&&"message"in t&&"string"==typeof t.message&&i.push(t.message);return Object.assign({message:i.join("\n")||r,code:n,status:t},e.data.error)}return Object.assign({message:r,code:n,status:t},e.data.error)}}return{message:r,code:e.status,status:e.statusText}}}r.GaxiosError=s},35156,(e,t,r)=>{"use strict";async function n(e){var t;let r=o(e);if(!e||!e.config||!r&&!e.config.retry)return{shouldRetry:!1};(r=r||{}).currentRetryAttempt=r.currentRetryAttempt||0,r.retry=void 0===r.retry||null===r.retry?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=void 0===r.noResponseRetries||null===r.noResponseRetries?2:r.noResponseRetries,r.retryDelayMultiplier=r.retryDelayMultiplier?r.retryDelayMultiplier:2,r.timeOfFirstRequest=r.timeOfFirstRequest?r.timeOfFirstRequest:Date.now(),r.totalTimeout=r.totalTimeout?r.totalTimeout:Number.MAX_SAFE_INTEGER,r.maxRetryDelay=r.maxRetryDelay?r.maxRetryDelay:Number.MAX_SAFE_INTEGER,r.statusCodesToRetry=r.statusCodesToRetry||[[100,199],[408,408],[429,429],[500,599]],e.config.retryConfig=r;let n=r.shouldRetry||i;if(!await n(e))return{shouldRetry:!1,config:e.config};let s=Math.min(((t=r).currentRetryAttempt?0:t.retryDelay??100)+(Math.pow(t.retryDelayMultiplier,t.currentRetryAttempt)-1)/2*1e3,t.totalTimeout-(Date.now()-t.timeOfFirstRequest),t.maxRetryDelay);e.config.retryConfig.currentRetryAttempt+=1;let a=r.retryBackoff?r.retryBackoff(e,s):new Promise(e=>{setTimeout(e,s)});return r.onRetryAttempt&&await r.onRetryAttempt(e),await a,{shouldRetry:!0,config:e.config}}function i(e){let t=o(e);if(e.config.signal?.aborted&&"TimeoutError"!==e.code||"AbortError"===e.code||!t||0===t.retry||!e.response&&(t.currentRetryAttempt||0)>=t.noResponseRetries||!t.httpMethodsToRetry||!t.httpMethodsToRetry.includes(e.config.method?.toUpperCase()||"GET"))return!1;if(e.response&&e.response.status){let r=!1;for(let[n,i]of t.statusCodesToRetry){let t=e.response.status;if(t>=n&&t<=i){r=!0;break}}if(!r)return!1}return t.currentRetryAttempt=t.currentRetryAttempt||0,!(t.currentRetryAttempt>=t.retry)}function o(e){if(e&&e.config&&e.config.retryConfig)return e.config.retryConfig}Object.defineProperty(r,"__esModule",{value:!0}),r.getRetryConfig=n},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},3137,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GaxiosInterceptorManager=void 0;class n extends Set{}r.GaxiosInterceptorManager=n},80038,(e,t,r)=>{"use strict";var n,i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Gaxios=void 0;let o=i(e.r(25705)),s=e.r(24836),a=e.r(27078),l=e.r(35156),u=e.r(88947),c=e.r(3137),d=async()=>globalThis.crypto?.randomUUID()||(await e.A(85685)).randomUUID();class p{agentCache=new Map;defaults;interceptors;constructor(e){this.defaults=e||{},this.interceptors={request:new c.GaxiosInterceptorManager,response:new c.GaxiosInterceptorManager}}fetch(...e){let t,r=e[0],i=e[1],o=new Headers;return("string"==typeof r?t=new URL(r):r instanceof URL?t=r:r&&r.url&&(t=new URL(r.url)),r&&"object"==typeof r&&"headers"in r&&n.mergeHeaders(o,r.headers),i&&n.mergeHeaders(o,new Headers(i.headers)),"object"!=typeof r||r instanceof URL)?this.request({...i,headers:o,url:t}):this.request({...i,...r,headers:o,url:t})}async request(e={}){let t=await this.#e(e);return t=await this.#t(t),this.#r(this._request(t))}async _defaultAdapter(e){let t=e.fetchImplementation||this.defaults.fetchImplementation||await n.#n(),r={...e};delete r.data;let i=await t(e.url,r),o=await this.getResponseData(e,i);return Object.getOwnPropertyDescriptor(i,"data")?.configurable||Object.defineProperties(i,{data:{configurable:!0,writable:!0,enumerable:!0,value:o}}),Object.assign(i,{config:e,data:o})}async _request(e){try{let t;if(t=e.adapter?await e.adapter(e,this._defaultAdapter.bind(this)):await this._defaultAdapter(e),!e.validateStatus(t.status)){if("stream"===e.responseType){let e=[];for await(let r of t.data)e.push(r);t.data=e.toString()}let r=a.GaxiosError.extractAPIErrorFromResponse(t,`Request failed with status code ${t.status}`);throw new a.GaxiosError(r?.message,e,t,r)}return t}catch(i){let t;t=i instanceof a.GaxiosError?i:i instanceof Error?new a.GaxiosError(i.message,e,void 0,i):new a.GaxiosError("Unexpected Gaxios Error",e,void 0,i);let{shouldRetry:r,config:n}=await (0,l.getRetryConfig)(t);if(r&&n)return t.config.retryConfig.currentRetryAttempt=n.retryConfig.currentRetryAttempt,e.retryConfig=t.config?.retryConfig,this.#i(e),this._request(e);throw e.errorRedactor&&e.errorRedactor(t),t}}async getResponseData(e,t){if(204===t.status)return"";if(e.maxContentLength&&t.headers.has("content-length")&&e.maxContentLength<Number.parseInt(t.headers?.get("content-length")||""))throw new a.GaxiosError("Response's `Content-Length` is over the limit.",e,Object.assign(t,{config:e}));switch(e.responseType){case"stream":return t.body;case"json":{let e=await t.text();try{return JSON.parse(e)}catch{return e}}case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"text":return t.text();default:return this.getResponseDataFromContentType(t)}}#o(e,t=[]){let r=new URL(e),n=[...t];for(let e of(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[])n.push(e.trim());for(let e of n)if(e instanceof RegExp){if(e.test(r.toString()))return!1}else if(e instanceof URL){if(e.origin===r.origin)return!1}else if(e.startsWith("*.")||e.startsWith(".")){let t=e.replace(/^\*\./,".");if(r.hostname.endsWith(t))return!1}else if(e===r.origin||e===r.hostname||e===r.href)return!1;return!0}async #t(e){let t=Promise.resolve(e);for(let e of this.interceptors.request.values())e&&(t=t.then(e.resolved,e.rejected));return t}async #r(e){let t=Promise.resolve(e);for(let e of this.interceptors.response.values())e&&(t=t.then(e.resolved,e.rejected));return t}async #e(e){let t=new Headers(this.defaults.headers);n.mergeHeaders(t,e.headers);let r=(0,o.default)(!0,{},this.defaults,e);if(!r.url)throw Error("URL is required.");if(r.baseURL&&(r.url=new URL(r.url,r.baseURL)),r.url=new URL(r.url),r.params)if(r.paramsSerializer){let e=r.paramsSerializer(r.params);e.startsWith("?")&&(e=e.slice(1));let t=r.url.toString().includes("?")?"&":"?";r.url=r.url+t+e}else{let e=r.url instanceof URL?r.url:new URL(r.url);for(let[t,n]of new URLSearchParams(r.params))e.searchParams.append(t,n);r.url=e}"number"==typeof e.maxContentLength&&(r.size=e.maxContentLength),"number"==typeof e.maxRedirects&&(r.follow=e.maxRedirects);let i="string"==typeof r.data||r.data instanceof ArrayBuffer||r.data instanceof Blob||globalThis.File&&r.data instanceof File||r.data instanceof FormData||r.data instanceof u.Readable||r.data instanceof ReadableStream||r.data instanceof String||r.data instanceof URLSearchParams||ArrayBuffer.isView(r.data)||["Blob","File","FormData"].includes(r.data?.constructor?.name||"");if(r.multipart?.length){let e=await d();t.set("content-type",`multipart/related; boundary=${e}`),r.body=u.Readable.from(this.getMultipartRequest(r.multipart,e))}else i?r.body=r.data:"object"==typeof r.data?"application/x-www-form-urlencoded"===t.get("Content-Type")?r.body=r.paramsSerializer?r.paramsSerializer(r.data):new URLSearchParams(r.data):(t.has("content-type")||t.set("content-type","application/json"),r.body=JSON.stringify(r.data)):r.data&&(r.body=r.data);r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"unknown",t.has("accept")||"json"!==r.responseType||t.set("accept","application/json");let l=r.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(r.agent);else if(l&&this.#o(r.url,r.noProxy)){let e=await n.#s();this.agentCache.has(l)?r.agent=this.agentCache.get(l):(r.agent=new e(l,{cert:r.cert,key:r.key}),this.agentCache.set(l,r.agent))}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new s.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return"function"!=typeof r.errorRedactor&&!1!==r.errorRedactor&&(r.errorRedactor=a.defaultErrorRedactor),!r.body||"duplex"in r||(r.duplex="half"),this.#i(r),Object.assign(r,{headers:t,url:r.url instanceof URL?r.url:new URL(r.url)})}#i(e){if(e.timeout){let t=AbortSignal.timeout(e.timeout);e.signal&&!e.signal.aborted?e.signal=AbortSignal.any([e.signal,t]):e.signal=t}}validateStatus(e){return e>=200&&e<300}async getResponseDataFromContentType(e){let t=e.headers.get("Content-Type");if(null===t)return e.text();if((t=t.toLowerCase()).includes("application/json")){let t=await e.text();try{t=JSON.parse(t)}catch{}return t}return t.match(/^text\//)?e.text():e.blob()}async *getMultipartRequest(e,t){let r=`--${t}--`;for(let r of e){let e=r.headers.get("Content-Type")||"application/octet-stream",n=`--${t}\r
Content-Type: ${e}\r
\r
`;yield n,"string"==typeof r.content?yield r.content:yield*r.content,yield"\r\n"}yield r}static #a;static #l;static async #s(){return this.#a||=(await e.A(91961)).HttpsProxyAgent,this.#a}static async #n(){return this.#l||=(await e.A(72331)).default,this.#l}static mergeHeaders(e,...t){for(let r of(e=e instanceof Headers?e:new Headers(e),t))(r instanceof Headers?r:new Headers(r)).forEach((t,r)=>{"set-cookie"===r?e.append(r,t):e.set(r,t)});return e}}r.Gaxios=p,n=p},57612,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.instance=r.Gaxios=r.GaxiosError=void 0,r.request=a;let o=e.r(80038);Object.defineProperty(r,"Gaxios",{enumerable:!0,get:function(){return o.Gaxios}});var s=e.r(27078);async function a(e){return r.instance.request(e)}Object.defineProperty(r,"GaxiosError",{enumerable:!0,get:function(){return s.GaxiosError}}),i(e.r(3137),r),r.instance=new o.Gaxios},29077,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GCE_LINUX_BIOS_PATHS=void 0,r.isGoogleCloudServerless=o,r.isGoogleComputeEngineLinux=s,r.isGoogleComputeEngineMACAddress=a,r.isGoogleComputeEngine=l,r.detectGCPResidency=function(){return o()||l()},e.r(22734);let n=e.r(46786);r.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};let i=/^42:01/;function o(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function s(){if("linux"!==(0,n.platform)())return!1}function a(){for(let e of Object.values((0,n.networkInterfaces)()))if(e){for(let{mac:t}of e)if(i.test(t))return!0}return!1}function l(){return s()||a()}},45905,(e,t,r)=>{!function(r){"use strict";var n,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,s=Math.floor,a="[BigNumber Error] ",l=a+"Number primitive has more than 15 significant digits: ",u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function c(e){var t=0|e;return e>0||e===t?t:t-1}function d(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(r=14-(t=e[n++]+"").length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function p(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,l=e.e,u=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=l==u,!i||!o)return n?0:!i^r?1:-1;if(!n)return l>u^r?1:-1;for(s=0,a=(l=i.length)<(u=o.length)?l:u;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return l==u?0:l>u^r?1:-1}function h(e,t,r,n){if(e<t||e>r||e!==s(e))throw Error(a+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function f(e){var t=e.c.length-1;return c(e.e/14)==t&&e.c[t]%2!=0}function g(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function m(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(n=e.length,++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}if((n=function e(t){var r,n,y,_,E,v,b,S,T,A=L.prototype={constructor:L,toString:null,valueOf:null},O=new L(1),w=20,C=4,R=-7,I=21,P=-1e7,N=1e7,x=!1,k=1,D=0,M={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz",j=!0;function L(e,t){var r,n,o,a,u,c,d,p,f=this;if(!(f instanceof L))return new L(e,t);if(null==t){if(e&&!0===e._isBigNumber){f.s=e.s,!e.c||e.e>N?f.c=f.e=null:e.e<P?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice());return}if((c="number"==typeof e)&&0*e==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,u=e;u>=10;u/=10,a++);a>N?f.c=f.e=null:(f.e=a,f.c=[e]);return}p=String(e)}else{if(!i.test(p=String(e)))return T(f,p,c);f.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(a=p.indexOf("."))>-1&&(p=p.replace(".","")),(u=p.search(/e/i))>0?(a<0&&(a=u),a+=+p.slice(u+1),p=p.substring(0,u)):a<0&&(a=p.length)}else{if(h(t,2,U.length,"Base"),10==t&&j)return B(f=new L(e),w+f.e+1,C);if(p=String(e),c="number"==typeof e){if(0*e!=0)return T(f,p,c,t);if(f.s=1/e<0?(p=p.slice(1),-1):1,L.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(l+e)}else f.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=U.slice(0,t),a=u=0,d=p.length;u<d;u++)if(0>r.indexOf(n=p.charAt(u))){if("."==n){if(u>a){a=d;continue}}else if(!o&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){o=!0,u=-1,a=0;continue}return T(f,String(e),c,t)}c=!1,(a=(p=S(p,t,10,f.s)).indexOf("."))>-1?p=p.replace(".",""):a=p.length}for(u=0;48===p.charCodeAt(u);u++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(u,++d)){if(d-=u,c&&L.DEBUG&&d>15&&(e>0x1fffffffffffff||e!==s(e)))throw Error(l+f.s*e);if((a=a-u-1)>N)f.c=f.e=null;else if(a<P)f.c=[f.e=0];else{if(f.e=a,f.c=[],u=(a+1)%14,a<0&&(u+=14),u<d){for(u&&f.c.push(+p.slice(0,u)),d-=14;u<d;)f.c.push(+p.slice(u,u+=14));u=14-(p=p.slice(u)).length}else u-=d;for(;u--;p+="0");f.c.push(+p)}}else f.c=[f.e=0]}function G(e,t,r,n){var i,o,s,a,l;if(null==r?r=C:h(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)l=d(e.c),l=1==n||2==n&&(s<=R||s>=I)?g(l,s):m(l,s,"0");else if(o=(e=B(new L(e),t,r)).e,a=(l=d(e.c)).length,1==n||2==n&&(t<=o||o<=R)){for(;a<t;l+="0",a++);l=g(l,o)}else if(t-=s+(2===n&&o>s),l=m(l,o,"0"),o+1>a){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=o-a)>0)for(o+1==a&&(l+=".");t--;l+="0");return e.s<0&&i?"-"+l:l}function F(e,t){for(var r,n,i=1,o=new L(e[0]);i<e.length;i++)(n=new L(e[i])).s&&(r=p(o,n))!==t&&(0!==r||o.s!==t)||(o=n);return o}function q(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+14*r-1)>N?e.c=e.e=null:r<P?e.c=[e.e=0]:(e.e=r,e.c=t),e}function B(e,t,r,n){var i,a,l,c,d,p,h,f=e.c;if(f){e:{for(i=1,c=f[0];c>=10;c/=10,i++);if((a=t-i)<0)a+=14,l=t,h=s((d=f[p=0])/u[i-l-1]%10);else if((p=o((a+1)/14))>=f.length)if(n){for(;f.length<=p;f.push(0));d=h=0,i=1,a%=14,l=a-14+1}else break e;else{for(i=1,d=c=f[p];c>=10;c/=10,i++);a%=14,h=(l=a-14+i)<0?0:s(d/u[i-l-1]%10)}if(n=n||t<0||null!=f[p+1]||(l<0?d:d%u[i-l-1]),n=r<4?(h||n)&&(0==r||r==(e.s<0?3:2)):h>5||5==h&&(4==r||n||6==r&&(a>0?l>0?d/u[i-l]:0:f[p-1])%10&1||r==(e.s<0?8:7)),t<1||!f[0])return f.length=0,n?(t-=e.e+1,f[0]=u[(14-t%14)%14],e.e=-t||0):f[0]=e.e=0,e;if(0==a?(f.length=p,c=1,p--):(f.length=p+1,c=u[14-a],f[p]=l>0?s(d/u[i-l]%u[l])*c:0),n)for(;;)if(0==p){for(a=1,l=f[0];l>=10;l/=10,a++);for(l=f[0]+=c,c=1;l>=10;l/=10,c++);a!=c&&(e.e++,1e14==f[0]&&(f[0]=1));break}else{if(f[p]+=c,1e14!=f[p])break;f[p--]=0,c=1}for(a=f.length;0===f[--a];f.pop());}e.e>N?e.c=e.e=null:e.e<P&&(e.c=[e.e=0])}return e}function H(e){var t,r=e.e;return null===r?e.toString():(t=d(e.c),t=r<=R||r>=I?g(t,r):m(t,r,"0"),e.s<0?"-"+t:t)}return L.clone=e,L.ROUND_UP=0,L.ROUND_DOWN=1,L.ROUND_CEIL=2,L.ROUND_FLOOR=3,L.ROUND_HALF_UP=4,L.ROUND_HALF_DOWN=5,L.ROUND_HALF_EVEN=6,L.ROUND_HALF_CEIL=7,L.ROUND_HALF_FLOOR=8,L.EUCLID=9,L.config=L.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(h(r=e[t],0,1e9,t),w=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(h(r=e[t],0,8,t),C=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(h(r[0],-1e9,0,t),h(r[1],0,1e9,t),R=r[0],I=r[1]):(h(r,-1e9,1e9,t),R=-(I=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)h(r[0],-1e9,-1,t),h(r[1],1,1e9,t),P=r[0],N=r[1];else if(h(r,-1e9,1e9,t),r)P=-(N=r<0?-r:r);else throw Error(a+t+" cannot be zero: "+r);if(e.hasOwnProperty(t="CRYPTO"))if(!!(r=e[t])===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))x=r;else throw x=!r,Error(a+"crypto unavailable");else x=r;else throw Error(a+t+" not true or false: "+r);if(e.hasOwnProperty(t="MODULO_MODE")&&(h(r=e[t],0,9,t),k=r),e.hasOwnProperty(t="POW_PRECISION")&&(h(r=e[t],0,1e9,t),D=r),e.hasOwnProperty(t="FORMAT"))if("object"==typeof(r=e[t]))M=r;else throw Error(a+t+" not an object: "+r);if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(a+t+" invalid: "+r);j="0123456789"==r.slice(0,10),U=r}}else throw Error(a+"Object expected: "+e);return{DECIMAL_PLACES:w,ROUNDING_MODE:C,EXPONENTIAL_AT:[R,I],RANGE:[P,N],CRYPTO:x,MODULO_MODE:k,POW_PRECISION:D,FORMAT:M,ALPHABET:U}},L.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!L.DEBUG)return!0;var t,r,n=e.c,i=e.e,o=e.s;e:if("[object Array]"==({}).toString.call(n)){if((1===o||-1===o)&&i>=-1e9&&i<=1e9&&i===s(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%14)<1&&(t+=14),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=1e14||r!==s(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(a+"Invalid BigNumber: "+e)},L.maximum=L.max=function(){return F(arguments,-1)},L.minimum=L.min=function(){return F(arguments,1)},r=0x20000000000000*Math.random()&2097151?function(){return s(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},L.random=function(e){var t,n,i,l,c,d=0,p=[],f=new L(O);if(null==e?e=w:h(e,0,1e9),l=o(e/14),x)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(l*=2));d<l;)(c=131072*t[d]+(t[d+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[d]=n[0],t[d+1]=n[1]):(p.push(c%1e14),d+=2);d=l/2}else if(crypto.randomBytes){for(t=crypto.randomBytes(l*=7);d<l;)(c=(31&t[d])*0x1000000000000+0x10000000000*t[d+1]+0x100000000*t[d+2]+0x1000000*t[d+3]+(t[d+4]<<16)+(t[d+5]<<8)+t[d+6])>=9e15?crypto.randomBytes(7).copy(t,d):(p.push(c%1e14),d+=7);d=l/7}else throw x=!1,Error(a+"crypto unavailable");if(!x)for(;d<l;)(c=r())<9e15&&(p[d++]=c%1e14);for(l=p[--d],e%=14,l&&e&&(c=u[14-e],p[d]=s(l/c)*c);0===p[d];p.pop(),d--);if(d<0)p=[i=0];else{for(i=-1;0===p[0];p.splice(0,1),i-=14);for(d=1,c=p[0];c>=10;c/=10,d++);d<14&&(i-=14-d)}return f.e=i,f.c=p,f},L.sum=function(){for(var e=1,t=arguments,r=new L(t[0]);e<t.length;)r=r.plus(t[e++]);return r},S=function(){var e="0123456789";function t(e,t,r,n){for(var i,o,s=[0],a=0,l=e.length;a<l;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(r,n,i,o,s){var a,l,u,c,p,h,f,g,y=r.indexOf("."),_=w,E=C;for(y>=0&&(c=D,D=0,r=r.replace(".",""),h=(g=new L(n)).pow(r.length-y),D=c,g.c=t(m(d(h.c),h.e,"0"),10,i,e),g.e=g.c.length),u=c=(f=t(r,n,i,s?(a=U,e):(a=e,U))).length;0==f[--c];f.pop());if(!f[0])return a.charAt(0);if(y<0?--u:(h.c=f,h.e=u,h.s=o,f=(h=b(h,g,_,E,i)).c,p=h.r,u=h.e),y=f[l=u+_+1],c=i/2,p=p||l<0||null!=f[l+1],p=E<4?(null!=y||p)&&(0==E||E==(h.s<0?3:2)):y>c||y==c&&(4==E||p||6==E&&1&f[l-1]||E==(h.s<0?8:7)),l<1||!f[0])r=p?m(a.charAt(1),-_,a.charAt(0)):a.charAt(0);else{if(f.length=l,p)for(--i;++f[--l]>i;)f[l]=0,l||(++u,f=[1].concat(f));for(c=f.length;!f[--c];);for(y=0,r="";y<=c;r+=a.charAt(f[y++]));r=m(r,u,a.charAt(0))}return r}}(),b=function(){function e(e,t,r){var n,i,o,s,a=0,l=e.length,u=t%1e7,c=t/1e7|0;for(e=e.slice();l--;)n=c*(o=e[l]%1e7)+(s=e[l]/1e7|0)*u,a=((i=u*o+n%1e7*1e7+a)/r|0)+(n/1e7|0)+c*s,e[l]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=+(e[r]<t[r]),e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,a,l){var u,d,p,h,f,g,m,y,_,E,v,b,S,T,A,O,w,C=n.s==i.s?1:-1,R=n.c,I=i.c;if(!R||!R[0]||!I||!I[0])return new L(!n.s||!i.s||(R?I&&R[0]==I[0]:!I)?NaN:R&&0==R[0]||!I?0*C:C/0);for(_=(y=new L(C)).c=[],C=o+(d=n.e-i.e)+1,l||(l=1e14,d=c(n.e/14)-c(i.e/14),C=C/14|0),p=0;I[p]==(R[p]||0);p++);if(I[p]>(R[p]||0)&&d--,C<0)_.push(1),h=!0;else{for(T=R.length,O=I.length,p=0,C+=2,(f=s(l/(I[0]+1)))>1&&(I=e(I,f,l),R=e(R,f,l),O=I.length,T=R.length),S=O,v=(E=R.slice(0,O)).length;v<O;E[v++]=0);w=[0].concat(w=I.slice()),A=I[0],I[1]>=l/2&&A++;do{if(f=0,(u=t(I,E,O,v))<0){if(b=E[0],O!=v&&(b=b*l+(E[1]||0)),(f=s(b/A))>1)for(f>=l&&(f=l-1),m=(g=e(I,f,l)).length,v=E.length;1==t(g,E,m,v);)f--,r(g,O<m?w:I,m,l),m=g.length,u=1;else 0==f&&(u=f=1),m=(g=I.slice()).length;if(m<v&&(g=[0].concat(g)),r(E,g,v,l),v=E.length,-1==u)for(;1>t(I,E,O,v);)f++,r(E,O<v?w:I,v,l),v=E.length}else 0===u&&(f++,E=[0]);_[p++]=f,E[0]?E[v++]=R[S]||0:(E=[R[S]],v=1)}while((S++<T||null!=E[0])&&C--)h=null!=E[0],_[0]||_.splice(0,1)}if(1e14==l){for(p=1,C=_[0];C>=10;C/=10,p++);B(y,o+(y.e=p+14*d-1)+1,a,h)}else y.e=d,y.r=+h;return y}}(),n=/^(-?)0([xbo])(?=\w[\w.]*$)/i,y=/^([^.]+)\.$/,_=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,v=/^\s*\+(?=[\w.])|^\s+|\s+$/g,T=function(e,t,r,i){var o,s=r?t:t.replace(v,"");if(E.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(n,function(e,t,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,i&&i!=o?e:t}),i&&(o=i,s=s.replace(y,"$1").replace(_,"0.$1")),t!=s))return new L(s,o);if(L.DEBUG)throw Error(a+"Not a"+(i?" base "+i:"")+" number: "+t);e.s=null}e.c=e.e=null},A.absoluteValue=A.abs=function(){var e=new L(this);return e.s<0&&(e.s=1),e},A.comparedTo=function(e,t){return p(this,new L(e,t))},A.decimalPlaces=A.dp=function(e,t){var r,n,i;if(null!=e)return h(e,0,1e9),null==t?t=C:h(t,0,8),B(new L(this),e+this.e+1,t);if(!(r=this.c))return null;if(n=((i=r.length-1)-c(this.e/14))*14,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},A.dividedBy=A.div=function(e,t){return b(this,new L(e,t),w,C)},A.dividedToIntegerBy=A.idiv=function(e,t){return b(this,new L(e,t),0,1)},A.exponentiatedBy=A.pow=function(e,t){var r,n,i,l,u,c,d,p,h,g=this;if((e=new L(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+H(e));if(null!=t&&(t=new L(t)),c=e.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!e.c||!e.c[0])return h=new L(Math.pow(+H(g),c?e.s*(2-f(e)):+H(e))),t?h.mod(t):h;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new L(NaN);(n=!d&&g.isInteger()&&t.isInteger())&&(g=g.mod(t))}else{if(e.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||c&&g.c[1]>=24e7:g.c[0]<8e13||c&&g.c[0]<=9999975e7)))return l=g.s<0&&f(e)?-0:0,g.e>-1&&(l=1/l),new L(d?1/l:l);D&&(l=o(D/14+2))}for(c?(r=new L(.5),d&&(e.s=1),p=f(e)):p=(i=Math.abs(+H(e)))%2,h=new L(O);;){if(p){if(!(h=h.times(g)).c)break;l?h.c.length>l&&(h.c.length=l):n&&(h=h.mod(t))}if(i){if(0===(i=s(i/2)))break;p=i%2}else if(B(e=e.times(r),e.e+1,1),e.e>14)p=f(e);else{if(0==(i=+H(e)))break;p=i%2}g=g.times(g),l?g.c&&g.c.length>l&&(g.c.length=l):n&&(g=g.mod(t))}return n?h:(d&&(h=O.div(h)),t?h.mod(t):l?B(h,D,C,u):h)},A.integerValue=function(e){var t=new L(this);return null==e?e=C:h(e,0,8),B(t,t.e+1,e)},A.isEqualTo=A.eq=function(e,t){return 0===p(this,new L(e,t))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(e,t){return p(this,new L(e,t))>0},A.isGreaterThanOrEqualTo=A.gte=function(e,t){return 1===(t=p(this,new L(e,t)))||0===t},A.isInteger=function(){return!!this.c&&c(this.e/14)>this.c.length-2},A.isLessThan=A.lt=function(e,t){return 0>p(this,new L(e,t))},A.isLessThanOrEqualTo=A.lte=function(e,t){return -1===(t=p(this,new L(e,t)))||0===t},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(e,t){var r,n,i,o,s=this.s;if(t=(e=new L(e,t)).s,!s||!t)return new L(NaN);if(s!=t)return e.s=-t,this.plus(e);var a=this.e/14,l=e.e/14,u=this.c,d=e.c;if(!a||!l){if(!u||!d)return u?(e.s=-t,e):new L(d?this:NaN);if(!u[0]||!d[0])return d[0]?(e.s=-t,e):new L(u[0]?this:3==C?-0:0)}if(a=c(a),l=c(l),u=u.slice(),s=a-l){for((o=s<0)?(s=-s,i=u):(l=a,i=d),i.reverse(),t=s;t--;i.push(0));i.reverse()}else for(n=(o=(s=u.length)<(t=d.length))?s:t,s=t=0;t<n;t++)if(u[t]!=d[t]){o=u[t]<d[t];break}if(o&&(i=u,u=d,d=i,e.s=-e.s),(t=(n=d.length)-(r=u.length))>0)for(;t--;u[r++]=0);for(t=1e14-1;n>s;){if(u[--n]<d[n]){for(r=n;r&&!u[--r];u[r]=t);--u[r],u[n]+=1e14}u[n]-=d[n]}for(;0==u[0];u.splice(0,1),--l);return u[0]?q(e,u,l):(e.s=3==C?-1:1,e.c=[e.e=0],e)},A.modulo=A.mod=function(e,t){var r,n;return(e=new L(e,t),this.c&&e.s&&(!e.c||e.c[0]))?e.c&&(!this.c||this.c[0])?(9==k?(n=e.s,e.s=1,r=b(this,e,0,3),e.s=n,r.s*=n):r=b(this,e,0,k),(e=this.minus(r.times(e))).c[0]||1!=k||(e.s=this.s),e):new L(this):new L(NaN)},A.multipliedBy=A.times=function(e,t){var r,n,i,o,s,a,l,u,d,p,h,f,g,m=this.c,y=(e=new L(e,t)).c;if(!m||!y||!m[0]||!y[0])return this.s&&e.s&&(!m||m[0]||y)&&(!y||y[0]||m)?(e.s*=this.s,m&&y?(e.c=[0],e.e=0):e.c=e.e=null):e.c=e.e=e.s=null,e;for(n=c(this.e/14)+c(e.e/14),e.s*=this.s,(l=m.length)<(p=y.length)&&(g=m,m=y,y=g,i=l,l=p,p=i),i=l+p,g=[];i--;g.push(0));for(i=p;--i>=0;){for(r=0,h=y[i]%1e7,f=y[i]/1e7|0,o=i+(s=l);o>i;)a=f*(u=m[--s]%1e7)+(d=m[s]/1e7|0)*h,r=((u=h*u+a%1e7*1e7+g[o]+r)/1e14|0)+(a/1e7|0)+f*d,g[o--]=u%1e14;g[o]=r}return r?++n:g.splice(0,1),q(e,g,n)},A.negated=function(){var e=new L(this);return e.s=-e.s||null,e},A.plus=function(e,t){var r,n=this.s;if(t=(e=new L(e,t)).s,!n||!t)return new L(NaN);if(n!=t)return e.s=-t,this.minus(e);var i=this.e/14,o=e.e/14,s=this.c,a=e.c;if(!i||!o){if(!s||!a)return new L(n/0);if(!s[0]||!a[0])return a[0]?e:new L(s[0]?this:0*n)}if(i=c(i),o=c(o),s=s.slice(),n=i-o){for(n>0?(o=i,r=a):(n=-n,r=s),r.reverse();n--;r.push(0));r.reverse()}for((n=s.length)-(t=a.length)<0&&(r=a,a=s,s=r,t=n),n=0;t;)n=(s[--t]=s[t]+a[t]+n)/1e14|0,s[t]=1e14===s[t]?0:s[t]%1e14;return n&&(s=[n].concat(s),++o),q(e,s,o)},A.precision=A.sd=function(e,t){var r,n,i;if(null!=e&&!!e!==e)return h(e,1,1e9),null==t?t=C:h(t,0,8),B(new L(this),e,t);if(!(r=this.c))return null;if(n=14*(i=r.length-1)+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&this.e+1>n&&(n=this.e+1),n},A.shiftedBy=function(e){return h(e,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+e)},A.squareRoot=A.sqrt=function(){var e,t,r,n,i,o=this.c,s=this.s,a=this.e,l=w+4,u=new L("0.5");if(1!==s||!o||!o[0])return new L(!s||s<0&&(!o||o[0])?NaN:o?this:1/0);if(0==(s=Math.sqrt(+H(this)))||s==1/0?(((t=d(o)).length+a)%2==0&&(t+="0"),s=Math.sqrt(+t),a=c((a+1)/2)-(a<0||a%2),r=new L(t=s==1/0?"5e"+a:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+a)):r=new L(s+""),r.c[0]){for((s=(a=r.e)+l)<3&&(s=0);;)if(i=r,r=u.times(i.plus(b(this,i,l,1))),d(i.c).slice(0,s)===(t=d(r.c)).slice(0,s)){if(r.e<a&&--s,"9999"!=(t=t.slice(s-3,s+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(B(r,r.e+w+2,1),e=!r.times(r).eq(this));break}if(!n&&(B(i,i.e+w+2,0),i.times(i).eq(this))){r=i;break}l+=4,s+=4,n=1}}return B(r,r.e+w+1,C,e)},A.toExponential=function(e,t){return null!=e&&(h(e,0,1e9),e++),G(this,e,t,1)},A.toFixed=function(e,t){return null!=e&&(h(e,0,1e9),e=e+this.e+1),G(this,e,t)},A.toFormat=function(e,t,r){var n;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=M;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(n=this.toFixed(e,t),this.c){var i,o=n.split("."),s=+r.groupSize,l=+r.secondaryGroupSize,u=r.groupSeparator||"",c=o[0],d=o[1],p=this.s<0,h=p?c.slice(1):c,f=h.length;if(l&&(i=s,s=l,l=i,f-=i),s>0&&f>0){for(i=f%s||s,c=h.substr(0,i);i<f;i+=s)c+=u+h.substr(i,s);l>0&&(c+=u+h.slice(i)),p&&(c="-"+c)}n=d?c+(r.decimalSeparator||"")+((l=+r.fractionGroupSize)?d.replace(RegExp("\\d{"+l+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):c}return(r.prefix||"")+n+(r.suffix||"")},A.toFraction=function(e){var t,r,n,i,o,s,l,c,p,h,f,g,m=this.c;if(null!=e&&(!(l=new L(e)).isInteger()&&(l.c||1!==l.s)||l.lt(O)))throw Error(a+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+H(l));if(!m)return new L(this);for(t=new L(O),p=r=new L(O),n=c=new L(O),g=d(m),o=t.e=g.length-this.e-1,t.c[0]=u[(s=o%14)<0?14+s:s],e=!e||l.comparedTo(t)>0?o>0?t:p:l,s=N,N=1/0,l=new L(g),c.c[0]=0;h=b(l,t,0,1),1!=(i=r.plus(h.times(n))).comparedTo(e);)r=n,n=i,p=c.plus(h.times(i=p)),c=i,t=l.minus(h.times(i=t)),l=i;return i=b(e.minus(r),n,0,1),c=c.plus(i.times(p)),r=r.plus(i.times(n)),c.s=p.s=this.s,o*=2,f=1>b(p,n,o,C).minus(this).abs().comparedTo(b(c,r,o,C).minus(this).abs())?[p,n]:[c,r],N=s,f},A.toNumber=function(){return+H(this)},A.toPrecision=function(e,t){return null!=e&&h(e,1,1e9),G(this,e,t,2)},A.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=R||i>=I?g(d(r.c),i):m(d(r.c),i,"0"):10===e&&j?t=m(d((r=B(new L(r),w+i+1,C)).c),r.e,"0"):(h(e,2,U.length,"Base"),t=S(m(d(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},A.valueOf=A.toJSON=function(){return H(this)},A._isBigNumber=!0,null!=t&&L.set(t),L}()).default=n.BigNumber=n,"function"==typeof define&&define.amd)e.r,void 0!==n&&e.v(n);else t.exports?t.exports=n:(r||(r="undefined"!=typeof self&&self?self:window),r.BigNumber=n)}(e.e)},64349,(e,t,r)=>{var n=e.r(45905),i=t.exports;!function(){"use strict";var e,t,r,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof i.stringify&&(i.stringify=function(i,o,s){var l;if(e="",t="","number"==typeof s)for(l=0;l<s;l+=1)t+=" ";else"string"==typeof s&&(t=s);if(r=o,o&&"function"!=typeof o&&("object"!=typeof o||"number"!=typeof o.length))throw Error("JSON.stringify");return function i(o,s){var l,u,c,d,p,h=e,f=s[o],g=null!=f&&(f instanceof n||n.isBigNumber(f));switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(o)),"function"==typeof r&&(f=r.call(s,o,f)),typeof f){case"string":if(g)return f;return a(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":case"bigint":return String(f);case"object":if(!f)return"null";if(e+=t,p=[],"[object Array]"===Object.prototype.toString.apply(f)){for(l=0,d=f.length;l<d;l+=1)p[l]=i(l,f)||"null";return c=0===p.length?"[]":e?"[\n"+e+p.join(",\n"+e)+"\n"+h+"]":"["+p.join(",")+"]",e=h,c}if(r&&"object"==typeof r)for(l=0,d=r.length;l<d;l+=1)"string"==typeof r[l]&&(c=i(u=r[l],f))&&p.push(a(u)+(e?": ":":")+c);else Object.keys(f).forEach(function(t){var r=i(t,f);r&&p.push(a(t)+(e?": ":":")+r)});return c=0===p.length?"{}":e?"{\n"+e+p.join(",\n"+e)+"\n"+h+"}":"{"+p.join(",")+"}",e=h,c}}("",{"":i})})}()},67104,(e,t,r)=>{var n=null;let i=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,o=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;t.exports=function(t){"use strict";var r={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=t){if(!0===t.strict&&(r.strict=!0),!0===t.storeAsString&&(r.storeAsString=!0),r.alwaysParseAsBig=!0===t.alwaysParseAsBig&&t.alwaysParseAsBig,r.useNativeBigInt=!0===t.useNativeBigInt&&t.useNativeBigInt,void 0!==t.constructorAction)if("error"===t.constructorAction||"ignore"===t.constructorAction||"preserve"===t.constructorAction)r.constructorAction=t.constructorAction;else throw Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(void 0!==t.protoAction)if("error"===t.protoAction||"ignore"===t.protoAction||"preserve"===t.protoAction)r.protoAction=t.protoAction;else throw Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var s,a,l,u,c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},d=function(e){throw{name:"SyntaxError",message:e,at:s,text:l}},p=function(e){return e&&e!==a&&d("Expected '"+e+"' instead of '"+a+"'"),a=l.charAt(s),s+=1,a},h=function(){var t,i="";for("-"===a&&(i="-",p("-"));a>="0"&&a<="9";)i+=a,p();if("."===a)for(i+=".";p()&&a>="0"&&a<="9";)i+=a;if("e"===a||"E"===a)for(i+=a,p(),("-"===a||"+"===a)&&(i+=a,p());a>="0"&&a<="9";)i+=a,p();if(isFinite(t=+i))return(null==n&&(n=e.r(45905)),i.length>15)?r.storeAsString?i:r.useNativeBigInt?BigInt(i):new n(i):r.alwaysParseAsBig?r.useNativeBigInt?BigInt(t):new n(t):t;d("Bad number")},f=function(){var e,t,r,n="";if('"'===a)for(var i=s;p();){if('"'===a)return s-1>i&&(n+=l.substring(i,s-1)),p(),n;if("\\"===a){if(s-1>i&&(n+=l.substring(i,s-1)),p(),"u"===a){for(t=0,r=0;t<4&&isFinite(e=parseInt(p(),16));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else if("string"==typeof c[a])n+=c[a];else break;i=s}}d("Bad string")},g=function(){for(;a&&a<=" ";)p()},m=function(){switch(a){case"t":return p("t"),p("r"),p("u"),p("e"),!0;case"f":return p("f"),p("a"),p("l"),p("s"),p("e"),!1;case"n":return p("n"),p("u"),p("l"),p("l"),null}d("Unexpected '"+a+"'")},y=function(){var e=[];if("["===a){if(p("["),g(),"]"===a)return p("]"),e;for(;a;){if(e.push(u()),g(),"]"===a)return p("]"),e;p(","),g()}}d("Bad array")},_=function(){var e,t=Object.create(null);if("{"===a){if(p("{"),g(),"}"===a)return p("}"),t;for(;a;){if(e=f(),g(),p(":"),!0===r.strict&&Object.hasOwnProperty.call(t,e)&&d('Duplicate key "'+e+'"'),!0===i.test(e)?"error"===r.protoAction?d("Object contains forbidden prototype property"):"ignore"===r.protoAction?u():t[e]=u():!0===o.test(e)?"error"===r.constructorAction?d("Object contains forbidden constructor property"):"ignore"===r.constructorAction?u():t[e]=u():t[e]=u(),g(),"}"===a)return p("}"),t;p(","),g()}}d("Bad object")};return u=function(){switch(g(),a){case"{":return _();case"[":return y();case'"':return f();case"-":return h();default:return a>="0"&&a<="9"?h():m()}},function(e,t){var r;return l=e+"",s=0,a=" ",r=u(),g(),a&&d("Syntax error"),"function"==typeof t?function e(r,n){var i,o=r[n];return o&&"object"==typeof o&&Object.keys(o).forEach(function(t){void 0!==(i=e(o,t))?o[t]=i:delete o[t]}),t.call(r,n,o)}({"":r},""):r}}},1158,(e,t,r)=>{var n=e.r(64349).stringify,i=e.r(67104);t.exports=function(e){return{parse:i(e),stringify:n}},t.exports.parse=i(),t.exports.stringify=n},27699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},5365,(e,t,r)=>{t.exports=e.x("process",()=>require("process"))},6737,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Colours=void 0;class n{static isEnabled(e){return e&&e.isTTY&&("function"!=typeof e.getColorDepth||e.getColorDepth()>2)}static refresh(){n.enabled=n.isEnabled(null==process?void 0:process.stderr),this.enabled?(n.reset="\x1b[0m",n.bright="\x1b[1m",n.dim="\x1b[2m",n.red="\x1b[31m",n.green="\x1b[32m",n.yellow="\x1b[33m",n.blue="\x1b[34m",n.magenta="\x1b[35m",n.cyan="\x1b[36m",n.white="\x1b[37m",n.grey="\x1b[90m"):(n.reset="",n.bright="",n.dim="",n.red="",n.green="",n.yellow="",n.blue="",n.magenta="",n.cyan="",n.white="",n.grey="")}}r.Colours=n,n.enabled=!1,n.reset="",n.bright="",n.dim="",n.red="",n.green="",n.yellow="",n.blue="",n.magenta="",n.cyan="",n.white="",n.grey="",n.refresh()},90812,(e,t,r)=>{"use strict";let n;var i,o,s,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),l=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),n=0;n<r.length;n++)"default"!==r[n]&&a(t,e,r[n]);return l(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.env=r.DebugLogBackendBase=r.placeholder=r.AdhocDebugLogger=r.LogSeverity=void 0,r.getNodeBackend=y,r.getDebugBackend=function(e){return new _(e)},r.getStructuredBackend=function(e){return new E(e)},r.setBackend=function(e){n=e,v.clear()},r.log=b;let c=e.r(27699),d=u(e.r(5365)),p=u(e.r(24361)),h=e.r(6737);(o=s||(r.LogSeverity=s={})).DEFAULT="DEFAULT",o.DEBUG="DEBUG",o.INFO="INFO",o.WARNING="WARNING",o.ERROR="ERROR";class f extends c.EventEmitter{constructor(e,t){super(),this.namespace=e,this.upstream=t,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(e,t)=>this.on(e,t)}),this.func.debug=(...e)=>this.invokeSeverity(s.DEBUG,...e),this.func.info=(...e)=>this.invokeSeverity(s.INFO,...e),this.func.warn=(...e)=>this.invokeSeverity(s.WARNING,...e),this.func.error=(...e)=>this.invokeSeverity(s.ERROR,...e),this.func.sublog=e=>b(e,this.func)}invoke(e,...t){if(this.upstream)try{this.upstream(e,...t)}catch(e){}try{this.emit("log",e,t)}catch(e){}}invokeSeverity(e,...t){this.invoke({severity:e},...t)}}r.AdhocDebugLogger=f,r.placeholder=new f("",()=>{}).func;class g{constructor(){var e;this.cached=new Map,this.filters=[],this.filtersSet=!1;let t=null!=(e=d.env[r.env.nodeEnables])?e:"*";"all"===t&&(t="*"),this.filters=t.split(",")}log(e,t,...r){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let n=this.cached.get(e);n||(n=this.makeLogger(e),this.cached.set(e,n)),n(t,...r)}catch(e){console.error(e)}}}r.DebugLogBackendBase=g;class m extends g{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(e){return this.enabledRegexp.test(e)}makeLogger(e){return this.enabledRegexp.test(e)?(t,...r)=>{var n;let i,o=`${h.Colours.green}${e}${h.Colours.reset}`,a=`${h.Colours.yellow}${d.pid}${h.Colours.reset}`;switch(t.severity){case s.ERROR:i=`${h.Colours.red}${t.severity}${h.Colours.reset}`;break;case s.INFO:i=`${h.Colours.magenta}${t.severity}${h.Colours.reset}`;break;case s.WARNING:i=`${h.Colours.yellow}${t.severity}${h.Colours.reset}`;break;default:i=null!=(n=t.severity)?n:s.DEFAULT}let l=p.formatWithOptions({colors:h.Colours.enabled},...r),u=Object.assign({},t);delete u.severity;let c=Object.getOwnPropertyNames(u).length?JSON.stringify(u):"",f=c?`${h.Colours.grey}${c}${h.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",a,o,i,l,c?` ${f}`:"")}:()=>{}}setFilters(){let e=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=RegExp(`^${e}$`,"i")}}function y(){return new m}class _ extends g{constructor(e){super(),this.debugPkg=e}makeLogger(e){let t=this.debugPkg(e);return(e,...r)=>{t(r[0],...r.slice(1))}}setFilters(){var e;let t=null!=(e=d.env.NODE_DEBUG)?e:"";d.env.NODE_DEBUG=`${t}${t?",":""}${this.filters.join(",")}`}}class E extends g{constructor(e){super(),this.upstream=null!=e?e:void 0}makeLogger(e){var t;let r=null==(t=this.upstream)?void 0:t.makeLogger(e);return(e,...t)=>{var n;let i=JSON.stringify(Object.assign({severity:null!=(n=e.severity)?n:s.INFO,message:p.format(...t)},e));r?r(e,i):console.log("%s",i)}}setFilters(){var e;null==(e=this.upstream)||e.setFilters()}}r.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};let v=new Map;function b(e,t){let i;if(!n&&!d.env[r.env.nodeEnables]||!e)return r.placeholder;t&&(e=`${t.instance.namespace}:${e}`);let o=v.get(e);if(o)return o.func;if(null===n)return r.placeholder;void 0===n&&(n=y());let s=new f(e,(t,...r)=>{if(i!==n){if(null===n)return;void 0===n&&(n=y()),i=n}null==n||n.log(e,t,...r)});return v.set(e,s),s.func}},47637,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e.r(90812),r)},82e3,(e,t,r)=>{"use strict";let n;var i,o=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=e.e&&e.e.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),n=0;n<r.length;n++)"default"!==r[n]&&o(t,e,r[n]);return s(t,e),t}),l=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.gcpResidencyCache=r.METADATA_SERVER_DETECTION=r.HEADERS=r.HEADER_VALUE=r.HEADER_NAME=r.SECONDARY_HOST_ADDRESS=r.HOST_ADDRESS=r.BASE_PATH=void 0,r.instance=function(e){return g("instance",e)},r.project=function(e){return g("project",e)},r.universe=function(e){return g("universe",e)},r.bulk=y,r.isAvailable=_,r.resetIsAvailableCache=function(){n=void 0},r.getGCPResidency=E,r.setGCPResidency=v,r.requestTimeout=b;let u=e.r(57612),c=e.r(1158),d=e.r(29077),p=a(e.r(47637));r.BASE_PATH="/computeMetadata/v1",r.HOST_ADDRESS="http://169.254.169.254",r.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",r.HEADER_NAME="Metadata-Flavor",r.HEADER_VALUE="Google",r.HEADERS=Object.freeze({[r.HEADER_NAME]:r.HEADER_VALUE});let h=p.log("gcp-metadata");function f(e){return e||(e=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||r.HOST_ADDRESS),/^https?:\/\//.test(e)||(e=`http://${e}`),new URL(r.BASE_PATH,e).href}async function g(e,t={},n=3,i=!1){let o=new Headers(r.HEADERS),s="",a={};("object"==typeof e?(new Headers(e.headers).forEach((e,t)=>o.set(t,e)),s=e.metadataKey,a=e.params||a,n=e.noResponseRetries||n,i=e.fastFail||i):s=e,"string"==typeof t)?s+=`/${t}`:(Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw Error(`'${e}' is not a valid configuration option.`)}}),t.property&&(s+=`/${t.property}`),new Headers(t.headers).forEach((e,t)=>o.set(t,e)),a=t.params||a);let l=i?m:u.request,d={url:`${f()}/${s}`,headers:o,retryConfig:{noResponseRetries:n},params:a,responseType:"text",timeout:b()};h.info("instance request %j",d);let p=await l(d);h.info("instance metadata is %s",p.data);let y=p.headers.get(r.HEADER_NAME);if(y!==r.HEADER_VALUE)throw RangeError(`Invalid response from metadata service: incorrect ${r.HEADER_NAME} header. Expected '${r.HEADER_VALUE}', got ${y?`'${y}'`:"no header"}`);if("string"==typeof p.data)try{return c.parse(p.data)}catch{}return p.data}async function m(e){let t={...e,url:e.url?.toString().replace(f(),f(r.SECONDARY_HOST_ADDRESS))};return Promise.any([(0,u.request)(e),(0,u.request)(t)])}async function y(e){let t={};return await Promise.all(e.map(e=>(async()=>{let r=await g(e);t[e.metadataKey]=r})())),t}async function _(){if(process.env.METADATA_SERVER_DETECTION){let e=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(e in r.METADATA_SERVER_DETECTION))throw RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${e}\`, but it should be \`${Object.keys(r.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(e){case"assume-present":return!0;case"none":return!1;case"bios-only":return E()}}try{return void 0===n&&(n=g("instance",void 0,process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0,!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await n,!0}catch(e){if(process.env.DEBUG_AUTH&&console.info(e),"request-timeout"===e.type||e.response&&404===e.response.status)return!1;if(!(e.response&&404===e.response.status)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code.toString()))){let t="UNKNOWN";e.code&&(t=e.code.toString()),process.emitWarning(`received unexpected error = ${e.message} code = ${t}`,"MetadataLookupWarning")}return!1}}function E(){return null===r.gcpResidencyCache&&v(),r.gcpResidencyCache}function v(e=null){r.gcpResidencyCache=null!==e?e:(0,d.detectGCPResidency)()}function b(){return 3e3*!E()}r.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"}),r.gcpResidencyCache=null,l(e.r(29077),r)},6920,(e,t,r)=>{"use strict";r.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return(r+n)*3/4-n},r.toByteArray=function(e){var t,r,n=u(e),s=n[0],a=n[1],l=new o((s+a)*3/4-a),c=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},r.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(function(e,t,r){for(var i,o=[],s=t;s<r;s+=3)i=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[i>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}(e,s,s+16383>a?a:s+16383));return 1===i?o.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&o.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}i[45]=62,i[95]=63},46902,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromArrayBufferToHex=function(e){return Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join("")}},69216,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BrowserCrypto=void 0;let n=e.r(6920),i=e.r(46902);class o{constructor(){throw Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(e){let t=new TextEncoder().encode(e),r=await window.crypto.subtle.digest("SHA-256",t);return n.fromByteArray(new Uint8Array(r))}randomBytesBase64(e){let t=new Uint8Array(e);return window.crypto.getRandomValues(t),n.fromByteArray(t)}static padBase64(e){for(;e.length%4!=0;)e+="=";return e}async verify(e,t,r){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s=new TextEncoder().encode(t),a=n.toByteArray(o.padBase64(r)),l=await window.crypto.subtle.importKey("jwk",e,i,!0,["verify"]);return await window.crypto.subtle.verify(i,l,a,s)}async sign(e,t){let r={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(t),o=await window.crypto.subtle.importKey("jwk",e,r,!0,["sign"]),s=await window.crypto.subtle.sign(r,o,i);return n.fromByteArray(new Uint8Array(s))}decodeBase64StringUtf8(e){let t=n.toByteArray(o.padBase64(e));return new TextDecoder().decode(t)}encodeBase64StringUtf8(e){let t=new TextEncoder().encode(e);return n.fromByteArray(t)}async sha256DigestHex(e){let t=new TextEncoder().encode(e),r=await window.crypto.subtle.digest("SHA-256",t);return(0,i.fromArrayBufferToHex)(r)}async signWithHmacSha256(e,t){let r="string"==typeof e?e:String.fromCharCode(...new Uint16Array(e)),n=new TextEncoder,i=await window.crypto.subtle.importKey("raw",n.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",i,n.encode(t))}}r.BrowserCrypto=o},21962,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NodeCrypto=void 0;let n=e.r(54799);r.NodeCrypto=class{async sha256DigestBase64(e){return n.createHash("sha256").update(e).digest("base64")}randomBytesBase64(e){return n.randomBytes(e).toString("base64")}async verify(e,t,r){let i=n.createVerify("RSA-SHA256");return i.update(t),i.end(),i.verify(e,r,"base64")}async sign(e,t){let r=n.createSign("RSA-SHA256");return r.update(t),r.end(),r.sign(e,"base64")}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}async sha256DigestHex(e){return n.createHash("sha256").update(e).digest("hex")}async signWithHmacSha256(e,t){var r,i;let o="string"==typeof e?e:(r=e,Buffer.from(r));return(i=n.createHmac("sha256",o).update(t).digest()).buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}}},59501,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.createCrypto=function(){return function(){;}(),new o.NodeCrypto},r.hasBrowserCrypto=s,e.r(69216);let o=e.r(21962);function s(){return!1}i(e.r(46902),r)},45706,(e,t,r)=>{t.exports=e.x("querystring",()=>require("querystring"))},23469,(e,t,r)=>{var n=e.r(874),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,r),r.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},65880,(e,t,r)=>{"use strict";function n(e){return(e/8|0)+ +(e%8!=0)}var i={ES256:n(256),ES384:n(384),ES512:n(521)};t.exports=function(e){var t=i[e];if(t)return t;throw Error('Unknown algorithm "'+e+'"')}},32955,(e,t,r)=>{"use strict";var n=e.r(23469).Buffer,i=e.r(65880);function o(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function s(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=128&&--n,n}t.exports={derToJose:function(e,t){e=o(e);var r=i(t),s=r+1,a=e.length,l=0;if(48!==e[l++])throw Error('Could not find expected "seq"');var u=e[l++];if(129===u&&(u=e[l++]),a-l<u)throw Error('"seq" specified length of "'+u+'", only "'+(a-l)+'" remaining');if(2!==e[l++])throw Error('Could not find expected "int" for "r"');var c=e[l++];if(a-l-2<c)throw Error('"r" specified length of "'+c+'", only "'+(a-l-2)+'" available');if(s<c)throw Error('"r" specified length of "'+c+'", max of "'+s+'" is acceptable');var d=l;if(l+=c,2!==e[l++])throw Error('Could not find expected "int" for "s"');var p=e[l++];if(a-l!==p)throw Error('"s" specified length of "'+p+'", expected "'+(a-l)+'"');if(s<p)throw Error('"s" specified length of "'+p+'", max of "'+s+'" is acceptable');var h=l;if((l+=p)!==a)throw Error('Expected to consume entire buffer, but "'+(a-l)+'" bytes remain');var f=r-c,g=r-p,m=n.allocUnsafe(f+c+g+p);for(l=0;l<f;++l)m[l]=0;e.copy(m,l,d+Math.max(-f,0),d+c),l=r;for(var y=l;l<y+g;++l)m[l]=0;return e.copy(m,l,h+Math.max(-g,0),h+p),m=(m=m.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=o(e);var r=i(t),a=e.length;if(a!==2*r)throw TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+a+'"');var l=s(e,0,r),u=s(e,r,e.length),c=r-l,d=r-u,p=2+c+1+1+d,h=p<128,f=n.allocUnsafe((h?2:3)+p),g=0;return f[g++]=48,h?f[g++]=p:(f[g++]=129,f[g++]=255&p),f[g++]=2,f[g++]=c,l<0?(f[g++]=0,g+=e.copy(f,g,0,r)):g+=e.copy(f,g,l,r),f[g++]=2,f[g++]=d,u<0?(f[g++]=0,e.copy(f,g,r)):e.copy(f,g,r+u),f}}},15733,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0,r.snakeToCamel=a,r.originalOrCamelOptions=function(e){return{get:function(t){let r=e||{};return r[t]??r[a(t)]}}},r.removeUndefinedValuesInObject=function(e){return Object.entries(e).forEach(([t,r])=>{(void 0===r||"undefined"===r)&&delete e[t]}),e},r.isValidFile=u,r.getWellKnownCertificateConfigFileLocation=function(){let e=process.env.CLOUDSDK_CONFIG||(i.platform().startsWith("win")?o.join(process.env.APPDATA||"",s):o.join(process.env.HOME||"",".config",s));return o.join(e,"certificate_config.json")};let n=e.r(22734),i=e.r(46786),o=e.r(14747),s="gcloud";function a(e){return e.replace(/([_][^_])/g,e=>e.slice(1).toUpperCase())}class l{capacity;#u=new Map;maxAge;constructor(e){this.capacity=e.capacity,this.maxAge=e.maxAge}#c(e,t){this.#u.delete(e),this.#u.set(e,{value:t,lastAccessed:Date.now()})}set(e,t){this.#c(e,t),this.#d()}get(e){let t=this.#u.get(e);if(t)return this.#c(e,t.value),this.#d(),t.value}#d(){let e=this.maxAge?Date.now()-this.maxAge:0,t=this.#u.entries().next();for(;!t.done&&(this.#u.size>this.capacity||t.value[1].lastAccessed<e);)this.#u.delete(t.value[0]),t=this.#u.entries().next()}}async function u(e){try{return(await n.promises.lstat(e)).isFile()}catch(e){return!1}}r.LRUCache=l},91829,e=>{e.v({name:"google-auth-library",version:"10.5.0",author:"Google Inc.",description:"Google APIs Authentication Client Library for Node.js",engines:{node:">=18"},main:"./build/src/index.js",types:"./build/src/index.d.ts",repository:"googleapis/google-auth-library-nodejs.git",keywords:["google","api","google apis","client","client library"],dependencies:{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11",gaxios:"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0",gtoken:"^8.0.0",jws:"^4.0.0"},devDependencies:{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0",c8:"^10.0.0",codecov:"^3.0.2",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",keypair:"^1.0.4",mocha:"^11.1.0",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.5","null-loader":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","ts-loader":"^8.0.0",typescript:"5.8.2",webpack:"^5.21.2","webpack-cli":"^4.0.0"},files:["build/src","!build/src/**/*.map"],scripts:{test:"c8 mocha build/test",clean:"gts clean",prepare:"npm run compile",lint:"gts check --no-inline-config",compile:"tsc -p .",fix:"gts fix",pretest:"npm run compile -- --sourceMap",docs:"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap",webpack:"webpack","browser-test":"karma start","docs-test":"echo 'disabled until linkinator is fixed'","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install"},license:"Apache-2.0"})},93714,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.USER_AGENT=r.PRODUCT_NAME=r.pkg=void 0;let n=e.r(91829);r.pkg=n;let i="google-api-nodejs-client";r.PRODUCT_NAME=i,r.USER_AGENT=`${i}/${n.version}`},11656,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AuthClient=r.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=r.DEFAULT_UNIVERSE=void 0;let n=e.r(27699),i=e.r(57612),o=e.r(15733),s=e.r(47637),a=e.r(93714);r.DEFAULT_UNIVERSE="googleapis.com",r.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=3e5;class l extends n.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=r.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=r.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor(e={}){super();const t=(0,o.originalOrCamelOptions)(e);this.apiKey=e.apiKey,this.projectId=t.get("project_id")??null,this.quotaProjectId=t.get("quota_project_id"),this.credentials=t.get("credentials")??{},this.universeDomain=t.get("universe_domain")??r.DEFAULT_UNIVERSE,this.transporter=e.transporter??new i.Gaxios(e.transporterOptions),!1!==t.get("useAuthRequestParameters")&&(this.transporter.interceptors.request.add(l.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(l.DEFAULT_RESPONSE_INTERCEPTOR)),e.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=e.forceRefreshOnFailure??!1}fetch(...e){let t,r=e[0],n=e[1],o=new Headers;return("string"==typeof r?t=new URL(r):r instanceof URL?t=r:r&&r.url&&(t=new URL(r.url)),r&&"object"==typeof r&&"headers"in r&&i.Gaxios.mergeHeaders(o,r.headers),n&&i.Gaxios.mergeHeaders(o,new Headers(n.headers)),"object"!=typeof r||r instanceof URL)?this.request({...n,headers:o,url:t}):this.request({...n,...r,headers:o,url:t})}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e.has("x-goog-user-project")&&this.quotaProjectId&&e.set("x-goog-user-project",this.quotaProjectId),e}addUserProjectAndAuthHeaders(e,t){let r=t.get("x-goog-user-project"),n=t.get("authorization");return r&&e.set("x-goog-user-project",r),n&&e.set("authorization",n),e}static log=(0,s.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async e=>{if(!e.headers.has("x-goog-api-client")){let t=process.version.replace(/^v/,"");e.headers.set("x-goog-api-client",`gl-node/${t}`)}let t=e.headers.get("User-Agent");t?t.includes(`${a.PRODUCT_NAME}/`)||e.headers.set("User-Agent",`${t} ${a.USER_AGENT}`):e.headers.set("User-Agent",a.USER_AGENT);try{let t=e[l.RequestMethodNameSymbol],r=`${Math.floor(1e3*Math.random())}`;e[l.RequestLogIdSymbol]=r;let n={url:e.url,headers:e.headers};t?l.log.info("%s [%s] request %j",t,r,n):l.log.info("[%s] request %j",r,n)}catch(e){}return e}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async e=>{try{let t=e.config,r=t[l.RequestMethodNameSymbol],n=t[l.RequestLogIdSymbol];r?l.log.info("%s [%s] response %j",r,n,e.data):l.log.info("[%s] response %j",n,e.data)}catch(e){}return e},rejected:async e=>{try{let t=e.config,r=t[l.RequestMethodNameSymbol],n=t[l.RequestLogIdSymbol];r?l.log.info("%s [%s] error %j",r,n,e.response?.data):l.log.error("[%s] error %j",n,e.response?.data)}catch(e){}throw e}};static setMethodName(e,t){try{e[l.RequestMethodNameSymbol]=t}catch(e){}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}r.AuthClient=l},42602,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LoginTicket=void 0,r.LoginTicket=class{envelope;payload;constructor(e,t){this.envelope=e,this.payload=t}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}},701,(e,t,r)=>{"use strict";var n,i,o,s,a,l;Object.defineProperty(r,"__esModule",{value:!0}),r.OAuth2Client=r.ClientAuthentication=r.CertificateFormat=r.CodeChallengeMethod=void 0;let u=e.r(57612),c=e.r(45706),d=e.r(88947),p=e.r(32955),h=e.r(15733),f=e.r(59501),g=e.r(11656),m=e.r(42602);(s=n||(r.CodeChallengeMethod=n={})).Plain="plain",s.S256="S256",(a=i||(r.CertificateFormat=i={})).PEM="PEM",a.JWK="JWK",(l=o||(r.ClientAuthentication=o={})).ClientSecretPost="ClientSecretPost",l.ClientSecretBasic="ClientSecretBasic",l.None="None";class y extends g.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=i.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor(e={},t,r){super("object"==typeof e?e:{}),"object"!=typeof e&&(e={clientId:e,clientSecret:t,redirectUri:r}),this._clientId=e.clientId||e.client_id,this._clientSecret=e.clientSecret||e.client_secret,this.redirectUri=e.redirectUri||e.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...e.endpoints},this.clientAuthentication=e.clientAuthentication||o.ClientSecretPost,this.issuers=e.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl(e={}){if(e.code_challenge_method&&!e.code_challenge)throw Error("If a code_challenge_method is provided, code_challenge must be included.");return e.response_type=e.response_type||"code",e.client_id=e.client_id||this._clientId,e.redirect_uri=e.redirect_uri||this.redirectUri,Array.isArray(e.scope)&&(e.scope=e.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+c.stringify(e)}generateCodeVerifier(){throw Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let e=(0,f.createCrypto)(),t=e.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),r=(await e.sha256DigestBase64(t)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:t,codeChallenge:r}}getToken(e,t){let r="string"==typeof e?{code:e}:e;if(!t)return this.getTokenAsync(r);this.getTokenAsync(r).then(e=>t(null,e.tokens,e.res),e=>t(e,null,e.response))}async getTokenAsync(e){let t=this.endpoints.oauth2TokenUrl.toString(),r=new Headers,n={client_id:e.client_id||this._clientId,code_verifier:e.codeVerifier,code:e.code,grant_type:"authorization_code",redirect_uri:e.redirect_uri||this.redirectUri};if(this.clientAuthentication===o.ClientSecretBasic){let e=Buffer.from(`${this._clientId}:${this._clientSecret}`);r.set("authorization",`Basic ${e.toString("base64")}`)}this.clientAuthentication===o.ClientSecretPost&&(n.client_secret=this._clientSecret);let i={...y.RETRY_CONFIG,method:"POST",url:t,data:new URLSearchParams((0,h.removeUndefinedValuesInObject)(n)),headers:r};g.AuthClient.setMethodName(i,"getTokenAsync");let s=await this.transporter.request(i),a=s.data;return s.data&&s.data.expires_in&&(a.expiry_date=new Date().getTime()+1e3*s.data.expires_in,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:s}}async refreshToken(e){if(!e)return this.refreshTokenNoCache(e);if(this.refreshTokenPromises.has(e))return this.refreshTokenPromises.get(e);let t=this.refreshTokenNoCache(e).then(t=>(this.refreshTokenPromises.delete(e),t),t=>{throw this.refreshTokenPromises.delete(e),t});return this.refreshTokenPromises.set(e,t),t}async refreshTokenNoCache(e){let t;if(!e)throw Error("No refresh token is set.");let r=this.endpoints.oauth2TokenUrl.toString(),n={refresh_token:e,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"};try{let e={...y.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,h.removeUndefinedValuesInObject)(n))};g.AuthClient.setMethodName(e,"refreshTokenNoCache"),t=await this.transporter.request(e)}catch(e){throw e instanceof u.GaxiosError&&"invalid_grant"===e.message&&e.response?.data&&/ReAuth/i.test(e.response.data.error_description)&&(e.message=JSON.stringify(e.response.data)),e}let i=t.data;return t.data&&t.data.expires_in&&(i.expiry_date=new Date().getTime()+1e3*t.data.expires_in,delete i.expires_in),this.emit("tokens",i),{tokens:i,res:t}}refreshAccessToken(e){if(!e)return this.refreshAccessTokenAsync();this.refreshAccessTokenAsync().then(t=>e(null,t.credentials,t.res),e)}async refreshAccessTokenAsync(){let e=await this.refreshToken(this.credentials.refresh_token),t=e.tokens;return t.refresh_token=this.credentials.refresh_token,this.credentials=t,{credentials:this.credentials,res:e.res}}getAccessToken(e){if(!e)return this.getAccessTokenAsync();this.getAccessTokenAsync().then(t=>e(null,t.token,t.res),e)}async getAccessTokenAsync(){if(!(!this.credentials.access_token||this.isTokenExpiring()))return{token:this.credentials.access_token};{if(!this.credentials.refresh_token)if(this.refreshHandler){let e=await this.processAndValidateRefreshHandler();if(e?.access_token)return this.setCredentials(e),{token:this.credentials.access_token}}else throw Error("No refresh token or refresh handler callback is set.");let e=await this.refreshAccessTokenAsync();if(!e.credentials||e.credentials&&!e.credentials.access_token)throw Error("Could not refresh access token.");return{token:e.credentials.access_token,res:e.res}}}async getRequestHeaders(e){return(await this.getRequestMetadataAsync(e)).headers}async getRequestMetadataAsync(e){let t=this.credentials;if(!t.access_token&&!t.refresh_token&&!this.apiKey&&!this.refreshHandler)throw Error("No access, refresh token, API key or refresh handler callback is set.");if(t.access_token&&!this.isTokenExpiring()){t.token_type=t.token_type||"Bearer";let e=new Headers({authorization:t.token_type+" "+t.access_token});return{headers:this.addSharedMetadataHeaders(e)}}if(this.refreshHandler){let e=await this.processAndValidateRefreshHandler();if(e?.access_token){this.setCredentials(e);let t=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(t)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let r=null,n=null;try{n=(r=await this.refreshToken(t.refresh_token)).tokens}catch(e){throw e.response&&(403===e.response.status||404===e.response.status)&&(e.message=`Could not refresh access token: ${e.message}`),e}let i=this.credentials;i.token_type=i.token_type||"Bearer",n.refresh_token=i.refresh_token,this.credentials=n;let o=new Headers({authorization:i.token_type+" "+n.access_token});return{headers:this.addSharedMetadataHeaders(o),res:r.res}}static getRevokeTokenUrl(e){return new y().getRevokeTokenURL(e).toString()}getRevokeTokenURL(e){let t=new URL(this.endpoints.oauth2RevokeUrl);return t.searchParams.append("token",e),t}revokeToken(e,t){let r={...y.RETRY_CONFIG,url:this.getRevokeTokenURL(e).toString(),method:"POST"};if(g.AuthClient.setMethodName(r,"revokeToken"),!t)return this.transporter.request(r);this.transporter.request(r).then(e=>t(null,e),t)}revokeCredentials(e){if(!e)return this.revokeCredentialsAsync();this.revokeCredentialsAsync().then(t=>e(null,t),e)}async revokeCredentialsAsync(){let e=this.credentials.access_token;if(this.credentials={},e)return this.revokeToken(e);throw Error("No access token to revoke.")}request(e,t){if(!t)return this.requestAsync(e);this.requestAsync(e).then(e=>t(null,e),e=>t(e,e.response))}async requestAsync(e,t=!1){try{let t=await this.getRequestMetadataAsync();return e.headers=u.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,t.headers),this.apiKey&&e.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(e)}catch(n){let r=n.response;if(r){let n=r.status,i=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),o=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,s=r.config.data instanceof d.Readable,a=401===n||403===n;if(!t&&a&&!s&&i)return await this.refreshAccessTokenAsync(),this.requestAsync(e,!0);if(!t&&a&&!s&&o){let t=await this.processAndValidateRefreshHandler();return t?.access_token&&this.setCredentials(t),this.requestAsync(e,!0)}}throw n}}verifyIdToken(e,t){if(t&&"function"!=typeof t)throw Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(!t)return this.verifyIdTokenAsync(e);this.verifyIdTokenAsync(e).then(e=>t(null,e),t)}async verifyIdTokenAsync(e){if(!e.idToken)throw Error("The verifyIdToken method requires an ID Token");let t=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(e.idToken,t.certs,e.audience,this.issuers,e.maxExpiry)}async getTokenInfo(e){let{data:t}=await this.transporter.request({...y.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${e}`},url:this.endpoints.tokenInfoUrl.toString()}),r=Object.assign({expiry_date:new Date().getTime()+1e3*t.expires_in,scopes:t.scope.split(" ")},t);return delete r.expires_in,delete r.scope,r}getFederatedSignonCerts(e){if(!e)return this.getFederatedSignonCertsAsync();this.getFederatedSignonCertsAsync().then(t=>e(null,t.certs,t.res),e)}async getFederatedSignonCertsAsync(){let e,t,r=new Date().getTime(),n=(0,f.hasBrowserCrypto)()?i.JWK:i.PEM;if(this.certificateExpiry&&r<this.certificateExpiry.getTime()&&this.certificateCacheFormat===n)return{certs:this.certificateCache,format:n};switch(n){case i.PEM:t=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case i.JWK:t=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw Error(`Unsupported certificate format ${n}`)}try{let r={...y.RETRY_CONFIG,url:t};g.AuthClient.setMethodName(r,"getFederatedSignonCertsAsync"),e=await this.transporter.request(r)}catch(e){throw e instanceof Error&&(e.message=`Failed to retrieve verification certificates: ${e.message}`),e}let o=e?.headers.get("cache-control"),s=-1;if(o){let e=/max-age=(?<maxAge>[0-9]+)/.exec(o)?.groups?.maxAge;e&&(s=1e3*Number(e))}let a={};switch(n){case i.PEM:a=e.data;break;case i.JWK:for(let t of e.data.keys)a[t.kid]=t;break;default:throw Error(`Unsupported certificate format ${n}`)}let l=new Date;return this.certificateExpiry=-1===s?null:new Date(l.getTime()+s),this.certificateCache=a,this.certificateCacheFormat=n,{certs:a,format:n,res:e}}getIapPublicKeys(e){if(!e)return this.getIapPublicKeysAsync();this.getIapPublicKeysAsync().then(t=>e(null,t.pubkeys,t.res),e)}async getIapPublicKeysAsync(){let e,t=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let r={...y.RETRY_CONFIG,url:t};g.AuthClient.setMethodName(r,"getIapPublicKeysAsync"),e=await this.transporter.request(r)}catch(e){throw e instanceof Error&&(e.message=`Failed to retrieve verification certificates: ${e.message}`),e}return{pubkeys:e.data,res:e}}verifySignedJwtWithCerts(){throw Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(e,t,r,n,i){let o,s,a=(0,f.createCrypto)();i||(i=y.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let l=e.split(".");if(3!==l.length)throw Error("Wrong number of segments in token: "+e);let u=l[0]+"."+l[1],c=l[2];try{o=JSON.parse(a.decodeBase64StringUtf8(l[0]))}catch(e){throw e instanceof Error&&(e.message=`Can't parse token envelope: ${l[0]}': ${e.message}`),e}if(!o)throw Error("Can't parse token envelope: "+l[0]);try{s=JSON.parse(a.decodeBase64StringUtf8(l[1]))}catch(e){throw e instanceof Error&&(e.message=`Can't parse token payload '${l[0]}`),e}if(!s)throw Error("Can't parse token payload: "+l[1]);if(!Object.prototype.hasOwnProperty.call(t,o.kid))throw Error("No pem found for envelope: "+JSON.stringify(o));let d=t[o.kid];if("ES256"===o.alg&&(c=p.joseToDer(c,"ES256").toString("base64")),!await a.verify(d,u,c))throw Error("Invalid token signature: "+e);if(!s.iat)throw Error("No issue time in token: "+JSON.stringify(s));if(!s.exp)throw Error("No expiration time in token: "+JSON.stringify(s));let h=Number(s.iat);if(isNaN(h))throw Error("iat field using invalid format");let g=Number(s.exp);if(isNaN(g))throw Error("exp field using invalid format");let _=new Date().getTime()/1e3;if(g>=_+i)throw Error("Expiration time too far in future: "+JSON.stringify(s));let E=h-y.CLOCK_SKEW_SECS_,v=g+y.CLOCK_SKEW_SECS_;if(_<E)throw Error("Token used too early, "+_+" < "+E+": "+JSON.stringify(s));if(_>v)throw Error("Token used too late, "+_+" > "+v+": "+JSON.stringify(s));if(n&&0>n.indexOf(s.iss))throw Error("Invalid issuer, expected one of ["+n+"], but got "+s.iss);if(null!=r){let e=s.aud;if(!(r.constructor===Array?r.indexOf(e)>-1:e===r))throw Error("Wrong recipient, payload audience != requiredAudience")}return new m.LoginTicket(o,s)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let e=await this.refreshHandler();if(!e.access_token)throw Error("No access token is returned by the refreshHandler callback.");return e}}isTokenExpiring(){let e=this.credentials.expiry_date;return!!e&&e<=new Date().getTime()+this.eagerRefreshThresholdMillis}}r.OAuth2Client=y},70814,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Compute=void 0;let n=e.r(57612),i=e.r(82e3),o=e.r(701);class s extends o.OAuth2Client{serviceAccountEmail;scopes;constructor(e={}){super(e),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=Array.isArray(e.scopes)?e.scopes:e.scopes?[e.scopes]:[]}async refreshTokenNoCache(){let e,t=`service-accounts/${this.serviceAccountEmail}/token`;try{let r={property:t};this.scopes.length>0&&(r.params={scopes:this.scopes.join(",")}),e=await i.instance(r)}catch(e){throw e instanceof n.GaxiosError&&(e.message=`Could not refresh access token: ${e.message}`,this.wrapError(e)),e}let r=e;return e&&e.expires_in&&(r.expiry_date=new Date().getTime()+1e3*e.expires_in,delete r.expires_in),this.emit("tokens",r),{tokens:r,res:null}}async fetchIdToken(e){let t,r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`;try{t=await i.instance({property:r})}catch(e){throw e instanceof Error&&(e.message=`Could not fetch ID token: ${e.message}`),e}return t}wrapError(e){let t=e.response;t&&t.status&&(e.status=t.status,403===t.status?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:404===t.status&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}}r.Compute=s},80732,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IdTokenClient=void 0;let n=e.r(701);class i extends n.OAuth2Client{targetAudience;idTokenProvider;constructor(e){super(e),this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let e=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:e,expiry_date:this.getIdTokenExpiryDate(e)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(e){let t=e.split(".")[1];if(t)return 1e3*JSON.parse(Buffer.from(t,"base64").toString("ascii")).exp}}r.IdTokenClient=i},80243,(e,t,r)=>{"use strict";var n,i;let o;Object.defineProperty(r,"__esModule",{value:!0}),r.GCPEnv=void 0,r.clear=function(){o=void 0},r.getEnv=a;let s=e.r(82e3);async function a(){return o||(o=l())}async function l(){n.NONE;return process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME?n.APP_ENGINE:process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET?n.CLOUD_FUNCTIONS:await c()?await u()?n.KUBERNETES_ENGINE:process.env.K_CONFIGURATION?n.CLOUD_RUN:process.env.CLOUD_RUN_JOB?n.CLOUD_RUN_JOBS:n.COMPUTE_ENGINE:n.NONE}async function u(){try{return await s.instance("attributes/cluster-name"),!0}catch(e){return!1}}async function c(){return s.isAvailable()}(i=n||(r.GCPEnv=n={})).APP_ENGINE="APP_ENGINE",i.KUBERNETES_ENGINE="KUBERNETES_ENGINE",i.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",i.COMPUTE_ENGINE="COMPUTE_ENGINE",i.CLOUD_RUN="CLOUD_RUN",i.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",i.NONE="NONE"},41949,(e,t,r)=>{var n=e.r(23469).Buffer,i=e.r(88947);function o(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=n.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=n.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick((function(){this.emit("end",e),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof e+")")}e.r(24361).inherits(o,i),o.prototype.write=function(e){this.buffer=n.concat([this.buffer,n.from(e)]),this.emit("data",e)},o.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},t.exports=o},22691,(e,t,r)=>{"use strict";var n=e.r(874).Buffer,i=e.r(874).SlowBuffer;function o(e,t){if(!n.isBuffer(e)||!n.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}t.exports=o,o.install=function(){n.prototype.equal=i.prototype.equal=function(e){return o(this,e)}};var s=n.prototype.equal,a=i.prototype.equal;o.restore=function(){n.prototype.equal=s,i.prototype.equal=a}},57067,(e,t,r)=>{var n,i=e.r(23469).Buffer,o=e.r(54799),s=e.r(32955),a=e.r(24361),l="secret must be a string or buffer",u="key must be a string or a buffer",c="function"==typeof o.createPublicKey;function d(e){if(!i.isBuffer(e)&&"string"!=typeof e&&(!c||"object"!=typeof e||"string"!=typeof e.type||"string"!=typeof e.asymmetricKeyType||"function"!=typeof e.export))throw g(u)}function p(e){if(!i.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw g("key must be a string, a buffer or an object")}function h(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function f(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function g(e){var t=[].slice.call(arguments,1);return TypeError(a.format.bind(a,e).apply(null,t))}function m(e){var t;return t=e,i.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function y(e){return function(t,r){!function(e){if(!i.isBuffer(e)){if("string"!=typeof e){if(!c||"object"!=typeof e||"secret"!==e.type||"function"!=typeof e.export)throw g(l)}}}(r),t=m(t);var n=o.createHmac("sha"+e,r);return h((n.update(t),n.digest("base64")))}}c&&(u+=" or a KeyObject",l+="or a KeyObject");var _="timingSafeEqual"in o?function(e,t){return e.byteLength===t.byteLength&&o.timingSafeEqual(e,t)}:function(t,r){return n||(n=e.r(22691)),n(t,r)};function E(e){return function(t,r,n){var o=y(e)(t,n);return _(i.from(r),i.from(o))}}function v(e){return function(t,r){p(r),t=m(t);var n=o.createSign("RSA-SHA"+e);return h((n.update(t),n.sign(r,"base64")))}}function b(e){return function(t,r,n){d(n),t=m(t),r=f(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(n,r,"base64")}}function S(e){return function(t,r){p(r),t=m(t);var n=o.createSign("RSA-SHA"+e);return h((n.update(t),n.sign({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function T(e){return function(t,r,n){d(n),t=m(t),r=f(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function A(e){var t=v(e);return function(){var r=t.apply(null,arguments);return s.derToJose(r,"ES"+e)}}function O(e){var t=b(e);return function(r,n,i){return t(r,n=s.joseToDer(n,"ES"+e).toString("base64"),i)}}function w(){return function(){return""}}function C(){return function(e,t){return""===t}}t.exports=function(e){var t=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!t)throw g('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var r=(t[1]||t[3]).toLowerCase(),n=t[2];return{sign:({hs:y,rs:v,ps:S,es:A,none:w})[r](n),verify:({hs:E,rs:b,ps:T,es:O,none:C})[r](n)}}},76872,(e,t,r)=>{var n=e.r(874).Buffer;t.exports=function(e){return"string"==typeof e?e:"number"==typeof e||n.isBuffer(e)?e.toString():JSON.stringify(e)}},14743,(e,t,r)=>{var n=e.r(23469).Buffer,i=e.r(41949),o=e.r(57067),s=e.r(88947),a=e.r(76872),l=e.r(24361);function u(e,t){return n.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c(e){var t,r,n,i=e.header,s=e.payload,c=e.secret||e.privateKey,d=e.encoding,p=o(i.alg),h=(t=(t=d)||"utf8",r=u(a(i),"binary"),n=u(a(s),t),l.format("%s.%s",r,n)),f=p.sign(h,c);return l.format("%s.%s",h,f)}function d(e){var t=e.secret;if(t=null==(t=null==t?e.privateKey:t)?e.key:t,!0===/^hs/i.test(e.header.alg)&&null==t)throw TypeError("secret must be a string or buffer or a KeyObject");var r=new i(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new i(e.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}l.inherits(d,s),d.prototype.sign=function(){try{var e=c({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},d.sign=c,t.exports=d},48233,(e,t,r)=>{var n=e.r(23469).Buffer,i=e.r(41949),o=e.r(57067),s=e.r(88947),a=e.r(76872),l=e.r(24361),u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function c(e){var t=e.split(".",1)[0],r=n.from(t,"base64").toString("binary");if("[object Object]"===Object.prototype.toString.call(r))return r;try{return JSON.parse(r)}catch(e){return}}function d(e){return e.split(".")[2]}function p(e){return u.test(e)&&!!c(e)}function h(e,t,r){if(!t){var n=Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var i=d(e=a(e)),s=e.split(".",2).join(".");return o(t).verify(s,i,r)}function f(e,t){if(t=t||{},!p(e=a(e)))return null;var r,i,o=c(e);if(!o)return null;var s=(r=r||"utf8",i=e.split(".")[1],n.from(i,"base64").toString(r));return("JWT"===o.typ||t.json)&&(s=JSON.parse(s,t.encoding)),{header:o,payload:s,signature:d(e)}}function g(e){var t=(e=e||{}).secret;if(t=null==(t=null==t?e.publicKey:t)?e.key:t,!0===/^hs/i.test(e.algorithm)&&null==t)throw TypeError("secret must be a string or buffer or a KeyObject");var r=new i(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new i(e.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}l.inherits(g,s),g.prototype.verify=function(){try{var e=h(this.signature.buffer,this.algorithm,this.key.buffer),t=f(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},g.decode=f,g.isValid=p,g.verify=h,t.exports=g},58184,(e,t,r)=>{var n=e.r(14743),i=e.r(48233);r.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],r.sign=n.sign,r.verify=i.verify,r.decode=i.decode,r.isValid=i.isValid,r.createSign=function(e){return new n(e)},r.createVerify=function(e){return new i(e)}},66667,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GoogleToken=void 0;var n,i=u(e.r(22734)),o=e.r(57612),s=u(e.r(58184)),a=u(e.r(14747)),l=e.r(24361);function u(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(u=function(e,t){if(!t&&e&&e.__esModule)return e;var i,o,s={__proto__:null,default:e};if(null===e||"object"!=c(e)&&"function"!=typeof e)return s;if(i=t?n:r){if(i.has(e))return i.get(e);i.set(e,s)}for(var a in e)"default"!==a&&({}).hasOwnProperty.call(e,a)&&((o=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,a))&&(o.get||o.set)?i(s,a,o):s[a]=e[a]);return s})(e,t)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function p(e,t,r){return e.set(h(e,t),r),r}function h(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function g(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function y(e){var t="function"==typeof Map?new Map:void 0;return(y=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(_())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(e.bind.apply(e,n));return r&&E(i,r.prototype),i}(e,arguments,v(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),E(r,e)})(e)}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_=function(){return!!e})()}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}function T(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var l=Object.create((n&&n.prototype instanceof a?n:a).prototype);return A(l,"_invoke",function(r,n,i){var o,a,l,u=0,c=i||[],d=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return o=t,a=0,l=e,p.n=r,s}};function h(r,n){for(a=r,l=n,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=p.p,f=o[2];r>3?(i=f===n)&&(l=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=r<2&&h<o[1])?(a=0,p.v=n,p.n=o[1]):h<f&&(i=r<3||o[0]>n||n>f)&&(o[4]=r,o[5]=n,p.n=f,a=0))}if(i||r>1)return s;throw d=!0,n}return function(i,c,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,f),a=c,l=f;(t=a<2?e:l)||!d;){o||(a?a<3?(a>1&&(p.n=-1),h(a,l)):p.n=l:p.v=l);try{if(u=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=p.n<0)?l:r.call(n,p))!==s)break}catch(t){o=e,a=1,l=t}finally{u=1}}return{value:t,done:d}}}(r,i,o),!0),l}var s={};function a(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=u.prototype=a.prototype=Object.create([][n]?t(t([][n]())):(A(t={},n,function(){return this}),t));function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,A(e,i,"GeneratorFunction")),e.prototype=Object.create(c),e}return l.prototype=u,A(c,"constructor",u),A(u,"constructor",l),l.displayName="GeneratorFunction",A(u,i,"GeneratorFunction"),A(c),A(c,i,"Generator"),A(c,n,function(){return this}),A(c,"toString",function(){return"[object Generator]"}),(T=function(){return{w:o,m:d}})()}function A(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}(A=function(e,t,r,n){if(t)i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){A(e,t,function(e){return this._invoke(t,r,e)})};o("next",0),o("throw",1),o("return",2)}})(e,t,r,n)}function O(e,t,r,n,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,i)}function w(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function s(e){O(o,n,i,s,a,"next",e)}function a(e){O(o,n,i,s,a,"throw",e)}s(void 0)})}}var C=i.readFile?(0,l.promisify)(i.readFile):w(T().m(function e(){return T().w(function(e){for(;;)switch(e.n){case 0:throw new I("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return e.a(2)}},e)})),R="https://oauth2.googleapis.com/token",I=function(e){function t(e,r){var n,i,o;return m(this,t),i=t,o=[e],i=v(i),b(n=function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var r=e;if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(this,_()?Reflect.construct(i,o||[],v(this).constructor):i.apply(this,o)),"code",void 0),n.code=r,n}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e),g(t)}(y(Error)),P=new WeakMap,N=new WeakSet;function x(e){return k.apply(this,arguments)}function k(){return(k=w(T().m(function e(t){return T().w(function(e){for(;;)switch(e.n){case 0:if(!P.get(h(P,this))||t.forceRefresh){e.n=1;break}return e.a(2,P.get(h(P,this)));case 1:return e.p=1,e.n=2,p(P,this,h(N,this,D).call(this,t));case 2:return e.a(2,e.v);case 3:return e.p=3,p(P,this,void 0),e.f(3);case 4:return e.a(2)}},e,this,[[1,,3,4]])}))).apply(this,arguments)}function D(e){return M.apply(this,arguments)}function M(){return(M=w(T().m(function e(t){var r;return T().w(function(e){for(;;)switch(e.n){case 0:if(!1!==this.isTokenExpiring()||!1!==t.forceRefresh){e.n=1;break}return e.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){e.n=2;break}throw Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){e.n=4;break}return e.n=3,this.getCredentials(this.keyFile);case 3:r=e.v,this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||h(N,this,U).call(this);case 4:return e.a(2,h(N,this,F).call(this))}},e,this)}))).apply(this,arguments)}function U(){if(!this.iss)throw new I("email is required.","MISSING_CREDENTIALS")}function j(){return L.apply(this,arguments)}function L(){return(L=w(T().m(function e(){var t;return T().w(function(e){for(;;)switch(e.n){case 0:if(this.accessToken){e.n=1;break}throw Error("No token to revoke.");case 1:return t="https://oauth2.googleapis.com/revoke?token="+this.accessToken,e.n=2,this.transporter.request({url:t,retry:!0});case 2:h(N,this,G).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return e.a(2)}},e,this)}))).apply(this,arguments)}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.keyFile=e.keyFile,this.key=e.key,this.rawToken=void 0,this.iss=e.email||e.iss,this.sub=e.sub,this.additionalClaims=e.additionalClaims,"object"===c(e.scope)?this.scope=e.scope.join(" "):this.scope=e.scope,this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis,e.transporter&&(this.transporter=e.transporter)}function F(){return q.apply(this,arguments)}function q(){return(q=w(T().m(function e(){var t,r,n,i,o,a,l,u,c,d;return T().w(function(e){for(;;)switch(e.n){case 0:return t=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:R,exp:t+3600,iat:t,sub:this.sub},r),i=s.sign({header:{alg:"RS256"},payload:n,secret:this.key}),e.p=1,e.n=2,this.transporter.request({method:"POST",url:R,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return o=e.v,this.rawToken=o.data,this.expiresAt=null===o.data.expires_in||void 0===o.data.expires_in?void 0:(t+o.data.expires_in)*1e3,e.a(2,this.rawToken);case 3:throw e.p=3,d=e.v,this.rawToken=void 0,this.tokenExpires=void 0,(u=d.response&&null!=(a=d.response)&&a.data?null==(l=d.response)?void 0:l.data:{}).error&&(c=u.error_description?": ".concat(u.error_description):"",d.message="".concat(u.error).concat(c)),d;case 4:return e.a(2)}},e,this,[[1,3]])}))).apply(this,arguments)}r.GoogleToken=g(function e(t){m(this,e),d(this,N),N.add(this),b(this,"expiresAt",void 0),b(this,"key",void 0),b(this,"keyFile",void 0),b(this,"iss",void 0),b(this,"sub",void 0),b(this,"scope",void 0),b(this,"rawToken",void 0),b(this,"tokenExpires",void 0),b(this,"email",void 0),b(this,"additionalClaims",void 0),b(this,"eagerRefreshThresholdMillis",void 0),b(this,"transporter",{request:function(e){return(0,o.request)(e)}}),d(this,P),P.set(this,void 0),h(N,this,G).call(this,t)},[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var e=new Date().getTime();return!this.rawToken||!this.expiresAt||e>=this.expiresAt}},{key:"isTokenExpiring",value:function(){var e,t=new Date().getTime(),r=null!=(e=this.eagerRefreshThresholdMillis)?e:0;return!this.rawToken||!this.expiresAt||this.expiresAt<=t+r}},{key:"getToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===c(e)&&(t=e,e=void 0),t=Object.assign({forceRefresh:!1},t),e){var r=e;h(N,this,x).call(this,t).then(function(e){return r(null,e)},e);return}return h(N,this,x).call(this,t)}},{key:"getCredentials",value:(n=w(T().m(function e(t){var r,n,i,o,s;return T().w(function(e){for(;;)switch(e.n){case 0:e.n=".json"===(s=a.extname(t))?1:".der"===s||".crt"===s||".pem"===s?4:".p12"===s||".pfx"===s?6:7;break;case 1:return e.n=2,C(t,"utf8");case 2:if(n=(r=JSON.parse(e.v)).private_key,i=r.client_email,!(!n||!i)){e.n=3;break}throw new I("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return e.a(2,{privateKey:n,clientEmail:i});case 4:return e.n=5,C(t,"utf8");case 5:return o=e.v,e.a(2,{privateKey:o});case 6:throw new I("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new I("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return e.a(2)}},e)})),function(e){return n.apply(this,arguments)})},{key:"revokeToken",value:function(e){return e?void h(N,this,j).call(this).then(function(){return e()},e):h(N,this,j).call(this)}}])},10247,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JWTAccess=void 0;let n=e.r(58184),i=e.r(15733),o={alg:"RS256",typ:"JWT"};class s{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new i.LRUCache({capacity:500,maxAge:36e5});constructor(e,t,r,n){this.email=e,this.key=t,this.keyId=r,this.eagerRefreshThresholdMillis=n??3e5}getCachedKey(e,t){let r=e;if(t&&Array.isArray(t)&&t.length?r=e?`${e}_${t.join("_")}`:`${t.join("_")}`:"string"==typeof t&&(r=e?`${e}_${t}`:t),!r)throw Error("Scopes or url must be provided");return r}getRequestHeaders(e,t,r){let i,a=this.getCachedKey(e,r),l=this.cache.get(a),u=Date.now();if(l&&l.expiration-u>this.eagerRefreshThresholdMillis)return new Headers(l.headers);let c=Math.floor(Date.now()/1e3),d=s.getExpirationTime(c);if(Array.isArray(r)&&(r=r.join(" ")),i=r?{iss:this.email,sub:this.email,scope:r,exp:d,iat:c}:{iss:this.email,sub:this.email,aud:e,exp:d,iat:c},t){for(let e in i)if(t[e])throw Error(`The '${e}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let p=this.keyId?{...o,kid:this.keyId}:o,h=Object.assign(i,t),f=n.sign({header:p,payload:h,secret:this.key}),g=new Headers({authorization:`Bearer ${f}`});return this.cache.set(a,{expiration:1e3*d,headers:g}),g}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,t){if(!t)return this.fromStreamAsync(e);this.fromStreamAsync(e).then(()=>t(),t)}fromStreamAsync(e){return new Promise((t,r)=>{e||r(Error("Must pass in a stream containing the service account auth settings."));let n="";e.setEncoding("utf8").on("data",e=>n+=e).on("error",r).on("end",()=>{try{let e=JSON.parse(n);this.fromJSON(e),t()}catch(e){r(e)}})})}}r.JWTAccess=s},24553,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JWT=void 0;let n=e.r(66667),i=e.r(10247),o=e.r(701),s=e.r(11656);class a extends o.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor(e={}){super(e),this.email=e.email,this.keyFile=e.keyFile,this.key=e.key,this.keyId=e.keyId,this.scopes=e.scopes,this.subject=e.subject,this.additionalClaims=e.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){let t=new a(this);return t.scopes=e,t}async getRequestMetadataAsync(e){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;let t=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==s.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==s.DEFAULT_UNIVERSE)throw RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${s.DEFAULT_UNIVERSE}`);if(!this.apiKey&&t)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:e}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${e.id_token}`}))}}else{let t;this.access||(this.access=new i.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis)),this.hasUserScopes()?t=this.scopes:e||(t=this.defaultScopes);let r=this.useJWTAccessWithScope||this.universeDomain!==s.DEFAULT_UNIVERSE,n=await this.access.getRequestHeaders(e??void 0,this.additionalClaims,r?t:void 0);return{headers:this.addSharedMetadataHeaders(n)}}return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(e):{headers:new Headers}}async fetchIdToken(e){let t=new n.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e},transporter:this.transporter});if(await t.getToken({forceRefresh:!0}),!t.idToken)throw Error("Unknown error: Failed to fetch ID token");return t.idToken}hasUserScopes(){return!!this.scopes&&this.scopes.length>0}hasAnyScopes(){return!!this.scopes&&!!(this.scopes.length>0)||!!this.defaultScopes&&!!(this.defaultScopes.length>0)}authorize(e){if(!e)return this.authorizeAsync();this.authorizeAsync().then(t=>e(null,t),e)}async authorizeAsync(){let e=await this.refreshToken();if(!e)throw Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens}async refreshTokenNoCache(){let e=this.createGToken(),t={access_token:(await e.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:e.expiresAt,id_token:e.idToken};return this.emit("tokens",t),{res:null,tokens:t}}createGToken(){return this.gtoken||(this.gtoken=new n.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(e){if(!e)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,t){if(!t)return this.fromStreamAsync(e);this.fromStreamAsync(e).then(()=>t(),t)}fromStreamAsync(e){return new Promise((t,r)=>{if(!e)throw Error("Must pass in a stream containing the service account auth settings.");let n="";e.setEncoding("utf8").on("error",r).on("data",e=>n+=e).on("end",()=>{try{let e=JSON.parse(n);this.fromJSON(e),t()}catch(e){r(e)}})})}fromAPIKey(e){if("string"!=typeof e)throw Error("Must provide an API Key string.");this.apiKey=e}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let e=this.createGToken(),t=await e.getCredentials(this.keyFile);return{private_key:t.privateKey,client_email:t.clientEmail}}throw Error("A key or a keyFile must be provided to getCredentials.")}}r.JWT=a},16260,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UserRefreshClient=r.USER_REFRESH_ACCOUNT_TYPE=void 0;let n=e.r(701),i=e.r(11656);r.USER_REFRESH_ACCOUNT_TYPE="authorized_user";class o extends n.OAuth2Client{_refreshToken;constructor(e,t,r,n,i){const o=e&&"object"==typeof e?e:{clientId:e,clientSecret:t,refreshToken:r,eagerRefreshThresholdMillis:n,forceRefreshOnFailure:i};super(o),this._refreshToken=o.refreshToken,this.credentials.refresh_token=o.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(e){let t={...o.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:e})};return i.AuthClient.setMethodName(t,"fetchIdToken"),(await this.transporter.request(t)).data.id_token}fromJSON(e){if(!e)throw Error("Must pass in a JSON object containing the user refresh token");if("authorized_user"!==e.type)throw Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,t){if(!t)return this.fromStreamAsync(e);this.fromStreamAsync(e).then(()=>t(),t)}async fromStreamAsync(e){return new Promise((t,r)=>{if(!e)return r(Error("Must pass in a stream containing the user refresh token."));let n="";e.setEncoding("utf8").on("error",r).on("data",e=>n+=e).on("end",()=>{try{let e=JSON.parse(n);return this.fromJSON(e),t()}catch(e){return r(e)}})})}static fromJSON(e){let t=new o;return t.fromJSON(e),t}}r.UserRefreshClient=o},36126,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Impersonated=r.IMPERSONATED_ACCOUNT_TYPE=void 0;let n=e.r(701),i=e.r(57612),o=e.r(15733);r.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";class s extends n.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor(e={}){if(super(e),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=e.sourceClient??new n.OAuth2Client,this.targetPrincipal=e.targetPrincipal??"",this.delegates=e.delegates??[],this.targetScopes=e.targetScopes??[],this.lifetime=e.lifetime??3600,(0,o.originalOrCamelOptions)(e).get("universe_domain")){if(this.sourceClient.universeDomain!==this.universeDomain)throw RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`)}else this.universeDomain=this.sourceClient.universeDomain;this.endpoint=e.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign(e){await this.sourceClient.getAccessToken();let t=`projects/-/serviceAccounts/${this.targetPrincipal}`,r=`${this.endpoint}/v1/${t}:signBlob`,n={delegates:this.delegates,payload:Buffer.from(e).toString("base64")};return(await this.sourceClient.request({...s.RETRY_CONFIG,url:r,data:n,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let e="projects/-/serviceAccounts/"+this.targetPrincipal,t=`${this.endpoint}/v1/${e}:generateAccessToken`,r={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},n=await this.sourceClient.request({...s.RETRY_CONFIG,url:t,data:r,method:"POST"}),i=n.data;return this.credentials.access_token=i.accessToken,this.credentials.expiry_date=Date.parse(i.expireTime),{tokens:this.credentials,res:n}}catch(r){if(!(r instanceof Error))throw r;let e=0,t="";if(r instanceof i.GaxiosError&&(e=r?.response?.data?.error?.status,t=r?.response?.data?.error?.message),e&&t)throw r.message=`${e}: unable to impersonate: ${t}`,r;throw r.message=`unable to impersonate: ${r}`,r}}async fetchIdToken(e,t){await this.sourceClient.getAccessToken();let r=`projects/-/serviceAccounts/${this.targetPrincipal}`,n=`${this.endpoint}/v1/${r}:generateIdToken`,i={delegates:this.delegates,audience:e,includeEmail:t?.includeEmail??!0,useEmailAzp:t?.includeEmail??!0};return(await this.sourceClient.request({...s.RETRY_CONFIG,url:n,data:i,method:"POST"})).data.token}}r.Impersonated=s},46944,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OAuthClientAuthHandler=void 0,r.getErrorFromOAuthErrorResponse=function(e,t){let r=e.error,n=e.error_description,i=e.error_uri,o=`Error code ${r}`;void 0!==n&&(o+=`: ${n}`),void 0!==i&&(o+=` - ${i}`);let s=Error(o);if(t){let e=Object.keys(t);t.stack&&e.push("stack"),e.forEach(e=>{"message"!==e&&Object.defineProperty(s,e,{value:t[e],writable:!1,enumerable:!0})})}return s};let n=e.r(57612),i=e.r(59501),o=["PUT","POST","PATCH"];class s{#p=(0,i.createCrypto)();#h;transporter;constructor(e){e&&"clientId"in e?(this.#h=e,this.transporter=new n.Gaxios):(this.#h=e?.clientAuthentication,this.transporter=e?.transporter||new n.Gaxios)}applyClientAuthenticationOptions(e,t){e.headers=n.Gaxios.mergeHeaders(e.headers),this.injectAuthenticatedHeaders(e,t),t||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,t){if(t)e.headers=n.Gaxios.mergeHeaders(e.headers,{authorization:`Bearer ${t}`});else if(this.#h?.confidentialClientType==="basic"){e.headers=n.Gaxios.mergeHeaders(e.headers);let t=this.#h.clientId,r=this.#h.clientSecret||"",i=this.#p.encodeBase64StringUtf8(`${t}:${r}`);n.Gaxios.mergeHeaders(e.headers,{authorization:`Basic ${i}`})}}injectAuthenticatedRequestBody(e){if(this.#h?.confidentialClientType==="request-body"){let t=(e.method||"GET").toUpperCase();if(!o.includes(t))throw Error(`${t} HTTP method does not support ${this.#h.confidentialClientType} client authentication`);let r=new Headers(e.headers).get("content-type");if(r?.startsWith("application/x-www-form-urlencoded")||e.data instanceof URLSearchParams){let t=new URLSearchParams(e.data??"");t.append("client_id",this.#h.clientId),t.append("client_secret",this.#h.clientSecret||""),e.data=t}else if(r?.startsWith("application/json"))e.data=e.data||{},Object.assign(e.data,{client_id:this.#h.clientId,client_secret:this.#h.clientSecret||""});else throw Error(`${r} content-types are not supported with ${this.#h.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}r.OAuthClientAuthHandler=s},5332,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StsCredentials=void 0;let n=e.r(57612),i=e.r(11656),o=e.r(46944),s=e.r(15733);class a extends o.OAuthClientAuthHandler{#f;constructor(e={tokenExchangeEndpoint:""},t){("object"!=typeof e||e instanceof URL)&&(e={tokenExchangeEndpoint:e,clientAuthentication:t}),super(e),this.#f=e.tokenExchangeEndpoint}async exchangeToken(e,t,r){let l={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:e.scope?.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:e.actingParty?.actorToken,actor_token_type:e.actingParty?.actorTokenType,options:r&&JSON.stringify(r)},u={...a.RETRY_CONFIG,url:this.#f.toString(),method:"POST",headers:t,data:new URLSearchParams((0,s.removeUndefinedValuesInObject)(l))};i.AuthClient.setMethodName(u,"exchangeToken"),this.applyClientAuthenticationOptions(u);try{let e=await this.transporter.request(u),t=e.data;return t.res=e,t}catch(e){if(e instanceof n.GaxiosError&&e.response)throw(0,o.getErrorFromOAuthErrorResponse)(e.response.data,e);throw e}}}r.StsCredentials=a},6560,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BaseExternalAccountClient=r.CLOUD_RESOURCE_MANAGER=r.EXTERNAL_ACCOUNT_TYPE=r.EXPIRATION_TIME_OFFSET=void 0;let n=e.r(57612),i=e.r(88947),o=e.r(11656),s=e.r(5332),a=e.r(15733),l=e.r(93714),u="https://www.googleapis.com/auth/cloud-platform";r.EXPIRATION_TIME_OFFSET=3e5,r.EXTERNAL_ACCOUNT_TYPE="external_account",r.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";class c extends o.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#g=null;constructor(e){super(e);const t=(0,a.originalOrCamelOptions)(e),n=t.get("type");if(n&&n!==r.EXTERNAL_ACCOUNT_TYPE)throw Error(`Expected "${r.EXTERNAL_ACCOUNT_TYPE}" type but received "${e.type}"`);const i=t.get("client_id"),o=t.get("client_secret");this.tokenUrl=t.get("token_url")??"https://sts.{universeDomain}/v1/token".replace("{universeDomain}",this.universeDomain);const l=t.get("subject_token_type"),c=t.get("workforce_pool_user_project"),d=t.get("service_account_impersonation_url"),p=t.get("service_account_impersonation"),h=(0,a.originalOrCamelOptions)(p).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(t.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),i&&(this.clientAuth={confidentialClientType:"basic",clientId:i,clientSecret:o}),this.stsCredential=new s.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=t.get("scopes")||[u],this.cachedAccessToken=null,this.audience=t.get("audience"),this.subjectTokenType=l,this.workforcePoolUserProject=c;const f=RegExp("//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+");if(this.workforcePoolUserProject&&!this.audience.match(f))throw Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=d,this.serviceAccountImpersonationLifetime=h,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=3600),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);let e=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return e?.groups?.email||null}return null}setCredentials(e){super.setCredentials(e),this.cachedAccessToken=e}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),t=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(t)}request(e,t){if(!t)return this.requestAsync(e);this.requestAsync(e).then(e=>t(null,e),e=>t(e,e.response))}async getProjectId(){let e=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(e){let t=await this.getRequestHeaders(),r={...c.RETRY_CONFIG,headers:t,url:`${this.cloudResourceManagerURL.toString()}${e}`};o.AuthClient.setMethodName(r,"getProjectId");let n=await this.transporter.request(r);return this.projectId=n.data.projectId,this.projectId}return null}async requestAsync(e,t=!1){let r;try{let t=await this.getRequestHeaders();e.headers=n.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,t),r=await this.transporter.request(e)}catch(n){let r=n.response;if(r){let n=r.status,o=r.config.data instanceof i.Readable;if(!t&&(401===n||403===n)&&!o&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw n}return r}async refreshAccessTokenAsync(){this.#g=this.#g||this.#m();try{return await this.#g}finally{this.#g=null}}async #m(){let e=await this.retrieveSubjectToken(),t={grantType:"urn:ietf:params:oauth:grant-type:token-exchange",audience:this.audience,requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:e,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[u]:this.getScopesArray()},r=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,n=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),i=await this.stsCredential.exchangeToken(t,n,r);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(i.access_token):i.expires_in?this.cachedAccessToken={access_token:i.access_token,expiry_date:new Date().getTime()+1e3*i.expires_in,res:i.res}:this.cachedAccessToken={access_token:i.access_token,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(e){let t=e.match(/\/projects\/([^/]+)/);return t?t[1]:null}async getImpersonatedAccessToken(e){let t={...c.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${e}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};o.AuthClient.setMethodName(t,"getImpersonatedAccessToken");let r=await this.transporter.request(t),n=r.data;return{access_token:n.accessToken,expiry_date:new Date(n.expireTime).getTime(),res:r}}isExpired(e){let t=new Date().getTime();return!!e.expiry_date&&t>=e.expiry_date-this.eagerRefreshThresholdMillis}getScopesArray(){return"string"==typeof this.scopes?[this.scopes]:this.scopes||[u]}getMetricsHeaderValue(){let e=process.version.replace(/^v/,""),t=void 0!==this.serviceAccountImpersonationUrl,r=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${e} auth/${l.pkg.version} google-byoid-sdk source/${r} sa-impersonation/${t} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}}r.BaseExternalAccountClient=c},37289,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FileSubjectTokenSupplier=void 0;let n=e.r(24361),i=e.r(22734),o=(0,n.promisify)(i.readFile??(()=>{})),s=(0,n.promisify)(i.realpath??(()=>{})),a=(0,n.promisify)(i.lstat??(()=>{}));r.FileSubjectTokenSupplier=class{filePath;formatType;subjectTokenFieldName;constructor(e){this.filePath=e.filePath,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName}async getSubjectToken(){let e,t=this.filePath;try{if(t=await s(t),!(await a(t)).isFile())throw Error()}catch(e){throw e instanceof Error&&(e.message=`The file at ${t} does not exist, or it is not a file. ${e.message}`),e}let r=await o(t,{encoding:"utf8"});if("text"===this.formatType?e=r:"json"===this.formatType&&this.subjectTokenFieldName&&(e=JSON.parse(r)[this.subjectTokenFieldName]),!e)throw Error("Unable to parse the subject_token from the credential_source file");return e}}},63057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UrlSubjectTokenSupplier=void 0;let n=e.r(11656);r.UrlSubjectTokenSupplier=class{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor(e){this.url=e.url,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName,this.headers=e.headers,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getSubjectToken(e){let t,r={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};if(n.AuthClient.setMethodName(r,"getSubjectToken"),"text"===this.formatType?t=(await e.transporter.request(r)).data:"json"===this.formatType&&this.subjectTokenFieldName&&(t=(await e.transporter.request(r)).data[this.subjectTokenFieldName]),!t)throw Error("Unable to parse the subject_token from the credential_source URL");return t}}},58218,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CertificateSubjectTokenSupplier=r.InvalidConfigurationError=r.CertificateSourceUnavailableError=r.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;let n=e.r(15733),i=e.r(22734),o=e.r(54799),s=e.r(24836);r.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";class a extends Error{constructor(e){super(e),this.name="CertificateSourceUnavailableError"}}r.CertificateSourceUnavailableError=a;class l extends Error{constructor(e){super(e),this.name="InvalidConfigurationError"}}r.InvalidConfigurationError=l,r.CertificateSubjectTokenSupplier=class{certificateConfigPath;trustChainPath;cert;key;constructor(e){if(!e.useDefaultCertificateConfig&&!e.certificateConfigLocation)throw new l("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(e.useDefaultCertificateConfig&&e.certificateConfigLocation)throw new l("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=e.trustChainPath,this.certificateConfigPath=e.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new l("Cannot create mTLS Agent with missing certificate or key");return new s.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#y();let{certPath:e,keyPath:t}=await this.#_();return{cert:this.cert,key:this.key}=await this.#E(e,t),await this.#v(this.cert)}async #y(){let e=this.certificateConfigPath;if(e){if(await (0,n.isValidFile)(e))return e;throw new a(`Provided certificate config path is invalid: ${e}`)}let t=process.env[r.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(t){if(await (0,n.isValidFile)(t))return t;throw new a(`Path from environment variable "${r.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${t}`)}let i=(0,n.getWellKnownCertificateConfigFileLocation)();if(await (0,n.isValidFile)(i))return i;throw new a(`Could not find certificate configuration file. Searched override path, the "${r.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${i}).`)}async #_(){let e,t=this.certificateConfigPath;try{e=await i.promises.readFile(t,"utf8")}catch(e){throw new a(`Failed to read certificate config file at: ${t}`)}try{let r=JSON.parse(e),n=r?.cert_configs?.workload?.cert_path,i=r?.cert_configs?.workload?.key_path;if(!n||!i)throw new l(`Certificate config file (${t}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:n,keyPath:i}}catch(e){if(e instanceof l)throw e;throw new l(`Failed to parse certificate config from ${t}: ${e.message}`)}}async #E(e,t){let r,n;try{r=await i.promises.readFile(e),new o.X509Certificate(r)}catch(r){let t=r instanceof Error?r.message:String(r);throw new a(`Failed to read certificate file at ${e}: ${t}`)}try{n=await i.promises.readFile(t),(0,o.createPrivateKey)(n)}catch(r){let e=r instanceof Error?r.message:String(r);throw new a(`Failed to read private key file at ${t}: ${e}`)}return{cert:r,key:n}}async #v(e){let t=new o.X509Certificate(e);if(!this.trustChainPath)return JSON.stringify([t.raw.toString("base64")]);try{let e,r=((await i.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((e,t)=>{try{return new o.X509Certificate(e)}catch(r){let e=r instanceof Error?r.message:String(r);throw new l(`Failed to parse certificate at index ${t} in trust chain file ${this.trustChainPath}: ${e}`)}}),n=r.findIndex(e=>t.raw.equals(e.raw));if(-1===n)e=[t,...r];else if(0===n)e=r;else throw new l(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${n}).`);return JSON.stringify(e.map(e=>e.raw.toString("base64")))}catch(t){if(t instanceof l)throw t;let e=t instanceof Error?t.message:String(t);throw new a(`Failed to process certificate chain from ${this.trustChainPath}: ${e}`)}}}},76868,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IdentityPoolClient=void 0;let n=e.r(6560),i=e.r(15733),o=e.r(37289),s=e.r(63057),a=e.r(58218),l=e.r(5332),u=e.r(57612);class c extends n.BaseExternalAccountClient{subjectTokenSupplier;constructor(e){super(e);const t=(0,i.originalOrCamelOptions)(e),r=t.get("credential_source"),n=t.get("subject_token_supplier");if(!r&&!n)throw Error("A credential source or subject token supplier must be specified.");if(r&&n)throw Error("Only one of credential source or subject token supplier can be specified.");if(n)this.subjectTokenSupplier=n,this.credentialSourceType="programmatic";else{const e=(0,i.originalOrCamelOptions)(r),t=(0,i.originalOrCamelOptions)(e.get("format")),n=t.get("type")||"text",l=t.get("subject_token_field_name");if("json"!==n&&"text"!==n)throw Error(`Invalid credential_source format "${n}"`);if("json"===n&&!l)throw Error("Missing subject_token_field_name for JSON credential_source format");const u=e.get("file"),d=e.get("url"),p=e.get("certificate"),h=e.get("headers");if(u&&d||d&&p||u&&p)throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(u)this.credentialSourceType="file",this.subjectTokenSupplier=new o.FileSubjectTokenSupplier({filePath:u,formatType:n,subjectTokenFieldName:l});else if(d)this.credentialSourceType="url",this.subjectTokenSupplier=new s.UrlSubjectTokenSupplier({url:d,formatType:n,subjectTokenFieldName:l,headers:h,additionalGaxiosOptions:c.RETRY_CONFIG});else if(p){this.credentialSourceType="certificate";const e=new a.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:p.use_default_certificate_config,certificateConfigLocation:p.certificate_config_location,trustChainPath:p.trust_chain_path});this.subjectTokenSupplier=e}else throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let e=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof a.CertificateSubjectTokenSupplier){let e=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new l.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new u.Gaxios({agent:e})}),this.transporter=new u.Gaxios({...this.transporter.defaults||{},agent:e})}return e}}r.IdentityPoolClient=c},87573,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AwsRequestSigner=void 0;let n=e.r(57612),i=e.r(59501),o="AWS4-HMAC-SHA256";async function s(e,t,r){return await e.signWithHmacSha256(t,r)}async function a(e,t,r,n,i){let o=await s(e,`AWS4${t}`,r),a=await s(e,o,n),l=await s(e,a,i);return await s(e,l,"aws4_request")}async function l(e){let t=n.Gaxios.mergeHeaders(e.additionalAmzHeaders),r=e.requestPayload||"",l=e.host.split(".")[0],u=new Date,c=u.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),d=u.toISOString().replace(/[-]/g,"").replace(/T.*/,"");e.securityCredentials.token&&t.set("x-amz-security-token",e.securityCredentials.token);let p=n.Gaxios.mergeHeaders({host:e.host},t.has("date")?{}:{"x-amz-date":c},t),h="",f=[...p.keys()].sort();f.forEach(e=>{h+=`${e}:${p.get(e)}
`});let g=f.join(";"),m=await e.crypto.sha256DigestHex(r),y=`${e.method.toUpperCase()}
${e.canonicalUri}
${e.canonicalQuerystring}
${h}
${g}
${m}`,_=`${d}/${e.region}/${l}/aws4_request`,E=`${o}
${c}
${_}
`+await e.crypto.sha256DigestHex(y),v=await a(e.crypto,e.securityCredentials.secretAccessKey,d,e.region,l),b=await s(e.crypto,v,E),S=`${o} Credential=${e.securityCredentials.accessKeyId}/${_}, SignedHeaders=${g}, Signature=${(0,i.fromArrayBufferToHex)(b)}`;return{amzDate:t.has("date")?void 0:c,authorizationHeader:S,canonicalQuerystring:e.canonicalQuerystring}}r.AwsRequestSigner=class{getCredentials;region;crypto;constructor(e,t){this.getCredentials=e,this.region=t,this.crypto=(0,i.createCrypto)()}async getRequestOptions(e){if(!e.url)throw RangeError('"url" is required in "amzOptions"');let t="object"==typeof e.data?JSON.stringify(e.data):e.data,r=e.url,i=e.method||"GET",o=e.body||t,s=e.headers,a=await this.getCredentials(),u=new URL(r);if("string"!=typeof o&&void 0!==o)throw TypeError(`'requestPayload' is expected to be a string if provided. Got: ${o}`);let c=await l({crypto:this.crypto,host:u.host,canonicalUri:u.pathname,canonicalQuerystring:u.search.slice(1),method:i,region:this.region,securityCredentials:a,requestPayload:o,additionalAmzHeaders:s}),d=n.Gaxios.mergeHeaders(c.amzDate?{"x-amz-date":c.amzDate}:{},{authorization:c.authorizationHeader,host:u.host},s||{});a.token&&n.Gaxios.mergeHeaders(d,{"x-amz-security-token":a.token});let p={url:r,method:i,headers:d};return void 0!==o&&(p.body=o),p}}},41033,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultAwsSecurityCredentialsSupplier=void 0;let n=e.r(11656);r.DefaultAwsSecurityCredentialsSupplier=class{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor(e){this.regionUrl=e.regionUrl,this.securityCredentialsUrl=e.securityCredentialsUrl,this.imdsV2SessionTokenUrl=e.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getAwsRegion(e){if(this.#b)return this.#b;let t=new Headers;if(!this.#b&&this.imdsV2SessionTokenUrl&&t.set("x-aws-ec2-metadata-token",await this.#S(e.transporter)),!this.regionUrl)throw RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let r={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:t};n.AuthClient.setMethodName(r,"getAwsRegion");let i=await e.transporter.request(r);return i.data.substr(0,i.data.length-1)}async getAwsSecurityCredentials(e){if(this.#T)return this.#T;let t=new Headers;this.imdsV2SessionTokenUrl&&t.set("x-aws-ec2-metadata-token",await this.#S(e.transporter));let r=await this.#A(t,e.transporter),n=await this.#O(r,t,e.transporter);return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,token:n.Token}}async #S(e){let t={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return n.AuthClient.setMethodName(t,"#getImdsV2SessionToken"),(await e.request(t)).data}async #A(e,t){if(!this.securityCredentialsUrl)throw Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let r={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:e};return n.AuthClient.setMethodName(r,"#getAwsRoleName"),(await t.request(r)).data}async #O(e,t,r){let i={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${e}`,headers:t};return n.AuthClient.setMethodName(i,"#retrieveAwsSecurityCredentials"),(await r.request(i)).data}get #b(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get #T(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}}},90220,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AwsClient=void 0;let n=e.r(87573),i=e.r(6560),o=e.r(41033),s=e.r(15733),a=e.r(57612);class l extends i.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static #w="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor(e){super(e);const t=(0,s.originalOrCamelOptions)(e),r=t.get("credential_source"),n=t.get("aws_security_credentials_supplier");if(!r&&!n)throw Error("A credential source or AWS security credentials supplier must be specified.");if(r&&n)throw Error("Only one of credential source or AWS security credentials supplier can be specified.");if(n)this.awsSecurityCredentialsSupplier=n,this.regionalCredVerificationUrl=l.#w,this.credentialSourceType="programmatic";else{const e=(0,s.originalOrCamelOptions)(r);this.environmentId=e.get("environment_id");const t=e.get("region_url"),n=e.get("url"),i=e.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new o.DefaultAwsSecurityCredentialsSupplier({regionUrl:t,securityCredentialsUrl:n,imdsV2SessionTokenUrl:i}),this.regionalCredVerificationUrl=e.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let e=this.environmentId?.match(/^(aws)(\d+)$/);if(e&&this.regionalCredVerificationUrl){if(1!==parseInt(e[2],10))throw Error(`aws version "${e[2]}" is not supported in the current build.`)}else throw Error('No valid AWS "credential_source" provided')}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new n.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let e=await this.awsRequestSigner.getRequestOptions({...l.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),t=[];return a.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},e.headers).forEach((e,r)=>t.push({key:r,value:e})),encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:t}))}}r.AwsClient=l},71006,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InvalidSubjectTokenError=r.InvalidMessageFieldError=r.InvalidCodeFieldError=r.InvalidTokenTypeFieldError=r.InvalidExpirationTimeFieldError=r.InvalidSuccessFieldError=r.InvalidVersionFieldError=r.ExecutableResponseError=r.ExecutableResponse=void 0;let n="urn:ietf:params:oauth:token-type:saml2",i="urn:ietf:params:oauth:token-type:id_token",o="urn:ietf:params:oauth:token-type:jwt";r.ExecutableResponse=class{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor(e){if(!e.version)throw new a("Executable response must contain a 'version' field.");if(void 0===e.success)throw new l("Executable response must contain a 'success' field.");if(this.version=e.version,this.success=e.success,this.success){if(this.expirationTime=e.expiration_time,this.tokenType=e.token_type,this.tokenType!==n&&this.tokenType!==i&&this.tokenType!==o)throw new u(`Executable response must contain a 'token_type' field when successful and it must be one of ${i}, ${o}, or ${n}.`);if(this.tokenType===n){if(!e.saml_response)throw new p(`Executable response must contain a 'saml_response' field when token_type=${n}.`);this.subjectToken=e.saml_response}else{if(!e.id_token)throw new p(`Executable response must contain a 'id_token' field when token_type=${i} or ${o}.`);this.subjectToken=e.id_token}}else{if(!e.code)throw new c("Executable response must contain a 'code' field when unsuccessful.");if(!e.message)throw new d("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=e.code,this.errorMessage=e.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return void 0!==this.expirationTime&&this.expirationTime<Math.round(Date.now()/1e3)}};class s extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}r.ExecutableResponseError=s;class a extends s{}r.InvalidVersionFieldError=a;class l extends s{}r.InvalidSuccessFieldError=l,r.InvalidExpirationTimeFieldError=class extends s{};class u extends s{}r.InvalidTokenTypeFieldError=u;class c extends s{}r.InvalidCodeFieldError=c;class d extends s{}r.InvalidMessageFieldError=d;class p extends s{}r.InvalidSubjectTokenError=p},20336,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PluggableAuthHandler=r.ExecutableError=void 0;let n=e.r(71006),i=e.r(33405),o=e.r(22734);class s extends Error{code;constructor(e,t){super(`The executable failed with exit code: ${t} and error message: ${e}.`),this.code=t,Object.setPrototypeOf(this,new.target.prototype)}}r.ExecutableError=s;class a{commandComponents;timeoutMillis;outputFile;constructor(e){if(!e.command)throw Error("No command provided.");if(this.commandComponents=a.parseCommand(e.command),this.timeoutMillis=e.timeoutMillis,!this.timeoutMillis)throw Error("No timeoutMillis provided.");this.outputFile=e.outputFile}retrieveResponseFromExecutable(e){return new Promise((t,r)=>{let o=i.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(e)}}),a="";o.stdout.on("data",e=>{a+=e}),o.stderr.on("data",e=>{a+=e});let l=setTimeout(()=>(o.removeAllListeners(),o.kill(),r(Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);o.on("close",e=>{if(clearTimeout(l),0!==e)return r(new s(a,e.toString()));try{let e=JSON.parse(a),r=new n.ExecutableResponse(e);return t(r)}catch(e){if(e instanceof n.ExecutableResponseError)return r(e);return r(new n.ExecutableResponseError(`The executable returned an invalid response: ${a}`))}})})}async retrieveCachedResponse(){let e;if(!this.outputFile||0===this.outputFile.length)return;try{e=await o.promises.realpath(this.outputFile)}catch{return}if(!(await o.promises.lstat(e)).isFile())return;let t=await o.promises.readFile(e,{encoding:"utf8"});if(""!==t)try{let e=JSON.parse(t);if(new n.ExecutableResponse(e).isValid())return new n.ExecutableResponse(e);return}catch(e){if(e instanceof n.ExecutableResponseError)throw e;throw new n.ExecutableResponseError(`The output file contained an invalid response: ${t}`)}}static parseCommand(e){let t=e.match(/(?:[^\s"]+|"[^"]*")+/g);if(!t)throw Error(`Provided command: "${e}" could not be parsed.`);for(let e=0;e<t.length;e++)'"'===t[e][0]&&'"'===t[e].slice(-1)&&(t[e]=t[e].slice(1,-1));return t}}r.PluggableAuthHandler=a},23238,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PluggableAuthClient=r.ExecutableError=void 0;let n=e.r(6560),i=e.r(71006),o=e.r(20336);var s=e.r(20336);Object.defineProperty(r,"ExecutableError",{enumerable:!0,get:function(){return s.ExecutableError}});class a extends n.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor(e){if(super(e),!e.credential_source.executable||(this.command=e.credential_source.executable.command,!this.command))throw Error('No valid Pluggable Auth "credential_source" provided.');if(void 0===e.credential_source.executable.timeout_millis)this.timeoutMillis=3e4;else if(this.timeoutMillis=e.credential_source.executable.timeout_millis,this.timeoutMillis<5e3||this.timeoutMillis>12e4)throw Error("Timeout must be between 5000120000 milliseconds.");this.outputFile=e.credential_source.executable.output_file,this.handler=new o.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){let e;if("1"!==process.env.GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES)throw Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");if(this.outputFile&&(e=await this.handler.retrieveCachedResponse()),!e){let t=new Map;t.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),t.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),t.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&t.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let r=this.getServiceAccountEmail();r&&t.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",r),e=await this.handler.retrieveResponseFromExecutable(t)}if(e.version>1)throw Error("Version of executable is not currently supported, maximum supported version is 1.");if(!e.success)throw new o.ExecutableError(e.errorMessage,e.errorCode);if(this.outputFile&&!e.expirationTime)throw new i.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(e.isExpired())throw Error("Executable response is expired.");return e.subjectToken}}r.PluggableAuthClient=a},45037,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExternalAccountClient=void 0;let n=e.r(6560),i=e.r(76868),o=e.r(90220),s=e.r(23238);r.ExternalAccountClient=class{constructor(){throw Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(e){return e&&e.type===n.EXTERNAL_ACCOUNT_TYPE?e.credential_source?.environment_id?new o.AwsClient(e):e.credential_source?.executable?new s.PluggableAuthClient(e):new i.IdentityPoolClient(e):null}}},74158,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExternalAccountAuthorizedUserClient=r.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;let n=e.r(11656),i=e.r(46944),o=e.r(57612),s=e.r(88947),a=e.r(6560);r.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";class l extends i.OAuthClientAuthHandler{#C;constructor(e){super(e),this.#C=e.tokenRefreshEndpoint}async refreshToken(e,t){let r={...l.RETRY_CONFIG,url:this.#C,method:"POST",headers:t,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})};n.AuthClient.setMethodName(r,"refreshToken"),this.applyClientAuthenticationOptions(r);try{let e=await this.transporter.request(r),t=e.data;return t.res=e,t}catch(e){if(e instanceof o.GaxiosError&&e.response)throw(0,i.getErrorFromOAuthErrorResponse)(e.response.data,e);throw e}}}class u extends n.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor(e){super(e),e.universe_domain&&(this.universeDomain=e.universe_domain),this.refreshToken=e.refresh_token;const t={confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret};this.externalAccountAuthorizedUserHandler=new l({tokenRefreshEndpoint:e.token_url??"https://sts.{universeDomain}/v1/oauthtoken".replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:t}),this.cachedAccessToken=null,this.quotaProjectId=e.quota_project_id,"number"!=typeof e?.eagerRefreshThresholdMillis?this.eagerRefreshThresholdMillis=a.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!e?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),t=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(t)}request(e,t){if(!t)return this.requestAsync(e);this.requestAsync(e).then(e=>t(null,e),e=>t(e,e.response))}async requestAsync(e,t=!1){let r;try{let t=await this.getRequestHeaders();e.headers=o.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,t),r=await this.transporter.request(e)}catch(n){let r=n.response;if(r){let n=r.status,i=r.config.data instanceof s.Readable;if(!t&&(401===n||403===n)&&!i&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw n}return r}async refreshAccessTokenAsync(){let e=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+1e3*e.expires_in,res:e.res},void 0!==e.refresh_token&&(this.refreshToken=e.refresh_token),this.cachedAccessToken}isExpired(e){let t=new Date().getTime();return!!e.expiry_date&&t>=e.expiry_date-this.eagerRefreshThresholdMillis}}r.ExternalAccountAuthorizedUserClient=u},64794,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GoogleAuth=r.GoogleAuthExceptionMessages=void 0;let n=e.r(33405),i=e.r(22734),o=e.r(57612),s=e.r(82e3),a=e.r(46786),l=e.r(14747),u=e.r(59501),c=e.r(70814),d=e.r(80732),p=e.r(80243),h=e.r(24553),f=e.r(16260),g=e.r(36126),m=e.r(45037),y=e.r(6560),_=e.r(11656),E=e.r(74158),v=e.r(15733);r.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:"Unable to detect a Project Id in the current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_CREDENTIALS_FOUND:"Unable to find credentials in current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:"Unable to detect a Universe Domain in the current environment.\nTo learn more about Universe Domain retrieval, visit: \nhttps://cloud.google.com/compute/docs/metadata/predefined-metadata-keys"},r.GoogleAuth=class{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#R=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor(e={}){if(this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.clientOptions=e.clientOptions||{},this.jsonContent=e.credentials||null,this.apiKey=e.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw RangeError(r.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);e.universeDomain&&(this.clientOptions.universeDomain=e.universeDomain)}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(!e)return this.getProjectIdAsync();this.getProjectIdAsync().then(t=>e(null,t),e)}async getProjectIdOptional(){try{return await this.getProjectId()}catch(e){if(e instanceof Error&&e.message===r.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw e}}async findAndCacheProjectId(){let e=null;if(e||=await this.getProductionProjectId(),e||=await this.getFileProjectId(),e||=await this.getDefaultServiceProjectId(),e||=await this.getGCEProjectId(),e||=await this.getExternalAccountClientProjectId())return this._cachedProjectId=e,e;throw Error(r.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){let e;try{e=await s.universe("universe-domain"),e||=_.DEFAULT_UNIVERSE}catch(t){if(t&&t?.response?.status===404)e=_.DEFAULT_UNIVERSE;else throw t}return e}async getUniverseDomain(){let e=(0,v.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{e??=(await this.getClient()).universeDomain}catch{e??=_.DEFAULT_UNIVERSE}return e}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},t){let r;if("function"==typeof e?t=e:r=e,!t)return this.getApplicationDefaultAsync(r);this.getApplicationDefaultAsync(r).then(e=>t(null,e.credential,e.projectId),t)}async getApplicationDefaultAsync(e={}){let t;if(this.cachedCredential)return await this.#I(this.cachedCredential,null);if((t=await this._tryGetApplicationCredentialsFromEnvironmentVariable(e))||(t=await this._tryGetApplicationCredentialsFromWellKnownFile(e)))return t instanceof h.JWT?t.scopes=this.scopes:t instanceof y.BaseExternalAccountClient&&(t.scopes=this.getAnyScopes()),await this.#I(t);if(await this._checkIsGCE())return e.scopes=this.getAnyScopes(),await this.#I(new c.Compute(e));throw Error(r.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async #I(e,t=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let r=await this.getProjectIdOptional();return t&&(e.quotaProjectId=t),this.cachedCredential=e,{credential:e,projectId:r}}async _checkIsGCE(){return void 0===this.checkIsGCE&&(this.checkIsGCE=s.getGCPResidency()||await s.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(e){let t=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!t||0===t.length)return null;try{return this._getApplicationCredentialsFromFilePath(t,e)}catch(e){throw e instanceof Error&&(e.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${e.message}`),e}}async _tryGetApplicationCredentialsFromWellKnownFile(e){let t=null;if(this._isWindows())t=process.env.APPDATA;else{let e=process.env.HOME;e&&(t=l.join(e,".config"))}return(t&&(t=l.join(t,"gcloud","application_default_credentials.json"),i.existsSync(t)||(t=null)),t)?await this._getApplicationCredentialsFromFilePath(t,e):null}async _getApplicationCredentialsFromFilePath(e,t={}){if(!e||0===e.length)throw Error("The file path is invalid.");try{if(e=i.realpathSync(e),!i.lstatSync(e).isFile())throw Error()}catch(t){throw t instanceof Error&&(t.message=`The file at ${e} does not exist, or it is not a file. ${t.message}`),t}let r=i.createReadStream(e);return this.fromStream(r,t)}fromImpersonatedJSON(e){if(!e)throw Error("Must pass in a JSON object containing an  impersonated refresh token");if(e.type!==g.IMPERSONATED_ACCOUNT_TYPE)throw Error(`The incoming JSON object does not have the "${g.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!e.source_credentials)throw Error("The incoming JSON object does not contain a source_credentials field");if(!e.service_account_impersonation_url)throw Error("The incoming JSON object does not contain a service_account_impersonation_url field");let t=this.fromJSON(e.source_credentials);if(e.service_account_impersonation_url?.length>256)throw RangeError(`Target principal is too long: ${e.service_account_impersonation_url}`);let r=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(e.service_account_impersonation_url)?.groups?.target;if(!r)throw RangeError(`Cannot extract target principal from ${e.service_account_impersonation_url}`);let n=(this.scopes||e.scopes||this.defaultScopes)??[];return new g.Impersonated({...e,sourceClient:t,targetPrincipal:r,targetScopes:Array.isArray(n)?n:[n]})}fromJSON(e,t={}){let r,n=(0,v.originalOrCamelOptions)(t).get("universe_domain");return e.type===f.USER_REFRESH_ACCOUNT_TYPE?(r=new f.UserRefreshClient(t)).fromJSON(e):e.type===g.IMPERSONATED_ACCOUNT_TYPE?r=this.fromImpersonatedJSON(e):e.type===y.EXTERNAL_ACCOUNT_TYPE?(r=m.ExternalAccountClient.fromJSON({...e,...t})).scopes=this.getAnyScopes():e.type===E.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?r=new E.ExternalAccountAuthorizedUserClient({...e,...t}):(t.scopes=this.scopes,r=new h.JWT(t),this.setGapicJWTValues(r),r.fromJSON(e)),n&&(r.universeDomain=n),r}_cacheClientFromJSON(e,t){let r=this.fromJSON(e,t);return this.jsonContent=e,this.cachedCredential=r,r}fromStream(e,t={},r){let n={};if("function"==typeof t?r=t:n=t,!r)return this.fromStreamAsync(e,n);this.fromStreamAsync(e,n).then(e=>r(null,e),r)}fromStreamAsync(e,t){return new Promise((r,n)=>{if(!e)throw Error("Must pass in a stream containing the Google auth settings.");let i=[];e.setEncoding("utf8").on("error",n).on("data",e=>i.push(e)).on("end",()=>{try{try{let e=JSON.parse(i.join("")),n=this._cacheClientFromJSON(e,t);return r(n)}catch(t){if(!this.keyFilename)throw t;let e=new h.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=e,this.setGapicJWTValues(e),r(e)}}catch(e){return n(e)}})})}fromAPIKey(e,t={}){return new h.JWT({...t,apiKey:e})}_isWindows(){let e=a.platform();return!!e&&!!(e.length>=3)&&"win"===e.substring(0,3).toLowerCase()}async getDefaultServiceProjectId(){return new Promise(e=>{(0,n.exec)("gcloud config config-helper --format json",(t,r)=>{if(!t&&r)try{let t=JSON.parse(r).configuration.properties.core.project;e(t);return}catch(e){}e(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let e=await this.getClient();if(e&&e.projectId)return e.projectId}let e=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null}async getExternalAccountClientProjectId(){if(!this.jsonContent||this.jsonContent.type!==y.EXTERNAL_ACCOUNT_TYPE)return null;let e=await this.getClient();return await e.getProjectId()}async getGCEProjectId(){try{return await s.project("project-id")}catch(e){return null}}getCredentials(e){if(!e)return this.getCredentialsAsync();this.getCredentialsAsync().then(t=>e(null,t),e)}async getCredentialsAsync(){let e=await this.getClient();if(e instanceof g.Impersonated)return{client_email:e.getTargetPrincipal()};if(e instanceof y.BaseExternalAccountClient){let t=e.getServiceAccountEmail();if(t)return{client_email:t,universe_domain:e.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[e,t]=await Promise.all([s.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:e,universe_domain:t}}throw Error(r.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#R=this.#R||this.#P();try{return await this.#R}finally{this.#R=null}}async #P(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let e=l.resolve(this.keyFilename),t=i.createReadStream(e);return await this.fromStreamAsync(t,this.clientOptions)}if(this.apiKey){let e=await this.fromAPIKey(this.apiKey,this.clientOptions);e.scopes=this.scopes;let{credential:t}=await this.#I(e);return t}{let{credential:e}=await this.getApplicationDefaultAsync(this.clientOptions);return e}}async getIdTokenClient(e){let t=await this.getClient();if(!("fetchIdToken"in t))throw Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new d.IdTokenClient({targetAudience:e,idTokenProvider:t})}async getAccessToken(){let e=await this.getClient();return(await e.getAccessToken()).token}async getRequestHeaders(e){return(await this.getClient()).getRequestHeaders(e)}async authorizeRequest(e={}){let t=e.url,r=await this.getClient(),n=await r.getRequestHeaders(t);return e.headers=o.Gaxios.mergeHeaders(e.headers,n),e}async fetch(...e){return(await this.getClient()).fetch(...e)}async request(e){return(await this.getClient()).request(e)}getEnv(){return(0,p.getEnv)()}async sign(e,t){let r=await this.getClient(),n=await this.getUniverseDomain();if(t=t||`https://iamcredentials.${n}/v1/projects/-/serviceAccounts/`,r instanceof g.Impersonated)return(await r.sign(e)).signedBlob;let i=(0,u.createCrypto)();if(r instanceof h.JWT&&r.key)return await i.sign(r.key,e);let o=await this.getCredentials();if(!o.client_email)throw Error("Cannot sign data without `client_email`.");return this.signBlob(i,o.client_email,e,t)}async signBlob(e,t,r,n){let i=new URL(n+`${t}:signBlob`);return(await this.request({method:"POST",url:i.href,data:{payload:e.encodeBase64StringUtf8(r)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}}},3994,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IAMAuth=void 0,r.IAMAuth=class{selector;token;constructor(e,t){this.selector=e,this.token=t,this.selector=e,this.token=t}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}},56777,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DownscopedClient=r.EXPIRATION_TIME_OFFSET=r.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;let n=e.r(57612),i=e.r(88947),o=e.r(11656),s=e.r(5332);r.MAX_ACCESS_BOUNDARY_RULES_COUNT=10,r.EXPIRATION_TIME_OFFSET=3e5;class a extends o.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor(e,t={accessBoundary:{accessBoundaryRules:[]}}){if(super(e instanceof o.AuthClient?{}:e),e instanceof o.AuthClient?(this.authClient=e,this.credentialAccessBoundary=t):(this.authClient=e.authClient,this.credentialAccessBoundary=e.credentialAccessBoundary),0===this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length)throw Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>r.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw Error(`The provided access boundary has more than ${r.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(const e of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(0===e.availablePermissions.length)throw Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new s.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(e){if(!e.expiry_date)throw Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(e),this.cachedDownscopedAccessToken=e}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),t=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(t)}request(e,t){if(!t)return this.requestAsync(e);this.requestAsync(e).then(e=>t(null,e),e=>t(e,e.response))}async requestAsync(e,t=!1){let r;try{let t=await this.getRequestHeaders();e.headers=n.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,t),r=await this.transporter.request(e)}catch(n){let r=n.response;if(r){let n=r.status,o=r.config.data instanceof i.Readable;if(!t&&(401===n||403===n)&&!o&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw n}return r}async refreshAccessTokenAsync(){let e=(await this.authClient.getAccessToken()).token,t=await this.stsCredential.exchangeToken({grantType:"urn:ietf:params:oauth:grant-type:token-exchange",requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:e,subjectTokenType:"urn:ietf:params:oauth:token-type:access_token"},void 0,this.credentialAccessBoundary),r=this.authClient.credentials?.expiry_date||null,n=t.expires_in?new Date().getTime()+1e3*t.expires_in:r;return this.cachedDownscopedAccessToken={access_token:t.access_token,expiry_date:n,res:t.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(e){let t=new Date().getTime();return!!e.expiry_date&&t>=e.expiry_date-this.eagerRefreshThresholdMillis}}r.DownscopedClient=a},53534,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PassThroughClient=void 0;let n=e.r(11656);class i extends n.AuthClient{async request(e){return this.transporter.request(e)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}}r.PassThroughClient=i},47334,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GoogleAuth=r.auth=r.PassThroughClient=r.ExternalAccountAuthorizedUserClient=r.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=r.ExecutableError=r.PluggableAuthClient=r.DownscopedClient=r.BaseExternalAccountClient=r.ExternalAccountClient=r.IdentityPoolClient=r.AwsRequestSigner=r.AwsClient=r.UserRefreshClient=r.LoginTicket=r.ClientAuthentication=r.OAuth2Client=r.CodeChallengeMethod=r.Impersonated=r.JWT=r.JWTAccess=r.IdTokenClient=r.IAMAuth=r.GCPEnv=r.Compute=r.DEFAULT_UNIVERSE=r.AuthClient=r.gaxios=r.gcpMetadata=void 0;let n=e.r(64794);Object.defineProperty(r,"GoogleAuth",{enumerable:!0,get:function(){return n.GoogleAuth}}),r.gcpMetadata=e.r(82e3),r.gaxios=e.r(57612);var i=e.r(11656);Object.defineProperty(r,"AuthClient",{enumerable:!0,get:function(){return i.AuthClient}}),Object.defineProperty(r,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return i.DEFAULT_UNIVERSE}});var o=e.r(70814);Object.defineProperty(r,"Compute",{enumerable:!0,get:function(){return o.Compute}});var s=e.r(80243);Object.defineProperty(r,"GCPEnv",{enumerable:!0,get:function(){return s.GCPEnv}});var a=e.r(3994);Object.defineProperty(r,"IAMAuth",{enumerable:!0,get:function(){return a.IAMAuth}});var l=e.r(80732);Object.defineProperty(r,"IdTokenClient",{enumerable:!0,get:function(){return l.IdTokenClient}});var u=e.r(10247);Object.defineProperty(r,"JWTAccess",{enumerable:!0,get:function(){return u.JWTAccess}});var c=e.r(24553);Object.defineProperty(r,"JWT",{enumerable:!0,get:function(){return c.JWT}});var d=e.r(36126);Object.defineProperty(r,"Impersonated",{enumerable:!0,get:function(){return d.Impersonated}});var p=e.r(701);Object.defineProperty(r,"CodeChallengeMethod",{enumerable:!0,get:function(){return p.CodeChallengeMethod}}),Object.defineProperty(r,"OAuth2Client",{enumerable:!0,get:function(){return p.OAuth2Client}}),Object.defineProperty(r,"ClientAuthentication",{enumerable:!0,get:function(){return p.ClientAuthentication}});var h=e.r(42602);Object.defineProperty(r,"LoginTicket",{enumerable:!0,get:function(){return h.LoginTicket}});var f=e.r(16260);Object.defineProperty(r,"UserRefreshClient",{enumerable:!0,get:function(){return f.UserRefreshClient}});var g=e.r(90220);Object.defineProperty(r,"AwsClient",{enumerable:!0,get:function(){return g.AwsClient}});var m=e.r(87573);Object.defineProperty(r,"AwsRequestSigner",{enumerable:!0,get:function(){return m.AwsRequestSigner}});var y=e.r(76868);Object.defineProperty(r,"IdentityPoolClient",{enumerable:!0,get:function(){return y.IdentityPoolClient}});var _=e.r(45037);Object.defineProperty(r,"ExternalAccountClient",{enumerable:!0,get:function(){return _.ExternalAccountClient}});var E=e.r(6560);Object.defineProperty(r,"BaseExternalAccountClient",{enumerable:!0,get:function(){return E.BaseExternalAccountClient}});var v=e.r(56777);Object.defineProperty(r,"DownscopedClient",{enumerable:!0,get:function(){return v.DownscopedClient}});var b=e.r(23238);Object.defineProperty(r,"PluggableAuthClient",{enumerable:!0,get:function(){return b.PluggableAuthClient}}),Object.defineProperty(r,"ExecutableError",{enumerable:!0,get:function(){return b.ExecutableError}});var S=e.r(74158);Object.defineProperty(r,"EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE",{enumerable:!0,get:function(){return S.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE}}),Object.defineProperty(r,"ExternalAccountAuthorizedUserClient",{enumerable:!0,get:function(){return S.ExternalAccountAuthorizedUserClient}});var T=e.r(53534);Object.defineProperty(r,"PassThroughClient",{enumerable:!0,get:function(){return T.PassThroughClient}}),r.auth=new n.GoogleAuth},24868,(e,t,r)=>{t.exports=e.x("fs/promises",()=>require("fs/promises"))},88646,(e,t,r)=>{t.exports=e.x("node:stream/promises",()=>require("node:stream/promises"))},6461,(e,t,r)=>{t.exports=e.x("zlib",()=>require("zlib"))},74836,(e,t,r)=>{"use strict";let n=["nodebuffer","arraybuffer","fragments"],i="undefined"!=typeof Blob;i&&n.push("blob"),t.exports={BINARY_TYPES:n,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:i,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},97970,(e,t,r)=>{"use strict";let{EMPTY_BUFFER:n}=e.r(74836),i=Buffer[Symbol.species];function o(e,t,r,n,i){for(let o=0;o<i;o++)r[n+o]=e[o]^t[3&o]}function s(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}function a(e){let t;return(a.readOnly=!0,Buffer.isBuffer(e))?e:(e instanceof ArrayBuffer?t=new i(e):ArrayBuffer.isView(e)?t=new i(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),a.readOnly=!1),t)}if(t.exports={concat:function(e,t){if(0===e.length)return n;if(1===e.length)return e[0];let r=Buffer.allocUnsafe(t),o=0;for(let t=0;t<e.length;t++){let n=e[t];r.set(n,o),o+=n.length}return o<t?new i(r.buffer,r.byteOffset,o):r},mask:o,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:a,unmask:s},!process.env.WS_NO_BUFFER_UTIL)try{let e=(()=>{let e=Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e})();t.exports.mask=function(t,r,n,i,s){s<48?o(t,r,n,i,s):e.mask(t,r,n,i,s)},t.exports.unmask=function(t,r){t.length<32?s(t,r):e.unmask(t,r)}}catch(e){}},62048,(e,t,r)=>{"use strict";let n=Symbol("kDone"),i=Symbol("kRun");t.exports=class{constructor(e){this[n]=()=>{this.pending--,this[i]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[i]()}[i](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[n])}}}},80295,(e,t,r)=>{"use strict";let n,i=e.r(6461),o=e.r(97970),s=e.r(62048),{kStatusCode:a}=e.r(74836),l=Buffer[Symbol.species],u=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),d=Symbol("total-length"),p=Symbol("callback"),h=Symbol("buffers"),f=Symbol("error");function g(e){this[h].push(e),this[d]+=e.length}function m(e){(this[d]+=e.length,this[c]._maxPayload<1||this[d]<=this[c]._maxPayload)?this[h].push(e):(this[f]=RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][a]=1009,this.removeListener("data",m),this.reset())}function y(e){(this[c]._inflate=null,this[f])?this[p](this[f]):(e[a]=1007,this[p](e))}t.exports=class{constructor(e,t,r){this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,n||(n=new s(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[p];this._deflate.close(),this._deflate=null,e&&e(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,r=e.find(e=>(!1!==t.serverNoContextTakeover||!e.server_no_context_takeover)&&(!e.server_max_window_bits||!1!==t.serverMaxWindowBits&&("number"!=typeof t.serverMaxWindowBits||!(t.serverMaxWindowBits>e.server_max_window_bits)))&&("number"!=typeof t.clientMaxWindowBits||!!e.client_max_window_bits));if(!r)throw Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:(!0===r.client_max_window_bits||!1===t.clientMaxWindowBits)&&delete r.client_max_window_bits,r}acceptAsClient(e){let t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let r=e[t];if(r.length>1)throw Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if("client_no_context_takeover"===t||"server_no_context_takeover"===t){if(!0!==r)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else throw Error(`Unknown parameter "${t}"`);e[t]=r})}),e}decompress(e,t,r){n.add(n=>{this._decompress(e,t,(e,t)=>{n(),r(e,t)})})}compress(e,t,r){n.add(n=>{this._compress(e,t,(e,t)=>{n(),r(e,t)})})}_decompress(e,t,r){let n=this._isServer?"client":"server";if(!this._inflate){let e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[c]=this,this._inflate[d]=0,this._inflate[h]=[],this._inflate.on("error",y),this._inflate.on("data",m)}this._inflate[p]=r,this._inflate.write(e),t&&this._inflate.write(u),this._inflate.flush(()=>{let e=this._inflate[f];if(e){this._inflate.close(),this._inflate=null,r(e);return}let i=o.concat(this._inflate[h],this._inflate[d]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[d]=0,this._inflate[h]=[],t&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),r(null,i)})}_compress(e,t,r){let n=this._isServer?"server":"client";if(!this._deflate){let e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[d]=0,this._deflate[h]=[],this._deflate.on("data",g)}this._deflate[p]=r,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=o.concat(this._deflate[h],this._deflate[d]);t&&(e=new l(e.buffer,e.byteOffset,e.length-4)),this._deflate[p]=null,this._deflate[d]=0,this._deflate[h]=[],t&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),r(null,e)})}}},58739,(e,t,r)=>{"use strict";let{isUtf8:n}=e.r(874),{hasBlob:i}=e.r(74836);function o(e){let t=e.length,r=0;for(;r<t;)if((128&e[r])==0)r++;else if((224&e[r])==192){if(r+1===t||(192&e[r+1])!=128||(254&e[r])==192)return!1;r+=2}else if((240&e[r])==224){if(r+2>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||224===e[r]&&(224&e[r+1])==128||237===e[r]&&(224&e[r+1])==160)return!1;r+=3}else{if((248&e[r])!=240||r+3>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||(192&e[r+3])!=128||240===e[r]&&(240&e[r+1])==128||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}if(t.exports={isBlob:function(e){return i&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:o,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},n)t.exports.isValidUTF8=function(e){return e.length<24?o(e):n(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let e=(()=>{let e=Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e})();t.exports.isValidUTF8=function(t){return t.length<32?o(t):e(t)}}catch(e){}},29485,(e,t,r)=>{"use strict";let{Writable:n}=e.r(88947),i=e.r(80295),{BINARY_TYPES:o,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:l}=e.r(74836),{concat:u,toArrayBuffer:c,unmask:d}=e.r(97970),{isValidStatusCode:p,isValidUTF8:h}=e.r(58739),f=Buffer[Symbol.species];t.exports=class extends n{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||o[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[l]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let t=this._buffers[0];return this._buffers[0]=new f(t.buffer,t.byteOffset+e,t.length-e),new f(t.buffer,t.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=new f(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0)return t}startLoop(e){this._loop=!0;do switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:this._loop=!1;return}while(this._loop)this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if((48&t[0])!=0)return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let r=(64&t[0])==64;if(r&&!this._extensions[i.extensionName])return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&t[0])==128,this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=r}else{if(!(this._opcode>7)||!(this._opcode<11))return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&t[1])==128,this._isServer){if(!this._masked)return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),r=t.readUInt32BE(0);r>2097151?e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=0x100000000*r+t.readUInt32BE(4),this.haveLength(e))}haveLength(e){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&d(t,this._mask)}if(this._opcode>7)return void this.controlMessage(t,e);if(this._compressed){this._state=5,this.decompress(t,e);return}t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void t(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)})}dataMessage(e){if(!this._fin){this._state=0;return}let t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?u(r,t):"arraybuffer"===this._binaryType?c(u(r,t)):"blob"===this._binaryType?new Blob(r):r,this._allowSynchronousEvents?(this.emit("message",n,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",n,!0),this._state=0,this.startLoop(e)}))}else{let n=u(r,t);if(!this._skipUTF8Validation&&!h(n))return void e(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",n,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",n,!1),this._state=0,this.startLoop(e)}))}}controlMessage(e,t){if(8===this._opcode){if(0===e.length)this._loop=!1,this.emit("conclude",1005,s),this.end();else{let r=e.readUInt16BE(0);if(!p(r))return void t(this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let n=new f(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!h(n))return void t(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",r,n),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)}))}createError(e,t,r,n,i){this._loop=!1,this._errored=!0;let o=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,this.createError),o.code=i,o[a]=n,o}}},16735,(e,t,r)=>{"use strict";let n,{Duplex:i}=e.r(88947),{randomFillSync:o}=e.r(54799),s=e.r(80295),{EMPTY_BUFFER:a,kWebSocket:l,NOOP:u}=e.r(74836),{isBlob:c,isValidStatusCode:d}=e.r(58739),{mask:p,toBuffer:h}=e.r(97970),f=Symbol("kByteLength"),g=Buffer.alloc(4),m=8192;class y{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=u,this[l]=void 0}static frame(e,t){let r,i,s=!1,a=2,l=!1;t.mask&&(r=t.maskBuffer||g,t.generateMask?t.generateMask(r):(8192===m&&(void 0===n&&(n=Buffer.alloc(8192)),o(n,0,8192),m=0),r[0]=n[m++],r[1]=n[m++],r[2]=n[m++],r[3]=n[m++]),l=(r[0]|r[1]|r[2]|r[3])==0,a=6),"string"==typeof e?i=(!t.mask||l)&&void 0!==t[f]?t[f]:(e=Buffer.from(e)).length:(i=e.length,s=t.mask&&t.readOnly&&!l);let u=i;i>=65536?(a+=8,u=127):i>125&&(a+=2,u=126);let c=Buffer.allocUnsafe(s?i+a:a);return(c[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(c[0]|=64),c[1]=u,126===u?c.writeUInt16BE(i,2):127===u&&(c[2]=c[3]=0,c.writeUIntBE(i,4,6)),t.mask)?(c[1]|=128,c[a-4]=r[0],c[a-3]=r[1],c[a-2]=r[2],c[a-1]=r[3],l)?[c,e]:s?(p(e,r,c,a,i),[c]):(p(e,r,e,0,i),[c,e]):[c,e]}close(e,t,r,n){let i;if(void 0===e)i=a;else if("number"==typeof e&&d(e))if(void 0!==t&&t.length){let r=Buffer.byteLength(t);if(r>123)throw RangeError("The message must not be greater than 123 bytes");(i=Buffer.allocUnsafe(2+r)).writeUInt16BE(e,0),"string"==typeof t?i.write(t,2):i.set(t,2)}else(i=Buffer.allocUnsafe(2)).writeUInt16BE(e,0);else throw TypeError("First argument must be a valid error code number");let o={[f]:i.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,i,!1,o,n]):this.sendFrame(y.frame(i,o),n)}ping(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):c(e)?(n=e.size,i=!1):(n=(e=h(e)).length,i=h.readOnly),n>125)throw RangeError("The data size must not be greater than 125 bytes");let o={[f]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};c(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,r]):this.getBlobData(e,!1,o,r):0!==this._state?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(y.frame(e,o),r)}pong(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):c(e)?(n=e.size,i=!1):(n=(e=h(e)).length,i=h.readOnly),n>125)throw RangeError("The data size must not be greater than 125 bytes");let o={[f]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};c(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,r]):this.getBlobData(e,!1,o,r):0!==this._state?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(y.frame(e,o),r)}send(e,t,r){let n,i,o=this._extensions[s.extensionName],a=t.binary?2:1,l=t.compress;"string"==typeof e?(n=Buffer.byteLength(e),i=!1):c(e)?(n=e.size,i=!1):(n=(e=h(e)).length,i=h.readOnly),this._firstFragment?(this._firstFragment=!1,l&&o&&o.params[o._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=n>=o._threshold),this._compress=l):(l=!1,a=0),t.fin&&(this._firstFragment=!0);let u={[f]:n,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:i,rsv1:l};c(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,u,r]):this.getBlobData(e,this._compress,u,r):0!==this._state?this.enqueue([this.dispatch,e,this._compress,u,r]):this.dispatch(e,this._compress,u,r)}getBlobData(e,t,r,n){this._bufferedBytes+=r[f],this._state=2,e.arrayBuffer().then(e=>{if(this._socket.destroyed){let e=Error("The socket was closed while the blob was being read");process.nextTick(_,this,e,n);return}this._bufferedBytes-=r[f];let i=h(e);t?this.dispatch(i,t,r,n):(this._state=0,this.sendFrame(y.frame(i,r),n),this.dequeue())}).catch(e=>{process.nextTick(E,this,e,n)})}dispatch(e,t,r,n){if(!t)return void this.sendFrame(y.frame(e,r),n);let i=this._extensions[s.extensionName];this._bufferedBytes+=r[f],this._state=1,i.compress(e,r.fin,(e,t)=>{this._socket.destroyed?_(this,Error("The socket was closed while data was being compressed"),n):(this._bufferedBytes-=r[f],this._state=0,r.readOnly=!1,this.sendFrame(y.frame(t,r),n),this.dequeue())})}dequeue(){for(;0===this._state&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][f],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][f],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}function _(e,t,r){"function"==typeof r&&r(t);for(let r=0;r<e._queue.length;r++){let n=e._queue[r],i=n[n.length-1];"function"==typeof i&&i(t)}}function E(e,t,r){_(e,t,r),e.onerror(t)}t.exports=y},70494,(e,t,r)=>{"use strict";let{kForOnEventAttribute:n,kListener:i}=e.r(74836),o=Symbol("kCode"),s=Symbol("kData"),a=Symbol("kError"),l=Symbol("kMessage"),u=Symbol("kReason"),c=Symbol("kTarget"),d=Symbol("kType"),p=Symbol("kWasClean");class h{constructor(e){this[c]=null,this[d]=e}get target(){return this[c]}get type(){return this[d]}}Object.defineProperty(h.prototype,"target",{enumerable:!0}),Object.defineProperty(h.prototype,"type",{enumerable:!0});class f extends h{constructor(e,t={}){super(e),this[o]=void 0===t.code?0:t.code,this[u]=void 0===t.reason?"":t.reason,this[p]=void 0!==t.wasClean&&t.wasClean}get code(){return this[o]}get reason(){return this[u]}get wasClean(){return this[p]}}Object.defineProperty(f.prototype,"code",{enumerable:!0}),Object.defineProperty(f.prototype,"reason",{enumerable:!0}),Object.defineProperty(f.prototype,"wasClean",{enumerable:!0});class g extends h{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[l]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[l]}}Object.defineProperty(g.prototype,"error",{enumerable:!0}),Object.defineProperty(g.prototype,"message",{enumerable:!0});class m extends h{constructor(e,t={}){super(e),this[s]=void 0===t.data?null:t.data}get data(){return this[s]}}function y(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}Object.defineProperty(m.prototype,"data",{enumerable:!0}),t.exports={CloseEvent:f,ErrorEvent:g,Event:h,EventTarget:{addEventListener(e,t,r={}){let o;for(let o of this.listeners(e))if(!r[n]&&o[i]===t&&!o[n])return;if("message"===e)o=function(e,r){let n=new m("message",{data:r?e:e.toString()});n[c]=this,y(t,this,n)};else if("close"===e)o=function(e,r){let n=new f("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});n[c]=this,y(t,this,n)};else if("error"===e)o=function(e){let r=new g("error",{error:e,message:e.message});r[c]=this,y(t,this,r)};else{if("open"!==e)return;o=function(){let e=new h("open");e[c]=this,y(t,this,e)}}o[n]=!!r[n],o[i]=t,r.once?this.once(e,o):this.on(e,o)},removeEventListener(e,t){for(let r of this.listeners(e))if(r[i]===t&&!r[n]){this.removeListener(e,r);break}}},MessageEvent:m}},96903,(e,t,r)=>{"use strict";let{tokenChars:n}=e.r(58739);function i(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}t.exports={format:function(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){let t,r,o=Object.create(null),s=Object.create(null),a=!1,l=!1,u=!1,c=-1,d=-1,p=-1,h=0;for(;h<e.length;h++)if(d=e.charCodeAt(h),void 0===t)if(-1===p&&1===n[d])-1===c&&(c=h);else if(0!==h&&(32===d||9===d))-1===p&&-1!==c&&(p=h);else if(59===d||44===d){if(-1===c)throw SyntaxError(`Unexpected character at index ${h}`);-1===p&&(p=h);let r=e.slice(c,p);44===d?(i(o,r,s),s=Object.create(null)):t=r,c=p=-1}else throw SyntaxError(`Unexpected character at index ${h}`);else if(void 0===r)if(-1===p&&1===n[d])-1===c&&(c=h);else if(32===d||9===d)-1===p&&-1!==c&&(p=h);else if(59===d||44===d){if(-1===c)throw SyntaxError(`Unexpected character at index ${h}`);-1===p&&(p=h),i(s,e.slice(c,p),!0),44===d&&(i(o,t,s),s=Object.create(null),t=void 0),c=p=-1}else if(61===d&&-1!==c&&-1===p)r=e.slice(c,h),c=p=-1;else throw SyntaxError(`Unexpected character at index ${h}`);else if(l){if(1!==n[d])throw SyntaxError(`Unexpected character at index ${h}`);-1===c?c=h:a||(a=!0),l=!1}else if(u)if(1===n[d])-1===c&&(c=h);else if(34===d&&-1!==c)u=!1,p=h;else if(92===d)l=!0;else throw SyntaxError(`Unexpected character at index ${h}`);else if(34===d&&61===e.charCodeAt(h-1))u=!0;else if(-1===p&&1===n[d])-1===c&&(c=h);else if(-1!==c&&(32===d||9===d))-1===p&&(p=h);else if(59===d||44===d){if(-1===c)throw SyntaxError(`Unexpected character at index ${h}`);-1===p&&(p=h);let n=e.slice(c,p);a&&(n=n.replace(/\\/g,""),a=!1),i(s,r,n),44===d&&(i(o,t,s),s=Object.create(null),t=void 0),r=void 0,c=p=-1}else throw SyntaxError(`Unexpected character at index ${h}`);if(-1===c||u||32===d||9===d)throw SyntaxError("Unexpected end of input");-1===p&&(p=h);let f=e.slice(c,p);return void 0===t?i(o,f,s):(void 0===r?i(s,f,!0):a?i(s,r,f.replace(/\\/g,"")):i(s,r,f),i(o,t,s)),o}}},35065,(e,t,r)=>{"use strict";let n=e.r(27699),i=e.r(24836),o=e.r(21517),s=e.r(4446),a=e.r(55004),{randomBytes:l,createHash:u}=e.r(54799),{Duplex:c,Readable:d}=e.r(88947),{URL:p}=e.r(92509),h=e.r(80295),f=e.r(29485),g=e.r(16735),{isBlob:m}=e.r(58739),{BINARY_TYPES:y,EMPTY_BUFFER:_,GUID:E,kForOnEventAttribute:v,kListener:b,kStatusCode:S,kWebSocket:T,NOOP:A}=e.r(74836),{EventTarget:{addEventListener:O,removeEventListener:w}}=e.r(70494),{format:C,parse:R}=e.r(96903),{toBuffer:I}=e.r(97970),P=Symbol("kAborted"),N=[8,13],x=["CONNECTING","OPEN","CLOSING","CLOSED"],k=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class D extends n{constructor(e,t,r){super(),this._binaryType=y[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=_,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=D.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),function e(t,r,n,s){let a,c,d,f,g={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:N[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=g.autoPong,!N.includes(g.protocolVersion))throw RangeError(`Unsupported protocol version: ${g.protocolVersion} (supported versions: ${N.join(", ")})`);if(r instanceof p)a=r;else try{a=new p(r)}catch(e){throw SyntaxError(`Invalid URL: ${r}`)}"http:"===a.protocol?a.protocol="ws:":"https:"===a.protocol&&(a.protocol="wss:"),t._url=a.href;let m="wss:"===a.protocol,y="ws+unix:"===a.protocol;if("ws:"===a.protocol||m||y?y&&!a.pathname?c="The URL's pathname is empty":a.hash&&(c="The URL contains a fragment identifier"):c='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',c){let e=SyntaxError(c);if(0!==t._redirects)return void M(t,e);throw e}let _=m?443:80,v=l(16).toString("base64"),b=m?i.request:o.request,S=new Set;if(g.createConnection=g.createConnection||(m?j:U),g.defaultPort=g.defaultPort||_,g.port=a.port||_,g.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,g.headers={...g.headers,"Sec-WebSocket-Version":g.protocolVersion,"Sec-WebSocket-Key":v,Connection:"Upgrade",Upgrade:"websocket"},g.path=a.pathname+a.search,g.timeout=g.handshakeTimeout,g.perMessageDeflate&&(d=new h(!0!==g.perMessageDeflate?g.perMessageDeflate:{},!1,g.maxPayload),g.headers["Sec-WebSocket-Extensions"]=C({[h.extensionName]:d.offer()})),n.length){for(let e of n){if("string"!=typeof e||!k.test(e)||S.has(e))throw SyntaxError("An invalid or duplicated subprotocol was specified");S.add(e)}g.headers["Sec-WebSocket-Protocol"]=n.join(",")}if(g.origin&&(g.protocolVersion<13?g.headers["Sec-WebSocket-Origin"]=g.origin:g.headers.Origin=g.origin),(a.username||a.password)&&(g.auth=`${a.username}:${a.password}`),y){let e=g.path.split(":");g.socketPath=e[0],g.path=e[1]}if(g.followRedirects){if(0===t._redirects){t._originalIpc=y,t._originalSecure=m,t._originalHostOrSocketPath=y?g.socketPath:a.host;let e=s&&s.headers;if(s={...s,headers:{}},e)for(let[t,r]of Object.entries(e))s.headers[t.toLowerCase()]=r}else if(0===t.listenerCount("redirect")){let e=y?!!t._originalIpc&&g.socketPath===t._originalHostOrSocketPath:!t._originalIpc&&a.host===t._originalHostOrSocketPath;e&&(!t._originalSecure||m)||(delete g.headers.authorization,delete g.headers.cookie,e||delete g.headers.host,g.auth=void 0)}g.auth&&!s.headers.authorization&&(s.headers.authorization="Basic "+Buffer.from(g.auth).toString("base64")),f=t._req=b(g),t._redirects&&t.emit("redirect",t.url,f)}else f=t._req=b(g);g.timeout&&f.on("timeout",()=>{L(t,f,"Opening handshake has timed out")}),f.on("error",e=>{null===f||f[P]||(f=t._req=null,M(t,e))}),f.on("response",i=>{let o=i.headers.location,a=i.statusCode;if(o&&g.followRedirects&&a>=300&&a<400){let i;if(++t._redirects>g.maxRedirects)return void L(t,f,"Maximum redirects exceeded");f.abort();try{i=new p(o,r)}catch(e){M(t,SyntaxError(`Invalid URL: ${o}`));return}e(t,i,n,s)}else t.emit("unexpected-response",f,i)||L(t,f,`Unexpected server response: ${i.statusCode}`)}),f.on("upgrade",(e,r,n)=>{let i;if(t.emit("upgrade",e),t.readyState!==D.CONNECTING)return;f=t._req=null;let o=e.headers.upgrade;if(void 0===o||"websocket"!==o.toLowerCase())return void L(t,r,"Invalid Upgrade header");let s=u("sha1").update(v+E).digest("base64");if(e.headers["sec-websocket-accept"]!==s)return void L(t,r,"Invalid Sec-WebSocket-Accept header");let a=e.headers["sec-websocket-protocol"];if(void 0!==a?S.size?S.has(a)||(i="Server sent an invalid subprotocol"):i="Server sent a subprotocol but none was requested":S.size&&(i="Server sent no subprotocol"),i)return void L(t,r,i);a&&(t._protocol=a);let l=e.headers["sec-websocket-extensions"];if(void 0!==l){let e;if(!d)return void L(t,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{e=R(l)}catch(e){L(t,r,"Invalid Sec-WebSocket-Extensions header");return}let n=Object.keys(e);if(1!==n.length||n[0]!==h.extensionName)return void L(t,r,"Server indicated an extension that was not requested");try{d.accept(e[h.extensionName])}catch(e){L(t,r,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[h.extensionName]=d}t.setSocket(r,n,{allowSynchronousEvents:g.allowSynchronousEvents,generateMask:g.generateMask,maxPayload:g.maxPayload,skipUTF8Validation:g.skipUTF8Validation})}),g.finishRequest?g.finishRequest(f,t):f.end()}(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){y.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){let n=new f({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation}),i=new g(e,this._extensions,r.generateMask);this._receiver=n,this._sender=i,this._socket=e,n[T]=this,i[T]=this,e[T]=this,n.on("conclude",F),n.on("drain",q),n.on("error",B),n.on("message",V),n.on("ping",$),n.on("pong",W),i.onerror=K,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",z),e.on("data",X),e.on("end",Z),e.on("error",Q),this._readyState=D.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=D.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[h.extensionName]&&this._extensions[h.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=D.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==D.CLOSED){if(this.readyState===D.CONNECTING)return void L(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===D.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=D.CLOSING,this._sender.close(e,t,!this._isServer,e=>{!e&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),Y(this)}}pause(){this.readyState!==D.CONNECTING&&this.readyState!==D.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===D.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==D.OPEN)?G(this,e,r):(void 0===t&&(t=!this._isServer),this._sender.ping(e||_,t,r))}pong(e,t,r){if(this.readyState===D.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==D.OPEN)?G(this,e,r):(void 0===t&&(t=!this._isServer),this._sender.pong(e||_,t,r))}resume(){this.readyState!==D.CONNECTING&&this.readyState!==D.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===D.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==D.OPEN)return void G(this,e,r);let n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[h.extensionName]||(n.compress=!1),this._sender.send(e||_,n,r)}terminate(){if(this.readyState!==D.CLOSED){if(this.readyState===D.CONNECTING)return void L(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=D.CLOSING,this._socket.destroy())}}}function M(e,t){e._readyState=D.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function U(e){return e.path=e.socketPath,s.connect(e)}function j(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=s.isIP(e.host)?"":e.host),a.connect(e)}function L(e,t,r){e._readyState=D.CLOSING;let n=Error(r);Error.captureStackTrace(n,L),t.setHeader?(t[P]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(M,e,n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function G(e,t,r){if(t){let r=m(t)?t.size:I(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){let t=Error(`WebSocket is not open: readyState ${e.readyState} (${x[e.readyState]})`);process.nextTick(r,t)}}function F(e,t){let r=this[T];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[T]&&(r._socket.removeListener("data",X),process.nextTick(J,r._socket),1005===e?r.close():r.close(e,t))}function q(){let e=this[T];e.isPaused||e._socket.resume()}function B(e){let t=this[T];void 0!==t._socket[T]&&(t._socket.removeListener("data",X),process.nextTick(J,t._socket),t.close(e[S])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function H(){this[T].emitClose()}function V(e,t){this[T].emit("message",e,t)}function $(e){let t=this[T];t._autoPong&&t.pong(e,!this._isServer,A),t.emit("ping",e)}function W(e){this[T].emit("pong",e)}function J(e){e.resume()}function K(e){let t=this[T];t.readyState!==D.CLOSED&&(t.readyState===D.OPEN&&(t._readyState=D.CLOSING,Y(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function Y(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function z(){let e,t=this[T];this.removeListener("close",z),this.removeListener("data",X),this.removeListener("end",Z),t._readyState=D.CLOSING,this._readableState.endEmitted||t._closeFrameReceived||t._receiver._writableState.errorEmitted||null===(e=t._socket.read())||t._receiver.write(e),t._receiver.end(),this[T]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",H),t._receiver.on("finish",H))}function X(e){this[T]._receiver.write(e)||this.pause()}function Z(){let e=this[T];e._readyState=D.CLOSING,e._receiver.end(),this.end()}function Q(){let e=this[T];this.removeListener("error",Q),this.on("error",A),e&&(e._readyState=D.CLOSING,this.destroy())}Object.defineProperty(D,"CONNECTING",{enumerable:!0,value:x.indexOf("CONNECTING")}),Object.defineProperty(D.prototype,"CONNECTING",{enumerable:!0,value:x.indexOf("CONNECTING")}),Object.defineProperty(D,"OPEN",{enumerable:!0,value:x.indexOf("OPEN")}),Object.defineProperty(D.prototype,"OPEN",{enumerable:!0,value:x.indexOf("OPEN")}),Object.defineProperty(D,"CLOSING",{enumerable:!0,value:x.indexOf("CLOSING")}),Object.defineProperty(D.prototype,"CLOSING",{enumerable:!0,value:x.indexOf("CLOSING")}),Object.defineProperty(D,"CLOSED",{enumerable:!0,value:x.indexOf("CLOSED")}),Object.defineProperty(D.prototype,"CLOSED",{enumerable:!0,value:x.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(D.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(D.prototype,`on${e}`,{enumerable:!0,get(){for(let t of this.listeners(e))if(t[v])return t[b];return null},set(t){for(let t of this.listeners(e))if(t[v]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[v]:!0})}})}),D.prototype.addEventListener=O,D.prototype.removeEventListener=w,t.exports=D},21365,(e,t,r)=>{"use strict";e.r(35065);let{Duplex:n}=e.r(88947);function i(e){e.emit("close")}function o(){!this.destroyed&&this._writableState.finished&&this.destroy()}function s(e){this.removeListener("error",s),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}t.exports=function(e,t){let r=!0,a=new n({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t,r){let n=!r&&a._readableState.objectMode?t.toString():t;a.push(n)||e.pause()}),e.once("error",function(e){a.destroyed||(r=!1,a.destroy(e))}),e.once("close",function(){a.destroyed||a.push(null)}),a._destroy=function(t,n){if(e.readyState===e.CLOSED){n(t),process.nextTick(i,a);return}let o=!1;e.once("error",function(e){o=!0,n(e)}),e.once("close",function(){o||n(t),process.nextTick(i,a)}),r&&e.terminate()},a._final=function(t){e.readyState===e.CONNECTING?e.once("open",function(){a._final(t)}):null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",function(){t()}),e.close()))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,r,n){e.readyState===e.CONNECTING?e.once("open",function(){a._write(t,r,n)}):e.send(t,n)},a.on("end",o),a.on("error",s),a}},42977,(e,t,r)=>{"use strict";let{tokenChars:n}=e.r(58739);t.exports={parse:function(e){let t=new Set,r=-1,i=-1,o=0;for(;o<e.length;o++){let s=e.charCodeAt(o);if(-1===i&&1===n[s])-1===r&&(r=o);else if(0!==o&&(32===s||9===s))-1===i&&-1!==r&&(i=o);else if(44===s){if(-1===r)throw SyntaxError(`Unexpected character at index ${o}`);-1===i&&(i=o);let n=e.slice(r,i);if(t.has(n))throw SyntaxError(`The "${n}" subprotocol is duplicated`);t.add(n),r=i=-1}else throw SyntaxError(`Unexpected character at index ${o}`)}if(-1===r||-1!==i)throw SyntaxError("Unexpected end of input");let s=e.slice(r,o);if(t.has(s))throw SyntaxError(`The "${s}" subprotocol is duplicated`);return t.add(s),t}}},17198,(e,t,r)=>{"use strict";let n=e.r(27699),i=e.r(21517),{Duplex:o}=e.r(88947),{createHash:s}=e.r(54799),a=e.r(96903),l=e.r(80295),u=e.r(42977),c=e.r(35065),{GUID:d,kWebSocket:p}=e.r(74836),h=/^[+/0-9A-Za-z]{22}==$/;function f(e){e._state=2,e.emit("close")}function g(){this.destroy()}function m(e,t,r,n){r=r||i.STATUS_CODES[t],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${i.STATUS_CODES[t]}\r
`+Object.keys(n).map(e=>`${e}: ${n[e]}`).join("\r\n")+"\r\n\r\n"+r)}function y(e,t,r,n,i,o){if(e.listenerCount("wsClientError")){let n=Error(i);Error.captureStackTrace(n,y),e.emit("wsClientError",n,r,t)}else m(r,n,i,o)}t.exports=class extends n{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:c,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=i.createServer((e,t)=>{let r=i.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(let r of Object.keys(t))e.on(r,t[r]);return function(){for(let r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state){e&&this.once("close",()=>{e(Error("The server is not running"))}),process.nextTick(f,this);return}if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(f,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{f(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",g);let i=e.headers["sec-websocket-key"],o=e.headers.upgrade,s=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void y(this,e,t,405,"Invalid HTTP method");if(void 0===o||"websocket"!==o.toLowerCase())return void y(this,e,t,400,"Invalid Upgrade header");if(void 0===i||!h.test(i))return void y(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==s&&8!==s)return void y(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(e))return void m(t,400);let c=e.headers["sec-websocket-protocol"],d=new Set;if(void 0!==c)try{d=u.parse(c)}catch(r){y(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let p=e.headers["sec-websocket-extensions"],f={};if(this.options.perMessageDeflate&&void 0!==p){let r=new l(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let e=a.parse(p);e[l.extensionName]&&(r.accept(e[l.extensionName]),f[l.extensionName]=r)}catch(r){y(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let o={origin:e.headers[`${8===s?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,(o,s,a,l)=>{if(!o)return m(t,s||401,a,l);this.completeUpgrade(f,i,d,e,t,r,n)});if(!this.options.verifyClient(o))return m(t,401)}this.completeUpgrade(f,i,d,e,t,r,n)}completeUpgrade(e,t,r,n,i,o,u){if(!i.readable||!i.writable)return i.destroy();if(i[p])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return m(i,503);let c=s("sha1").update(t+d).digest("base64"),h=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${c}`],y=new this.options.WebSocket(null,void 0,this.options);if(r.size){let e=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;e&&(h.push(`Sec-WebSocket-Protocol: ${e}`),y._protocol=e)}if(e[l.extensionName]){let t=e[l.extensionName].params,r=a.format({[l.extensionName]:[t]});h.push(`Sec-WebSocket-Extensions: ${r}`),y._extensions=e}this.emit("headers",h,n),i.write(h.concat("\r\n").join("\r\n")),i.removeListener("error",g),y.setSocket(i,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(y),y.on("close",()=>{this.clients.delete(y),this._shouldEmitClose&&!this.clients.size&&process.nextTick(f,this)})),u(y,n)}}},37291,e=>{"use strict";let t,r,n,i,o;var s,a,l,u,c,d,p,h,f,g,m,y,_,E,v,b,S,T,A,O,w,C,R,I,P,N,x,k,D,M,U,j,L,G,F,q,B,H,V,$,W,J,K,Y,z,X,Z,Q,ee,et,er,en,ei,eo,es,ea,el,eu,ec,ed,ep,eh,ef,eg,em,ey,e_,eE,ev,eb,eS,eT,eA,eO,ew,eC,eR,eI,eP,eN,ex,ek,eD,eM,eU,ej,eL,eG,eF,eq,eB,eH,eV,e$,eW,eJ,eK,eY,ez,eX,eZ,eQ,e0,e1,e2,e4,e3,e6,e5,e8,e7,e9,te,tt,tr,tn,ti,to,ts,ta,tl,tu,tc,td,tp,th,tf,tg,tm,ty,t_=e.i(47909),tE=((s={}).PAGES="PAGES",s.PAGES_API="PAGES_API",s.APP_PAGE="APP_PAGE",s.APP_ROUTE="APP_ROUTE",s.IMAGE="IMAGE",s),tv=((a=tv||{}).handleRequest="BaseServer.handleRequest",a.run="BaseServer.run",a.pipe="BaseServer.pipe",a.getStaticHTML="BaseServer.getStaticHTML",a.render="BaseServer.render",a.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",a.renderToResponse="BaseServer.renderToResponse",a.renderToHTML="BaseServer.renderToHTML",a.renderError="BaseServer.renderError",a.renderErrorToResponse="BaseServer.renderErrorToResponse",a.renderErrorToHTML="BaseServer.renderErrorToHTML",a.render404="BaseServer.render404",a),tb=((l=tb||{}).loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",l.loadComponents="LoadComponents.loadComponents",l),tS=((u=tS||{}).getRequestHandler="NextServer.getRequestHandler",u.getRequestHandlerWithMetadata="NextServer.getRequestHandlerWithMetadata",u.getServer="NextServer.getServer",u.getServerRequestHandler="NextServer.getServerRequestHandler",u.createServer="createServer.createServer",u),tT=((c=tT||{}).compression="NextNodeServer.compression",c.getBuildId="NextNodeServer.getBuildId",c.createComponentTree="NextNodeServer.createComponentTree",c.clientComponentLoading="NextNodeServer.clientComponentLoading",c.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",c.generateStaticRoutes="NextNodeServer.generateStaticRoutes",c.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",c.generatePublicRoutes="NextNodeServer.generatePublicRoutes",c.generateImageRoutes="NextNodeServer.generateImageRoutes.route",c.sendRenderResult="NextNodeServer.sendRenderResult",c.proxyRequest="NextNodeServer.proxyRequest",c.runApi="NextNodeServer.runApi",c.render="NextNodeServer.render",c.renderHTML="NextNodeServer.renderHTML",c.imageOptimizer="NextNodeServer.imageOptimizer",c.getPagePath="NextNodeServer.getPagePath",c.getRoutesManifest="NextNodeServer.getRoutesManifest",c.findPageComponents="NextNodeServer.findPageComponents",c.getFontManifest="NextNodeServer.getFontManifest",c.getServerComponentManifest="NextNodeServer.getServerComponentManifest",c.getRequestHandler="NextNodeServer.getRequestHandler",c.renderToHTML="NextNodeServer.renderToHTML",c.renderError="NextNodeServer.renderError",c.renderErrorToHTML="NextNodeServer.renderErrorToHTML",c.render404="NextNodeServer.render404",c.startResponse="NextNodeServer.startResponse",c.route="route",c.onProxyReq="onProxyReq",c.apiResolver="apiResolver",c.internalFetch="internalFetch",c),tA=((d=tA||{}).startServer="startServer.startServer",d),tO=((p=tO||{}).getServerSideProps="Render.getServerSideProps",p.getStaticProps="Render.getStaticProps",p.renderToString="Render.renderToString",p.renderDocument="Render.renderDocument",p.createBodyResult="Render.createBodyResult",p),tw=((h=tw||{}).renderToString="AppRender.renderToString",h.renderToReadableStream="AppRender.renderToReadableStream",h.getBodyResult="AppRender.getBodyResult",h.fetch="AppRender.fetch",h),tC=((f=tC||{}).executeRoute="Router.executeRoute",f),tR=((g=tR||{}).runHandler="Node.runHandler",g),tI=((m=tI||{}).runHandler="AppRouteRouteHandlers.runHandler",m),tP=((y=tP||{}).generateMetadata="ResolveMetadata.generateMetadata",y.generateViewport="ResolveMetadata.generateViewport",y),tN=((_=tN||{}).execute="Middleware.execute",_);let tx=new Set(["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"]),tk=new Set(["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]),tD=process.env.NEXT_OTEL_PERFORMANCE_PREFIX;try{t=e.r(70406)}catch(r){t=e.r(17413)}let{context:tM,propagation:tU,trace:tj,SpanStatusCode:tL,SpanKind:tG,ROOT_CONTEXT:tF}=t;class tq extends Error{constructor(e,t){super(),this.bubble=e,this.result=t}}let tB=(e,t)=>{"object"==typeof t&&null!==t&&t instanceof tq&&t.bubble?e.setAttribute("next.bubble",!0):(t&&(e.recordException(t),e.setAttribute("error.type",t.name)),e.setStatus({code:tL.ERROR,message:null==t?void 0:t.message})),e.end()},tH=new Map,tV=t.createContextKey("next.rootSpanId"),t$=0,tW={set(e,t,r){e.push({key:t,value:r})}},tJ=(n=new class e{getTracerInstance(){return tj.getTracer("next.js","0.0.1")}getContext(){return tM}getTracePropagationData(){let e=tM.active(),t=[];return tU.inject(e,t,tW),t}getActiveScopeSpan(){return tj.getSpan(null==tM?void 0:tM.active())}withPropagatedContext(e,t,r){let n=tM.active();if(tj.getSpanContext(n))return t();let i=tU.extract(n,e,r);return tM.with(i,t)}trace(...e){let[t,r,n]=e,{fn:i,options:o}="function"==typeof r?{fn:r,options:{}}:{fn:n,options:{...r}},s=o.spanName??t;if(!tx.has(t)&&"1"!==process.env.NEXT_OTEL_VERBOSE||o.hideSpan)return i();let a=this.getSpanContext((null==o?void 0:o.parentSpan)??this.getActiveScopeSpan());a||(a=(null==tM?void 0:tM.active())??tF);let l=a.getValue(tV),u="number"!=typeof l||!tH.has(l),c=t$++;return o.attributes={"next.span_name":s,"next.span_type":t,...o.attributes},tM.with(a.setValue(tV,c),()=>this.getTracerInstance().startActiveSpan(s,o,e=>{let r;tD&&t&&tk.has(t)&&(r="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0);let n=!1,s=()=>{!n&&(n=!0,tH.delete(c),r&&performance.measure(`${tD}:next-${(t.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:r,end:performance.now()}))};if(u&&tH.set(c,new Map(Object.entries(o.attributes??{}))),i.length>1)try{return i(e,t=>tB(e,t))}catch(t){throw tB(e,t),t}finally{s()}try{let t=i(e);if(null!==t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then)return t.then(t=>(e.end(),t)).catch(t=>{throw tB(e,t),t}).finally(s);return e.end(),s(),t}catch(t){throw tB(e,t),s(),t}}))}wrap(...e){let t=this,[r,n,i]=3===e.length?e:[e[0],{},e[1]];return tx.has(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof i&&(e=e.apply(this,arguments));let o=arguments.length-1,s=arguments[o];if("function"!=typeof s)return t.trace(r,e,()=>i.apply(this,arguments));{let n=t.getContext().bind(tM.active(),s);return t.trace(r,e,(e,t)=>(arguments[o]=function(e){return null==t||t(e),n.apply(this,arguments)},i.apply(this,arguments)))}}:i}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?tj.setSpan(tM.active(),e):void 0}getRootSpanAttributes(){let e=tM.active().getValue(tV);return tH.get(e)}setRootSpanAttribute(e,t){let r=tM.active().getValue(tV),n=tH.get(r);n&&!n.has(e)&&n.set(e,t)}},()=>n),tK="x-next-cache-tags",tY={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"};({...tY,GROUP:{builtinReact:[tY.reactServerComponents,tY.actionBrowser],serverOnly:[tY.reactServerComponents,tY.actionBrowser,tY.instrument,tY.middleware],neutralTarget:[tY.apiNode,tY.apiEdge],clientOnly:[tY.serverSideRendering,tY.appPagesBrowser],bundled:[tY.reactServerComponents,tY.actionBrowser,tY.serverSideRendering,tY.appPagesBrowser,tY.shared,tY.instrument,tY.middleware],appPages:[tY.reactServerComponents,tY.serverSideRendering,tY.appPagesBrowser,tY.actionBrowser]}});var tz=e.i(47540);class tX extends Error{constructor(e){super(`Dynamic server usage: ${e}`),this.description=e,this.digest="DYNAMIC_SERVER_USAGE"}}class tZ extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}var tQ=e.i(32319),t0=e.i(56704);class t1 extends Error{constructor(e,t){super(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${e}".`),this.route=e,this.expression=t,this.digest="HANGING_PROMISE_REJECTION"}}let t2=new WeakMap;function t4(e,t,r){if(e.aborted)return Promise.reject(new t1(t,r));{let n=new Promise((n,i)=>{let o=i.bind(null,new t1(t,r)),s=t2.get(e);if(s)s.push(o);else{let t=[o];t2.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return n.catch(t3),n}}function t3(){}class t6 extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}let t5="function"==typeof tz.default.unstable_postpone;function t8(e,t,r){if(t)switch(t.type){case"cache":case"unstable-cache":case"private-cache":return}if(!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw Object.defineProperty(new tZ(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(t)switch(t.type){case"prerender-ppr":var n,i,o;return n=e.route,i=r,o=t.dynamicTracking,void(function(){if(!t5)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})}(),o&&o.dynamicAccesses.push({stack:o.isDebugDynamicAccesses?Error().stack:void 0,expression:i}),tz.default.unstable_postpone(t7(n,i)));case"prerender-legacy":t.revalidate=0;let s=Object.defineProperty(new tX(`Route ${e.route} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=r,e.dynamicUsageStack=s.stack,s}}}function t7(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}if(!1===((E=t7("%%%","^^^")).includes("needs to bail out of prerendering at this point because it used")&&E.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at __next_root_layout_boundary__ \\([^\\n]*\\)`),RegExp(`\\n\\s+at __next_metadata_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_viewport_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_outlet_boundary__[\\n\\s]`);let t9=()=>{};function re(e){if(!e.body)return[e,e];let[t,n]=e.body.tee(),i=new Response(t,{status:e.status,statusText:e.statusText,headers:e.headers});Object.defineProperty(i,"url",{value:e.url,configurable:!0,enumerable:!0,writable:!1}),r&&i.body&&r.register(i,new WeakRef(i.body));let o=new Response(n,{status:e.status,statusText:e.statusText,headers:e.headers});return Object.defineProperty(o,"url",{value:e.url,configurable:!0,enumerable:!0,writable:!1}),[i,o]}globalThis.FinalizationRegistry&&(r=new FinalizationRegistry(e=>{let t=e.deref();t&&!t.locked&&t.cancel("Response object has been garbage collected").then(t9)}));let rt=new Set(["traceparent","tracestate"]);class rr{constructor(){let e,t;this.promise=new Promise((r,n)=>{e=r,t=n}),this.resolve=e,this.reject=t}}var rn=((v={}).APP_PAGE="APP_PAGE",v.APP_ROUTE="APP_ROUTE",v.PAGES="PAGES",v.FETCH="FETCH",v.REDIRECT="REDIRECT",v.IMAGE="IMAGE",v),ri=((b={}).APP_PAGE="APP_PAGE",b.APP_ROUTE="APP_ROUTE",b.PAGES="PAGES",b.FETCH="FETCH",b.IMAGE="IMAGE",b);function ro(){}new Uint8Array([60,104,116,109,108]),new Uint8Array([60,98,111,100,121]),new Uint8Array([60,47,104,101,97,100,62]),new Uint8Array([60,47,98,111,100,121,62]),new Uint8Array([60,47,104,116,109,108,62]),new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62]),new Uint8Array([60,109,101,116,97,32,110,97,109,101,61,34,194,171,110,120,116,45,105,99,111,110,194,187,34]);let rs=new TextEncoder;function ra(e){return new ReadableStream({start(t){t.enqueue(rs.encode(e)),t.close()}})}function rl(e){return new ReadableStream({start(t){t.enqueue(e),t.close()}})}async function ru(e,t){let r=new TextDecoder("utf-8",{fatal:!0}),n="";for await(let i of e){if(null==t?void 0:t.aborted)return n;n+=r.decode(i,{stream:!0})}return n+r.decode()}let rc=Symbol.for("NextInternalRequestMeta");function rd(e,t){let r=e[rc]||{};return"string"==typeof t?r[t]:r}function rp(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function rh(e){var t,r,n,i,o,s=[],a=0;function l(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,o=!1;l();)if(","===(r=e.charAt(a))){for(n=a,a+=1,l(),i=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(o=!0,a=i,s.push(e.substring(t,n)),t=a):a=n+1}else a+=1;(!o||a>=e.length)&&s.push(e.substring(t,e.length))}return s}function rf(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...rh(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function rg(e){return e.replace(/\/$/,"")||"/"}function rm(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function ry(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=rm(e);return`${t}${r}${n}${i}`}function r_(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=rm(e);return`${r}${t}${n}${i}`}function rE(e,t){if("string"!=typeof e)return!1;let{pathname:r}=rm(e);return r===t||r.startsWith(t+"/")}let rv=new WeakMap;function rb(e,t){let r;if(!t)return{pathname:e};let n=rv.get(t);n||(n=t.map(e=>e.toLowerCase()),rv.set(t,n));let i=e.split("/",2);if(!i[1])return{pathname:e};let o=i[1].toLowerCase(),s=n.indexOf(o);return s<0?{pathname:e}:(r=t[s],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}let rS=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function rT(e,t){return new URL(String(e).replace(rS,"localhost"),t&&String(t).replace(rS,"localhost"))}let rA=Symbol("NextURLInternal");class rO{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[rA]={url:rT(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,n,i;let o=function(e,t){let{basePath:r,i18n:n,trailingSlash:i}=t.nextConfig??{},o={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):i};r&&rE(o.pathname,r)&&(o.pathname=function(e,t){if(!rE(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:`/${r}`}(o.pathname,r),o.basePath=r);let s=o.pathname;if(o.pathname.startsWith("/_next/data/")&&o.pathname.endsWith(".json")){let e=o.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");o.buildId=e[0],s="index"!==e[1]?`/${e.slice(1).join("/")}`:"/",!0===t.parseData&&(o.pathname=s)}if(n){let e=t.i18nProvider?t.i18nProvider.analyze(o.pathname):rb(o.pathname,n.locales);o.locale=e.detectedLocale,o.pathname=e.pathname??o.pathname,!e.detectedLocale&&o.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(s):rb(s,n.locales)).detectedLocale&&(o.locale=e.detectedLocale)}return o}(this[rA].url.pathname,{nextConfig:this[rA].options.nextConfig,parseData:!0,i18nProvider:this[rA].options.i18nProvider}),s=function(e,t){let r;if(t?.host&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}(this[rA].url,this[rA].options.headers);this[rA].domainLocale=this[rA].options.i18nProvider?this[rA].options.i18nProvider.detectDomainLocale(s):function(e,t,r){if(e){for(let n of(r&&(r=r.toLowerCase()),e))if(t===n.domain?.split(":",1)[0].toLowerCase()||r===n.defaultLocale.toLowerCase()||n.locales?.some(e=>e.toLowerCase()===r))return n}}(null==(t=this[rA].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,s);let a=(null==(r=this[rA].domainLocale)?void 0:r.defaultLocale)||(null==(i=this[rA].options.nextConfig)||null==(n=i.i18n)?void 0:n.defaultLocale);this[rA].url.pathname=o.pathname,this[rA].defaultLocale=a,this[rA].basePath=o.basePath??"",this[rA].buildId=o.buildId,this[rA].locale=o.locale??a,this[rA].trailingSlash=o.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,n){if(!t||t===r)return e;let i=e.toLowerCase();return!n&&(rE(i,"/api")||rE(i,`/${t.toLowerCase()}`))?e:ry(e,`/${t}`)}((e={basePath:this[rA].basePath,buildId:this[rA].buildId,defaultLocale:this[rA].options.forceLocale?void 0:this[rA].defaultLocale,locale:this[rA].locale,pathname:this[rA].url.pathname,trailingSlash:this[rA].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=rg(t)),e.buildId&&(t=r_(ry(t,`/_next/data/${e.buildId}`),"/"===e.pathname?"index.json":".json")),t=ry(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:r_(t,"/"):rg(t)}formatSearch(){return this[rA].url.search}get buildId(){return this[rA].buildId}set buildId(e){this[rA].buildId=e}get locale(){return this[rA].locale??""}set locale(e){var t,r;if(!this[rA].locale||!(null==(r=this[rA].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[rA].locale=e}get defaultLocale(){return this[rA].defaultLocale}get domainLocale(){return this[rA].domainLocale}get searchParams(){return this[rA].url.searchParams}get host(){return this[rA].url.host}set host(e){this[rA].url.host=e}get hostname(){return this[rA].url.hostname}set hostname(e){this[rA].url.hostname=e}get port(){return this[rA].url.port}set port(e){this[rA].url.port=e}get protocol(){return this[rA].url.protocol}set protocol(e){this[rA].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[rA].url=rT(e),this.analyze()}get origin(){return this[rA].url.origin}get pathname(){return this[rA].url.pathname}set pathname(e){this[rA].url.pathname=e}get hash(){return this[rA].url.hash}set hash(e){this[rA].url.hash=e}get search(){return this[rA].url.search}set search(e){this[rA].url.search=e}get password(){return this[rA].url.password}set password(e){this[rA].url.password=e}get username(){return this[rA].url.username}set username(e){this[rA].url.username=e}get basePath(){return this[rA].basePath}set basePath(e){this[rA].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new rO(String(this),this[rA].options)}}class rw extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class rC extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}var rR=e.i(19481);let rI=Symbol("internal request");class rP extends Request{constructor(e,t={}){const r="string"!=typeof e&&"url"in e?e.url:String(e);!function(e){try{String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}(r),t.body&&"half"!==t.duplex&&(t.duplex="half"),e instanceof Request?super(e,t):super(r,t);const n=new rO(r,{headers:rf(this.headers),nextConfig:t.nextConfig});this[rI]={cookies:new rR.RequestCookies(this.headers),nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[rI].cookies}get nextUrl(){return this[rI].nextUrl}get page(){throw new rw}get ua(){throw new rC}get url(){return this[rI].url}}let rN="ResponseAborted";class rx extends Error{constructor(...e){super(...e),this.name=rN}}function rk(e){let t=new AbortController;return e.once("close",()=>{e.writableFinished||t.abort(new rx)}),t}class rD{static fromBaseNextRequest(e,t){return rD.fromNodeNextRequest(e,t)}static fromNodeNextRequest(e,t){let r,n=null;if("GET"!==e.method&&"HEAD"!==e.method&&e.body&&(n=e.body),e.url.startsWith("http"))r=new URL(e.url);else{let t=rd(e,"initURL");r=t&&t.startsWith("http")?new URL(e.url,t):new URL(e.url,"http://n")}return new rP(r,{method:e.method,headers:rp(e.headers),duplex:"half",signal:t,...t.aborted?{}:{body:n}})}static fromWebNextRequest(e){let t=null;return"GET"!==e.method&&"HEAD"!==e.method&&(t=e.body),new rP(e.url,{method:e.method,headers:rp(e.headers),duplex:"half",signal:e.request.signal,...e.request.signal.aborted?{}:{body:t}})}}let rM=0,rU=0,rj=0;function rL(e){return(null==e?void 0:e.name)==="AbortError"||(null==e?void 0:e.name)===rN}async function rG(e,t,r){try{let{errored:n,destroyed:i}=t;if(n||i)return;let o=rk(t),s=function(e,t){let r=!1,n=new rr;function i(){n.resolve()}e.on("drain",i),e.once("close",()=>{e.off("drain",i),n.resolve()});let o=new rr;return e.once("finish",()=>{o.resolve()}),new WritableStream({write:async t=>{if(!r){if(r=!0,"performance"in globalThis&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX){let e=function(e={}){let t=0===rM?void 0:{clientComponentLoadStart:rM,clientComponentLoadTimes:rU,clientComponentLoadCount:rj};return e.reset&&(rM=0,rU=0,rj=0),t}();e&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-client-component-loading`,{start:e.clientComponentLoadStart,end:e.clientComponentLoadStart+e.clientComponentLoadTimes})}e.flushHeaders(),tJ().trace(tT.startResponse,{spanName:"start response"},()=>void 0)}try{let r=e.write(t);"flush"in e&&"function"==typeof e.flush&&e.flush(),r||(await n.promise,n=new rr)}catch(t){throw e.end(),Object.defineProperty(Error("failed to write chunk to response",{cause:t}),"__NEXT_ERROR_CODE",{value:"E321",enumerable:!1,configurable:!0})}},abort:t=>{e.writableFinished||e.destroy(t)},close:async()=>{if(t&&await t,!e.writableFinished)return e.end(),o.promise}})}(t,r);await e.pipeTo(s,{signal:o.signal})}catch(e){if(rL(e))return;throw Object.defineProperty(Error("failed to pipe response",{cause:e}),"__NEXT_ERROR_CODE",{value:"E180",enumerable:!1,configurable:!0})}}class rF{static #N=this.EMPTY=new rF(null,{metadata:{},contentType:null});static fromStatic(e,t){return new rF(e,{metadata:{},contentType:t})}constructor(e,{contentType:t,waitUntil:r,metadata:n}){this.response=e,this.contentType=t,this.metadata=n,this.waitUntil=r}assignMetadata(e){Object.assign(this.metadata,e)}get isNull(){return null===this.response}get isDynamic(){return"string"!=typeof this.response}toUnchunkedString(e=!1){if(null===this.response)return"";if("string"!=typeof this.response){if(!e)throw Object.defineProperty(new t6("dynamic responses cannot be unchunked. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E732",enumerable:!1,configurable:!0});return ru(this.readable)}return this.response}get readable(){return null===this.response?new ReadableStream({start(e){e.close()}}):"string"==typeof this.response?ra(this.response):Buffer.isBuffer(this.response)?rl(this.response):Array.isArray(this.response)?function(...e){if(0===e.length)return new ReadableStream({start(e){e.close()}});if(1===e.length)return e[0];let{readable:t,writable:r}=new TransformStream,n=e[0].pipeTo(r,{preventClose:!0}),i=1;for(;i<e.length-1;i++){let t=e[i];n=n.then(()=>t.pipeTo(r,{preventClose:!0}))}let o=e[i];return(n=n.then(()=>o.pipeTo(r))).catch(ro),t}(...this.response):this.response}coerce(){return null===this.response?[]:"string"==typeof this.response?[ra(this.response)]:Array.isArray(this.response)?this.response:Buffer.isBuffer(this.response)?[rl(this.response)]:[this.response]}unshift(e){this.response=this.coerce(),this.response.unshift(e)}push(e){this.response=this.coerce(),this.response.push(e)}async pipeTo(e){try{await this.readable.pipeTo(e,{preventClose:!0}),this.waitUntil&&await this.waitUntil,await e.close()}catch(t){if(rL(t))return void await e.abort(t);throw t}}async pipeToNodeResponse(e){await rG(this.readable,e,this.waitUntil)}}let rq=Symbol.for("next-patch");function rB(e,t){e.shouldTrackFetchMetrics&&(e.fetchMetrics??=[],e.fetchMetrics.push({...t,end:performance.timeOrigin+performance.now(),idx:e.nextFetchId||0}))}async function rH(e,t,r,n,i,o){let s=await e.arrayBuffer(),a={headers:Object.fromEntries(e.headers.entries()),body:Buffer.from(s).toString("base64"),status:e.status,url:e.url};return r&&await n.set(t,{kind:rn.FETCH,data:a,revalidate:i},r),await o(),new Response(s,{headers:e.headers,status:e.status,statusText:e.statusText})}async function rV(e,t,r,n,i,o,s,a,l){let[u,c]=re(t),d=u.arrayBuffer().then(async e=>{let t=Buffer.from(e),a={headers:Object.fromEntries(u.headers.entries()),body:t.toString("base64"),status:u.status,url:u.url};null==o||o.set(r,a),n&&await i.set(r,{kind:rn.FETCH,data:a,revalidate:s},n)}).catch(e=>console.warn("Failed to set fetch cache",a,e)).finally(l),p=`cache-set-${r}`;return e.pendingRevalidates??={},p in e.pendingRevalidates&&await e.pendingRevalidates[p],e.pendingRevalidates[p]=d.finally(()=>{var t;(null==(t=e.pendingRevalidates)?void 0:t[p])&&delete e.pendingRevalidates[p]}),c}let r$=null;function rW(e){var t;return(t=e.split("/").reduce((e,t,r,n)=>t?"("===t[0]&&t.endsWith(")")||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:`${e}/${t}`:e,"")).startsWith("/")?t:`/${t}`}let rJ=Symbol.for("next.server.action-manifests");class rK{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}class rY extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new rY}}class rz extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return rK.get(t,r,n);let i=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===i);if(void 0!==o)return rK.get(t,o,n)},set(t,r,n,i){if("symbol"==typeof r)return rK.set(t,r,n,i);let o=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===o);return rK.set(t,s??r,n,i)},has(t,r){if("symbol"==typeof r)return rK.has(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==i&&rK.has(t,i)},deleteProperty(t,r){if("symbol"==typeof r)return rK.deleteProperty(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===i||rK.deleteProperty(t,i)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return rY.callable;default:return rK.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new rz(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}Symbol("__next_preview_data");let rX=Symbol("__prerender_bypass");var rZ=((S={})[S.SeeOther=303]="SeeOther",S[S.TemporaryRedirect=307]="TemporaryRedirect",S[S.PermanentRedirect=308]="PermanentRedirect",S);class rQ{constructor(e,t,r){this.method=e,this.url=t,this.body=r}get cookies(){var t;return this._cookies?this._cookies:this._cookies=(t=this.headers,function(){let{cookie:r}=t;if(!r)return{};let{parse:n}=e.r(93118);return n(Array.isArray(r)?r.join("; "):r)})()}}class r0{constructor(e){this.destination=e}redirect(e,t){return this.setHeader("Location",e),this.statusCode=t,t===rZ.PermanentRedirect&&this.setHeader("Refresh",`0;url=${e}`),this}}class r1 extends rQ{static #N=eO=rc;constructor(e){var t;super(e.method.toUpperCase(),e.url,e),this._req=e,this.headers=this._req.headers,this.fetchMetrics=null==(t=this._req)?void 0:t.fetchMetrics,this[eO]=this._req[rc]||{},this.streaming=!1}get originalRequest(){return this._req[rc]=this[rc],this._req.url=this.url,this._req.cookies=this.cookies,this._req}set originalRequest(e){this._req=e}stream(){if(this.streaming)throw Object.defineProperty(Error("Invariant: NodeNextRequest.stream() can only be called once"),"__NEXT_ERROR_CODE",{value:"E467",enumerable:!1,configurable:!0});return this.streaming=!0,new ReadableStream({start:e=>{this._req.on("data",t=>{e.enqueue(new Uint8Array(t))}),this._req.on("end",()=>{e.close()}),this._req.on("error",t=>{e.error(t)})}})}}class r2 extends r0{get originalResponse(){return rX in this&&(this._res[rX]=this[rX]),this._res}constructor(e){super(e),this._res=e,this.textBody=void 0}get sent(){return this._res.finished||this._res.headersSent}get statusCode(){return this._res.statusCode}set statusCode(e){this._res.statusCode=e}get statusMessage(){return this._res.statusMessage}set statusMessage(e){this._res.statusMessage=e}setHeader(e,t){return this._res.setHeader(e,t),this}removeHeader(e){return this._res.removeHeader(e),this}getHeaderValues(e){let t=this._res.getHeader(e);if(void 0!==t)return(Array.isArray(t)?t:[t]).map(e=>e.toString())}hasHeader(e){return this._res.hasHeader(e)}getHeader(e){let t=this.getHeaderValues(e);return Array.isArray(t)?t.join(","):void 0}getHeaders(){return this._res.getHeaders()}appendHeader(e,t){let r=this.getHeaderValues(e)??[];return r.includes(t)||this._res.setHeader(e,[...r,t]),this}body(e){return this.textBody=e,this}send(){this._res.end(this.textBody)}onClose(e){this.originalResponse.on("close",e)}}function r4(e){return e.isOnDemandRevalidate?"on-demand":e.isStaticGeneration?"stale":void 0}async function r3(e,t,r,n){{var i;t.statusCode=r.status,t.statusMessage=r.statusText;let o=["set-cookie","www-authenticate","proxy-authenticate","vary"];null==(i=r.headers)||i.forEach((e,r)=>{if("x-middleware-set-cookie"!==r.toLowerCase())if("set-cookie"===r.toLowerCase())for(let n of rh(e))t.appendHeader(r,n);else{let n=void 0!==t.getHeader(r);(o.includes(r.toLowerCase())||!n)&&t.appendHeader(r,e)}});let{originalResponse:s}=t;r.body&&"HEAD"!==e.method?await rG(r.body,s,n):s.end()}}var r6=e.i(93695),r5=e.i(89171),r8=e.i(47334),r7=e.i(22734),r9=e.i(24868),ne=e.i(81111),nt=e.i(88646);e.i(21365),e.i(29485),e.i(16735);var nr=e.i(35065);e.i(17198),nr.default;var nn=e.i(14747);class ni{}function no(e,t){return e.replace(/\{([^}]+)\}/g,(e,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){let e=t[r];return null!=e?String(e):""}throw Error(`Key '${r}' not found in valueMap.`)})}function ns(e,t,r){for(let n=0;n<t.length-1;n++){let i=t[n];if(i.endsWith("[]")){let o=i.slice(0,-2);if(!(o in e))if(Array.isArray(r))e[o]=Array.from({length:r.length},()=>({}));else throw Error(`Value must be a list given an array path ${i}`);if(Array.isArray(e[o])){let i=e[o];if(Array.isArray(r))for(let e=0;e<i.length;e++)ns(i[e],t.slice(n+1),r[e]);else for(let e of i)ns(e,t.slice(n+1),r)}return}if(i.endsWith("[0]")){let o=i.slice(0,-3);o in e||(e[o]=[{}]),ns(e[o][0],t.slice(n+1),r);return}e[i]&&"object"==typeof e[i]||(e[i]={}),e=e[i]}let n=t[t.length-1],i=e[n];if(void 0!==i){if(!r||"object"==typeof r&&0===Object.keys(r).length||r===i)return;if("object"==typeof i&&"object"==typeof r&&null!==i&&null!==r)Object.assign(i,r);else throw Error(`Cannot set value for an existing key. Key: ${n}`)}else"_self"!==n||"object"!=typeof r||null===r||Array.isArray(r)?e[n]=r:Object.assign(e,r)}function na(e,t,r){try{if(1===t.length&&"_self"===t[0])return e;for(let n=0;n<t.length;n++){if("object"!=typeof e||null===e)return r;let i=t[n];if(i.endsWith("[]")){let o=i.slice(0,-2);if(!(o in e))return r;{let i=e[o];if(!Array.isArray(i))return r;return i.map(e=>na(e,t.slice(n+1),r))}}e=e[i]}return e}catch(e){if(e instanceof TypeError)return r;throw e}}function nl(e){if("string"!=typeof e)throw Error("fromImageBytes must be a string");return e}function nu(e){var t;let r,n,i,o,s={},a=na(e,["name"]);null!=a&&ns(s,["name"],a);let l=na(e,["metadata"]);null!=l&&ns(s,["metadata"],l);let u=na(e,["done"]);null!=u&&ns(s,["done"],u);let c=na(e,["error"]);null!=c&&ns(s,["error"],c);let d=na(e,["response"]);return null!=d&&ns(s,["response"],(r={},null!=(n=na(t=d,["sdkHttpResponse"]))&&ns(r,["sdkHttpResponse"],n),null!=(i=na(t,["parent"]))&&ns(r,["parent"],i),null!=(o=na(t,["documentName"]))&&ns(r,["documentName"],o),r)),s}(T=ew||(ew={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",T.OUTCOME_OK="OUTCOME_OK",T.OUTCOME_FAILED="OUTCOME_FAILED",T.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(A=eC||(eC={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",A.PYTHON="PYTHON",(O=eR||(eR={})).SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",O.SILENT="SILENT",O.WHEN_IDLE="WHEN_IDLE",O.INTERRUPT="INTERRUPT",(w=eI||(eI={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",w.STRING="STRING",w.NUMBER="NUMBER",w.INTEGER="INTEGER",w.BOOLEAN="BOOLEAN",w.ARRAY="ARRAY",w.OBJECT="OBJECT",w.NULL="NULL",(C=eP||(eP={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",C.MODE_DYNAMIC="MODE_DYNAMIC",(R=eN||(eN={})).API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",R.SIMPLE_SEARCH="SIMPLE_SEARCH",R.ELASTIC_SEARCH="ELASTIC_SEARCH",(I=ex||(ex={})).AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",I.NO_AUTH="NO_AUTH",I.API_KEY_AUTH="API_KEY_AUTH",I.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",I.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",I.OAUTH="OAUTH",I.OIDC_AUTH="OIDC_AUTH",(P=ek||(ek={})).HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",P.HTTP_IN_QUERY="HTTP_IN_QUERY",P.HTTP_IN_HEADER="HTTP_IN_HEADER",P.HTTP_IN_PATH="HTTP_IN_PATH",P.HTTP_IN_BODY="HTTP_IN_BODY",P.HTTP_IN_COOKIE="HTTP_IN_COOKIE",(N=eD||(eD={})).PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",N.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",N.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",N.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",N.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",N.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",N.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH",(x=eM||(eM={})).THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",x.LOW="LOW",x.HIGH="HIGH",(k=eU||(eU={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",k.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",k.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",k.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",k.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",k.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",k.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",k.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",k.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",k.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",k.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK",(D=ej||(ej={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",D.SEVERITY="SEVERITY",D.PROBABILITY="PROBABILITY",(M=eL||(eL={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",M.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",M.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",M.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",M.BLOCK_NONE="BLOCK_NONE",M.OFF="OFF",(U=eG||(eG={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",U.STOP="STOP",U.MAX_TOKENS="MAX_TOKENS",U.SAFETY="SAFETY",U.RECITATION="RECITATION",U.LANGUAGE="LANGUAGE",U.OTHER="OTHER",U.BLOCKLIST="BLOCKLIST",U.PROHIBITED_CONTENT="PROHIBITED_CONTENT",U.SPII="SPII",U.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",U.IMAGE_SAFETY="IMAGE_SAFETY",U.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",U.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",U.NO_IMAGE="NO_IMAGE",(j=eF||(eF={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",j.NEGLIGIBLE="NEGLIGIBLE",j.LOW="LOW",j.MEDIUM="MEDIUM",j.HIGH="HIGH",(L=eq||(eq={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",L.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",L.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",L.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",L.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(G=eB||(eB={})).URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",G.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",G.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",G.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",G.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE",(F=eH||(eH={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",F.SAFETY="SAFETY",F.OTHER="OTHER",F.BLOCKLIST="BLOCKLIST",F.PROHIBITED_CONTENT="PROHIBITED_CONTENT",F.IMAGE_SAFETY="IMAGE_SAFETY",F.MODEL_ARMOR="MODEL_ARMOR",F.JAILBREAK="JAILBREAK",(q=eV||(eV={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",q.ON_DEMAND="ON_DEMAND",q.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(B=e$||(e$={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",B.TEXT="TEXT",B.IMAGE="IMAGE",B.AUDIO="AUDIO",(H=eW||(eW={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",H.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",H.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",H.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(V=eJ||(eJ={})).TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",V.TUNING_MODE_FULL="TUNING_MODE_FULL",V.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER",($=eK||(eK={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",$.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",$.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",$.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",$.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",$.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",$.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(W=eY||(eY={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",W.JOB_STATE_QUEUED="JOB_STATE_QUEUED",W.JOB_STATE_PENDING="JOB_STATE_PENDING",W.JOB_STATE_RUNNING="JOB_STATE_RUNNING",W.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",W.JOB_STATE_FAILED="JOB_STATE_FAILED",W.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",W.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",W.JOB_STATE_PAUSED="JOB_STATE_PAUSED",W.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",W.JOB_STATE_UPDATING="JOB_STATE_UPDATING",W.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(J=ez||(ez={})).TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",J.TUNING_TASK_I2V="TUNING_TASK_I2V",J.TUNING_TASK_T2V="TUNING_TASK_T2V",J.TUNING_TASK_R2V="TUNING_TASK_R2V",(K=eX||(eX={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",K.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",K.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",K.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(Y=eZ||(eZ={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",Y.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",Y.BALANCED="BALANCED",Y.PRIORITIZE_COST="PRIORITIZE_COST",(z=eQ||(eQ={})).UNSPECIFIED="UNSPECIFIED",z.BLOCKING="BLOCKING",z.NON_BLOCKING="NON_BLOCKING",(X=e0||(e0={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",X.MODE_DYNAMIC="MODE_DYNAMIC",(Z=e1||(e1={})).ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",Z.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER",(Q=e2||(e2={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",Q.AUTO="AUTO",Q.ANY="ANY",Q.NONE="NONE",Q.VALIDATED="VALIDATED",(ee=e4||(e4={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",ee.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",ee.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",ee.BLOCK_NONE="BLOCK_NONE",(et=e3||(e3={})).DONT_ALLOW="DONT_ALLOW",et.ALLOW_ADULT="ALLOW_ADULT",et.ALLOW_ALL="ALLOW_ALL",(er=e6||(e6={})).auto="auto",er.en="en",er.ja="ja",er.ko="ko",er.hi="hi",er.zh="zh",er.pt="pt",er.es="es",(en=e5||(e5={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",en.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",en.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",en.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",en.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(ei=e8||(e8={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",ei.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",ei.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",ei.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(eo=e7||(e7={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",eo.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",eo.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",eo.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(es=e9||(e9={})).EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",es.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",es.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",es.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",es.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",es.EDIT_MODE_STYLE="EDIT_MODE_STYLE",es.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",es.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE",(ea=te||(te={})).FOREGROUND="FOREGROUND",ea.BACKGROUND="BACKGROUND",ea.PROMPT="PROMPT",ea.SEMANTIC="SEMANTIC",ea.INTERACTIVE="INTERACTIVE",(el=tt||(tt={})).ASSET="ASSET",el.STYLE="STYLE",(eu=tr||(tr={})).INSERT="INSERT",eu.REMOVE="REMOVE",eu.REMOVE_STATIC="REMOVE_STATIC",eu.OUTPAINT="OUTPAINT",(ec=tn||(tn={})).OPTIMIZED="OPTIMIZED",ec.LOSSLESS="LOSSLESS",(ed=ti||(ti={})).SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",ed.PREFERENCE_TUNING="PREFERENCE_TUNING",(ep=to||(to={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",ep.STATE_PENDING="STATE_PENDING",ep.STATE_ACTIVE="STATE_ACTIVE",ep.STATE_FAILED="STATE_FAILED",(eh=ts||(ts={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",eh.PROCESSING="PROCESSING",eh.ACTIVE="ACTIVE",eh.FAILED="FAILED",(ef=ta||(ta={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",ef.UPLOADED="UPLOADED",ef.GENERATED="GENERATED",(eg=tl||(tl={})).TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",eg.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",eg.RESPONSE_REJECTED="RESPONSE_REJECTED",eg.NEED_MORE_INPUT="NEED_MORE_INPUT",(em=tu||(tu={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",em.TEXT="TEXT",em.IMAGE="IMAGE",em.VIDEO="VIDEO",em.AUDIO="AUDIO",em.DOCUMENT="DOCUMENT",(ey=tc||(tc={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",ey.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",ey.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(e_=td||(td={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e_.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e_.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(eE=tp||(tp={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",eE.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",eE.NO_INTERRUPTION="NO_INTERRUPTION",(ev=th||(th={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",ev.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",ev.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT",(eb=tf||(tf={})).SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",eb.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",eb.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",eb.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",eb.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",eb.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",eb.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",eb.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",eb.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",eb.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",eb.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",eb.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",eb.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR",(eS=tg||(tg={})).MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",eS.QUALITY="QUALITY",eS.DIVERSITY="DIVERSITY",eS.VOCALIZATION="VOCALIZATION",(eT=tm||(tm={})).PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",eT.PLAY="PLAY",eT.PAUSE="PAUSE",eT.STOP="STOP",eT.RESET_CONTEXT="RESET_CONTEXT";class nc{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class nd{get text(){var e,t,r,n,i,o,s,a;if((null==(n=null==(r=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:r.parts)?void 0:n.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let l="",u=!1,c=[];for(let e of null!=(a=null==(s=null==(o=null==(i=this.candidates)?void 0:i[0])?void 0:o.content)?void 0:s.parts)?a:[]){for(let[t,r]of Object.entries(e))"text"!==t&&"thought"!==t&&"thoughtSignature"!==t&&(null!==r||void 0!==r)&&c.push(t);if("string"==typeof e.text){if("boolean"==typeof e.thought&&e.thought)continue;u=!0,l+=e.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?l:void 0}get data(){var e,t,r,n,i,o,s,a;if((null==(n=null==(r=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:r.parts)?void 0:n.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let l="",u=[];for(let e of null!=(a=null==(s=null==(o=null==(i=this.candidates)?void 0:i[0])?void 0:o.content)?void 0:s.parts)?a:[]){for(let[t,r]of Object.entries(e))"inlineData"!==t&&(null!==r||void 0!==r)&&u.push(t);e.inlineData&&"string"==typeof e.inlineData.data&&(l+=atob(e.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}get functionCalls(){var e,t,r,n,i,o,s,a;if((null==(n=null==(r=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:r.parts)?void 0:n.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let l=null==(a=null==(s=null==(o=null==(i=this.candidates)?void 0:i[0])?void 0:o.content)?void 0:s.parts)?void 0:a.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);if((null==l?void 0:l.length)!==0)return l}get executableCode(){var e,t,r,n,i,o,s,a,l;if((null==(n=null==(r=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:r.parts)?void 0:n.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let u=null==(a=null==(s=null==(o=null==(i=this.candidates)?void 0:i[0])?void 0:o.content)?void 0:s.parts)?void 0:a.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);if((null==u?void 0:u.length)!==0)return null==(l=null==u?void 0:u[0])?void 0:l.code}get codeExecutionResult(){var e,t,r,n,i,o,s,a,l;if((null==(n=null==(r=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:r.parts)?void 0:n.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let u=null==(a=null==(s=null==(o=null==(i=this.candidates)?void 0:i[0])?void 0:o.content)?void 0:s.parts)?void 0:a.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);if((null==u?void 0:u.length)!==0)return null==(l=null==u?void 0:u[0])?void 0:l.output}}class np{}class nh{}class nf{}class ng{}class nm{}class ny{}class n_{}class nE{}class nv{}class nb{}class nS{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let r,n=new nS;if(t){let t,n,i,o,s,a;t={},null!=(n=na(e,["name"]))&&ns(t,["name"],n),null!=(i=na(e,["metadata"]))&&ns(t,["metadata"],i),null!=(o=na(e,["done"]))&&ns(t,["done"],o),null!=(s=na(e,["error"]))&&ns(t,["error"],s),null!=(a=na(e,["response"]))&&ns(t,["response"],function(e){let t={},r=na(e,["videos"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i,o,s,a;return r={},null!=(n=na(e,["_self"]))&&ns(r,["video"],(i={},null!=(o=na(t=n,["gcsUri"]))&&ns(i,["uri"],o),null!=(s=na(t,["bytesBase64Encoded"]))&&ns(i,["videoBytes"],nl(s)),null!=(a=na(t,["mimeType"]))&&ns(i,["mimeType"],a),i)),r})),ns(t,["generatedVideos"],e)}let n=na(e,["raiMediaFilteredCount"]);null!=n&&ns(t,["raiMediaFilteredCount"],n);let i=na(e,["raiMediaFilteredReasons"]);return null!=i&&ns(t,["raiMediaFilteredReasons"],i),t}(a)),r=t}else{let t,n,i,o,s,a;t={},null!=(n=na(e,["name"]))&&ns(t,["name"],n),null!=(i=na(e,["metadata"]))&&ns(t,["metadata"],i),null!=(o=na(e,["done"]))&&ns(t,["done"],o),null!=(s=na(e,["error"]))&&ns(t,["error"],s),null!=(a=na(e,["response","generateVideoResponse"]))&&ns(t,["response"],function(e){let t={},r=na(e,["generatedSamples"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i,o,s,a;return r={},null!=(n=na(e,["video"]))&&ns(r,["video"],(i={},null!=(o=na(t=n,["uri"]))&&ns(i,["uri"],o),null!=(s=na(t,["encodedVideo"]))&&ns(i,["videoBytes"],nl(s)),null!=(a=na(t,["encoding"]))&&ns(i,["mimeType"],a),i)),r})),ns(t,["generatedVideos"],e)}let n=na(e,["raiMediaFilteredCount"]);null!=n&&ns(t,["raiMediaFilteredCount"],n);let i=na(e,["raiMediaFilteredReasons"]);return null!=i&&ns(t,["raiMediaFilteredReasons"],i),t}(a)),r=t}return Object.assign(n,r),n}}class nT{}class nA{}class nO{}class nw{}class nC{}class nR{}class nI{}class nP{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){var r;let n,i,o,s,a,l,u,c,d,p,h=new nP;return Object.assign(h,(a={},null!=(l=na(e,["name"]))&&ns(a,["name"],l),null!=(u=na(e,["metadata"]))&&ns(a,["metadata"],u),null!=(c=na(e,["done"]))&&ns(a,["done"],c),null!=(d=na(e,["error"]))&&ns(a,["error"],d),null!=(p=na(e,["response"]))&&ns(a,["response"],(n={},null!=(i=na(r=p,["sdkHttpResponse"]))&&ns(n,["sdkHttpResponse"],i),null!=(o=na(r,["parent"]))&&ns(n,["parent"],o),null!=(s=na(r,["documentName"]))&&ns(n,["documentName"],s),n)),a)),h}}class nN{}class nx{}class nk{}class nD{}class nM{get text(){var e,t,r;let n="",i=!1,o=[];for(let s of null!=(r=null==(t=null==(e=this.serverContent)?void 0:e.modelTurn)?void 0:t.parts)?r:[]){for(let[e,t]of Object.entries(s))"text"!==e&&"thought"!==e&&null!==t&&o.push(e);if("string"==typeof s.text){if("boolean"==typeof s.thought&&s.thought)continue;i=!0,n+=s.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?n:void 0}get data(){var e,t,r;let n="",i=[];for(let o of null!=(r=null==(t=null==(e=this.serverContent)?void 0:e.modelTurn)?void 0:t.parts)?r:[]){for(let[e,t]of Object.entries(o))"inlineData"!==e&&null!==t&&i.push(e);o.inlineData&&"string"==typeof o.inlineData.data&&(n+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),n.length>0?btoa(n):void 0}}class nU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class nj{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let r=new nj;return Object.assign(r,nu(e)),r}}function nL(e,t){if(!t||"string"!=typeof t)throw Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw Error("invalid model parameter");if(e.isVertexAI())if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;else{if(!(t.indexOf("/")>=0))return`publishers/google/models/${t}`;let e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function nG(e,t){let r=nL(e,t);return r?r.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${r}`:r.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${r}`:r:""}function nF(e){return Array.isArray(e)?e.map(e=>nq(e)):[nq(e)]}function nq(e){if("object"==typeof e&&null!==e)return e;throw Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function nB(e){let t=nq(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw Error(`Unsupported mime type: ${t.mimeType}`)}function nH(e){let t=nq(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw Error(`Unsupported mime type: ${t.mimeType}`)}function nV(e){if(null==e)throw Error("PartUnion is required");if("object"==typeof e)return e;if("string"==typeof e)return{text:e};throw Error(`Unsupported part type: ${typeof e}`)}function n$(e){if(null==e||Array.isArray(e)&&0===e.length)throw Error("PartListUnion is required");return Array.isArray(e)?e.map(e=>nV(e)):[nV(e)]}function nW(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function nJ(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function nK(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function nY(e){if(null==e)throw Error("ContentUnion is required");return nW(e)?e:{role:"user",parts:n$(e)}}function nz(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{let t=nY(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]});if(e.isVertexAI()){let e=nY(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>nY(e)):[nY(t)]}function nX(e){if(null==e||Array.isArray(e)&&0===e.length)throw Error("contents are required");if(!Array.isArray(e)){if(nJ(e)||nK(e))throw Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nY(e)]}let t=[],r=[],n=nW(e[0]);for(let i of e){let e=nW(i);if(e!=n)throw Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(i);else if(nJ(i)||nK(i))throw Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");else r.push(i)}return n||t.push({role:"user",parts:n$(r)}),t}function nZ(e){let t={},r=["items"],n=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw Error("type and anyOf cannot be both populated.");let o=e.anyOf;for(let[s,a]of(null!=o&&2==o.length&&("null"===o[0].type?(t.nullable=!0,e=o[1]):"null"===o[1].type&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);let r=e.filter(e=>"null"!==e);if(1===r.length)t.type=Object.values(eI).includes(r[0].toUpperCase())?r[0].toUpperCase():eI.TYPE_UNSPECIFIED;else for(let e of(t.anyOf=[],r))t.anyOf.push({type:Object.values(eI).includes(e.toUpperCase())?e.toUpperCase():eI.TYPE_UNSPECIFIED})}(e.type,t),Object.entries(e)))if(null!=a)if("type"==s){if("null"===a)throw Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(eI).includes(a.toUpperCase())?a.toUpperCase():eI.TYPE_UNSPECIFIED}else if(r.includes(s))t[s]=nZ(a);else if(n.includes(s)){let e=[];for(let r of a){if("null"==r.type){t.nullable=!0;continue}e.push(nZ(r))}t[s]=e}else if(i.includes(s)){let e={};for(let[t,r]of Object.entries(a))e[t]=nZ(r);t[s]=e}else{if("additionalProperties"===s)continue;t[s]=a}return t}function nQ(e){if("object"==typeof e)return e;if("string"==typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw Error(`Unsupported speechConfig type: ${typeof e}`)}function n0(e){if("multiSpeakerVoiceConfig"in e)throw Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function n1(e){if(e.functionDeclarations)for(let t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=nZ(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=nZ(t.response));return e}function n2(e){if(null==e)throw Error("tools is required");if(!Array.isArray(e))throw Error("tools is required and must be an array of Tools");let t=[];for(let r of e)t.push(r);return t}function n4(e,t){if("string"!=typeof t)throw Error("name must be a string");return function(e,t,r,n=1){let i=!t.startsWith(`${r}/`)&&t.split("/").length===n;if(e.isVertexAI())if(t.startsWith("projects/"))return t;else if(t.startsWith("locations/"))return`projects/${e.getProject()}/${t}`;else if(t.startsWith(`${r}/`))return`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`;else if(i)return`projects/${e.getProject()}/locations/${e.getLocation()}/${r}/${t}`;else return t;return i?`${r}/${t}`:t}(e,t,"cachedContents")}function n3(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function n6(e){return null!=e&&"object"==typeof e&&"video"in e}function n5(e){return null!=e&&"object"==typeof e&&"uri"in e}function n8(e){var t;let r;if(null!=e&&"object"==typeof e&&"name"in e&&(r=e.name),!n5(e)||void 0!==(r=e.uri)){if(!n6(e)||void 0!==(r=null==(t=e.video)?void 0:t.uri)){if("string"==typeof e&&(r=e),void 0===r)throw Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){let e=r.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw Error(`Could not extract file name from URI ${r}`);r=e[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}}function n7(e,t){return e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels"}function n9(e){for(let n of["models","tunedModels","publisherModels"]){var t,r;if(t=e,r=n,null!==t&&"object"==typeof t&&r in t)return e[n]}return[]}function ie(e,t){let r;if("string"==typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))r={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))r={format:"bigquery",bigqueryUri:t};else throw Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))r={fileName:t};else throw Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw Error("InlinedRequest[] is not supported in Vertex AI.");r={inlinedRequests:t}}else r=t;let n=[r.gcsUri,r.bigqueryUri].filter(Boolean).length,i=[r.inlinedRequests,r.fileName].filter(Boolean).length;if(e.isVertexAI()){if(i>0||1!==n)throw Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||1!==i)throw Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return r}function it(e){if("object"!=typeof e||null===e)return{};let t=e.inlinedResponses;if("object"!=typeof t||null===t)return e;let r=t.inlinedResponses;if(!Array.isArray(r)||0===r.length)return e;let n=!1;for(let e of r){if("object"!=typeof e||null===e)continue;let t=e.response;if("object"==typeof t&&null!==t&&void 0!==t.embedding){n=!0;break}}return n&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),e}function ir(e,t){if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw Error(`Invalid batch job name: ${t}.`)}function ii(e){if("BATCH_STATE_UNSPECIFIED"===e)return"JOB_STATE_UNSPECIFIED";if("BATCH_STATE_PENDING"===e)return"JOB_STATE_PENDING";if("BATCH_STATE_RUNNING"===e)return"JOB_STATE_RUNNING";if("BATCH_STATE_SUCCEEDED"===e)return"JOB_STATE_SUCCEEDED";if("BATCH_STATE_FAILED"===e)return"JOB_STATE_FAILED";else if("BATCH_STATE_CANCELLED"===e)return"JOB_STATE_CANCELLED";else if("BATCH_STATE_EXPIRED"===e)return"JOB_STATE_EXPIRED";else return e}function io(e){let t={},r=na(e,["name"]);null!=r&&ns(t,["name"],r);let n=na(e,["metadata","displayName"]);null!=n&&ns(t,["displayName"],n);let i=na(e,["metadata","state"]);null!=i&&ns(t,["state"],ii(i));let o=na(e,["metadata","createTime"]);null!=o&&ns(t,["createTime"],o);let s=na(e,["metadata","endTime"]);null!=s&&ns(t,["endTime"],s);let a=na(e,["metadata","updateTime"]);null!=a&&ns(t,["updateTime"],a);let l=na(e,["metadata","model"]);null!=l&&ns(t,["model"],l);let u=na(e,["metadata","output"]);return null!=u&&ns(t,["dest"],function(e){let t={},r=na(e,["responsesFile"]);null!=r&&ns(t,["fileName"],r);let n=na(e,["inlinedResponses","inlinedResponses"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i;return r={},null!=(n=na(t=e,["response"]))&&ns(r,["response"],function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["candidates"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["content"]);null!=r&&ns(t,["content"],r);let n=na(e,["citationMetadata"]);null!=n&&ns(t,["citationMetadata"],function(e){let t={},r=na(e,["citationSources"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["citations"],e)}return t}(n));let i=na(e,["tokenCount"]);null!=i&&ns(t,["tokenCount"],i);let o=na(e,["finishReason"]);null!=o&&ns(t,["finishReason"],o);let s=na(e,["avgLogprobs"]);null!=s&&ns(t,["avgLogprobs"],s);let a=na(e,["groundingMetadata"]);null!=a&&ns(t,["groundingMetadata"],a);let l=na(e,["index"]);null!=l&&ns(t,["index"],l);let u=na(e,["logprobsResult"]);null!=u&&ns(t,["logprobsResult"],u);let c=na(e,["safetyRatings"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["safetyRatings"],e)}let d=na(e,["urlContextMetadata"]);return null!=d&&ns(t,["urlContextMetadata"],d),t})(e))),ns(t,["candidates"],e)}let i=na(e,["modelVersion"]);null!=i&&ns(t,["modelVersion"],i);let o=na(e,["promptFeedback"]);null!=o&&ns(t,["promptFeedback"],o);let s=na(e,["responseId"]);null!=s&&ns(t,["responseId"],s);let a=na(e,["usageMetadata"]);return null!=a&&ns(t,["usageMetadata"],a),t}(n)),null!=(i=na(t,["error"]))&&ns(r,["error"],i),r})),ns(t,["inlinedResponses"],e)}let i=na(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["inlinedEmbedContentResponses"],e)}return t}(it(u))),t}function is(e){var t,r;let n,i,o,s,a,l,u,c,d={},p=na(e,["name"]);null!=p&&ns(d,["name"],p);let h=na(e,["displayName"]);null!=h&&ns(d,["displayName"],h);let f=na(e,["state"]);null!=f&&ns(d,["state"],ii(f));let g=na(e,["error"]);null!=g&&ns(d,["error"],g);let m=na(e,["createTime"]);null!=m&&ns(d,["createTime"],m);let y=na(e,["startTime"]);null!=y&&ns(d,["startTime"],y);let _=na(e,["endTime"]);null!=_&&ns(d,["endTime"],_);let E=na(e,["updateTime"]);null!=E&&ns(d,["updateTime"],E);let v=na(e,["model"]);null!=v&&ns(d,["model"],v);let b=na(e,["inputConfig"]);null!=b&&ns(d,["src"],(n={},null!=(i=na(r=b,["instancesFormat"]))&&ns(n,["format"],i),null!=(o=na(r,["gcsSource","uris"]))&&ns(n,["gcsUri"],o),null!=(s=na(r,["bigquerySource","inputUri"]))&&ns(n,["bigqueryUri"],s),n));let S=na(e,["outputConfig"]);null!=S&&ns(d,["dest"],(t=it(S),a={},null!=(l=na(t,["predictionsFormat"]))&&ns(a,["format"],l),null!=(u=na(t,["gcsDestination","outputUriPrefix"]))&&ns(a,["gcsUri"],u),null!=(c=na(t,["bigqueryDestination","outputUri"]))&&ns(a,["bigqueryUri"],c),a));let T=na(e,["completionStats"]);return null!=T&&ns(d,["completionStats"],T),d}function ia(e){let t={},r=na(e,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i,o,s,a,l,u,c,d,p,h;return r={},null!=(n=na(t=e,["mediaResolution"]))&&ns(r,["mediaResolution"],n),null!=(i=na(t,["codeExecutionResult"]))&&ns(r,["codeExecutionResult"],i),null!=(o=na(t,["executableCode"]))&&ns(r,["executableCode"],o),null!=(s=na(t,["fileData"]))&&ns(r,["fileData"],function(e){let t={};if(void 0!==na(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let r=na(e,["fileUri"]);null!=r&&ns(t,["fileUri"],r);let n=na(e,["mimeType"]);return null!=n&&ns(t,["mimeType"],n),t}(s)),null!=(a=na(t,["functionCall"]))&&ns(r,["functionCall"],function(e){let t={},r=na(e,["id"]);null!=r&&ns(t,["id"],r);let n=na(e,["args"]);null!=n&&ns(t,["args"],n);let i=na(e,["name"]);if(null!=i&&ns(t,["name"],i),void 0!==na(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==na(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(a)),null!=(l=na(t,["functionResponse"]))&&ns(r,["functionResponse"],l),null!=(u=na(t,["inlineData"]))&&ns(r,["inlineData"],function(e){let t={},r=na(e,["data"]);if(null!=r&&ns(t,["data"],r),void 0!==na(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=na(e,["mimeType"]);return null!=n&&ns(t,["mimeType"],n),t}(u)),null!=(c=na(t,["text"]))&&ns(r,["text"],c),null!=(d=na(t,["thought"]))&&ns(r,["thought"],d),null!=(p=na(t,["thoughtSignature"]))&&ns(r,["thoughtSignature"],p),null!=(h=na(t,["videoMetadata"]))&&ns(r,["videoMetadata"],h),r})),ns(t,["parts"],e)}let n=na(e,["role"]);return null!=n&&ns(t,["role"],n),t}function il(e,t){let r={},n=na(t,["model"]);null!=n&&ns(r,["_url","model"],nL(e,n));let i=na(t,["src"]);null!=i&&ns(r,["batch","inputConfig"],function(e,t){let r={};if(void 0!==na(t,["format"]))throw Error("format parameter is not supported in Gemini API.");if(void 0!==na(t,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==na(t,["bigqueryUri"]))throw Error("bigqueryUri parameter is not supported in Gemini API.");let n=na(t,["fileName"]);null!=n&&ns(r,["fileName"],n);let i=na(t,["inlinedRequests"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>(function(e,t){let r={},n=na(t,["model"]);null!=n&&ns(r,["request","model"],nL(e,n));let i=na(t,["contents"]);if(null!=i){let e=nX(i);Array.isArray(e)&&(e=e.map(e=>ia(e))),ns(r,["request","contents"],e)}let o=na(t,["metadata"]);null!=o&&ns(r,["metadata"],o);let s=na(t,["config"]);return null!=s&&ns(r,["request","generationConfig"],function(e,t,r){var n;let i,o,s,a={},l=na(t,["systemInstruction"]);void 0!==r&&null!=l&&ns(r,["systemInstruction"],ia(nY(l)));let u=na(t,["temperature"]);null!=u&&ns(a,["temperature"],u);let c=na(t,["topP"]);null!=c&&ns(a,["topP"],c);let d=na(t,["topK"]);null!=d&&ns(a,["topK"],d);let p=na(t,["candidateCount"]);null!=p&&ns(a,["candidateCount"],p);let h=na(t,["maxOutputTokens"]);null!=h&&ns(a,["maxOutputTokens"],h);let f=na(t,["stopSequences"]);null!=f&&ns(a,["stopSequences"],f);let g=na(t,["responseLogprobs"]);null!=g&&ns(a,["responseLogprobs"],g);let m=na(t,["logprobs"]);null!=m&&ns(a,["logprobs"],m);let y=na(t,["presencePenalty"]);null!=y&&ns(a,["presencePenalty"],y);let _=na(t,["frequencyPenalty"]);null!=_&&ns(a,["frequencyPenalty"],_);let E=na(t,["seed"]);null!=E&&ns(a,["seed"],E);let v=na(t,["responseMimeType"]);null!=v&&ns(a,["responseMimeType"],v);let b=na(t,["responseSchema"]);null!=b&&ns(a,["responseSchema"],nZ(b));let S=na(t,["responseJsonSchema"]);if(null!=S&&ns(a,["responseJsonSchema"],S),void 0!==na(t,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==na(t,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let T=na(t,["safetySettings"]);if(void 0!==r&&null!=T){let e=T;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["category"]);if(null!=r&&ns(t,["category"],r),void 0!==na(e,["method"]))throw Error("method parameter is not supported in Gemini API.");let n=na(e,["threshold"]);return null!=n&&ns(t,["threshold"],n),t})(e))),ns(r,["safetySettings"],e)}let A=na(t,["tools"]);if(void 0!==r&&null!=A){let e=n2(A);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["functionDeclarations"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["functionDeclarations"],e)}if(void 0!==na(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let n=na(e,["googleSearchRetrieval"]);null!=n&&ns(t,["googleSearchRetrieval"],n);let i=na(e,["computerUse"]);null!=i&&ns(t,["computerUse"],i);let o=na(e,["fileSearch"]);null!=o&&ns(t,["fileSearch"],o);let s=na(e,["codeExecution"]);if(null!=s&&ns(t,["codeExecution"],s),void 0!==na(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=na(e,["googleMaps"]);null!=a&&ns(t,["googleMaps"],function(e){let t={};if(void 0!==na(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let r=na(e,["enableWidget"]);return null!=r&&ns(t,["enableWidget"],r),t}(a));let l=na(e,["googleSearch"]);null!=l&&ns(t,["googleSearch"],function(e){let t={};if(void 0!==na(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==na(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let r=na(e,["timeRangeFilter"]);return null!=r&&ns(t,["timeRangeFilter"],r),t}(l));let u=na(e,["urlContext"]);return null!=u&&ns(t,["urlContext"],u),t})(n1(e)))),ns(r,["tools"],e)}let O=na(t,["toolConfig"]);if(void 0!==r&&null!=O&&ns(r,["toolConfig"],(i={},null!=(o=na(n=O,["functionCallingConfig"]))&&ns(i,["functionCallingConfig"],function(e){let t={},r=na(e,["mode"]);null!=r&&ns(t,["mode"],r);let n=na(e,["allowedFunctionNames"]);if(null!=n&&ns(t,["allowedFunctionNames"],n),void 0!==na(e,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(o)),null!=(s=na(n,["retrievalConfig"]))&&ns(i,["retrievalConfig"],s),i)),void 0!==na(t,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let w=na(t,["cachedContent"]);void 0!==r&&null!=w&&ns(r,["cachedContent"],n4(e,w));let C=na(t,["responseModalities"]);null!=C&&ns(a,["responseModalities"],C);let R=na(t,["mediaResolution"]);null!=R&&ns(a,["mediaResolution"],R);let I=na(t,["speechConfig"]);if(null!=I&&ns(a,["speechConfig"],nQ(I)),void 0!==na(t,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let P=na(t,["thinkingConfig"]);null!=P&&ns(a,["thinkingConfig"],P);let N=na(t,["imageConfig"]);return null!=N&&ns(a,["imageConfig"],function(e){let t={},r=na(e,["aspectRatio"]);null!=r&&ns(t,["aspectRatio"],r);let n=na(e,["imageSize"]);if(null!=n&&ns(t,["imageSize"],n),void 0!==na(e,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==na(e,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(N)),a}(e,s,na(r,["request"],{}))),r})(e,t))),ns(r,["requests","requests"],t)}return r}(e,ie(e,i)));let o=na(t,["config"]);return null!=o&&function(e,t){let r=na(e,["displayName"]);if(void 0!==t&&null!=r&&ns(t,["batch","displayName"],r),void 0!==na(e,["dest"]))throw Error("dest parameter is not supported in Gemini API.")}(o,r),r}(eA=ty||(ty={})).PAGED_ITEM_BATCH_JOBS="batchJobs",eA.PAGED_ITEM_MODELS="models",eA.PAGED_ITEM_TUNING_JOBS="tuningJobs",eA.PAGED_ITEM_FILES="files",eA.PAGED_ITEM_CACHED_CONTENTS="cachedContents",eA.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",eA.PAGED_ITEM_DOCUMENTS="documents";class iu{constructor(e,t,r,n){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,n)}init(e,t,r){var n,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=null==t?void 0:t.sdkHttpResponse,this.idxInternal=0;let o={config:{}};(o=r&&0!==Object.keys(r).length?"object"==typeof r?Object.assign({},r):r:{config:{}}).config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=null!=(i=null==(n=o.config)?void 0:n.pageSize)?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(!this.hasNextPage())return{value:void 0,done:!0};else await this.nextPage();let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return(null==(e=this.params.config)?void 0:e.pageToken)!==void 0}}class ic extends ni{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new iu(ty.PAGED_ITEM_BATCH_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(e){let t=il(this.apiClient,e),r=no("{model}:batchGenerateContent",t._url),n=t.batch.inputConfig.requests,i=n.requests,o=[];for(let e of i){let t=Object.assign({},e);if(t.systemInstruction){let e=t.systemInstruction;delete t.systemInstruction;let r=t.request;r.systemInstruction=e,t.request=r}o.push(t)}return n.requests=o,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){return"string"==typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"==typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,t){let r=t?Object.assign({},t):{},n=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${n}`),void 0===r.dest){let t=this.getGcsUri(e),i=this.getBigqueryUri(e);if(t)t.endsWith(".jsonl")?r.dest=`${t.slice(0,-6)}/dest`:r.dest=`${t}_dest_${n}`;else if(i)r.dest=`${i}_dest_${n}`;else throw Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,n,i,o;let s="",a={};if(this.apiClient.isVertexAI()){let n,i,l,u,c,d,p=(o=this.apiClient,n={},null!=(i=na(e,["model"]))&&ns(n,["model"],nL(o,i)),null!=(l=na(e,["src"]))&&ns(n,["inputConfig"],function(e){let t={},r=na(e,["format"]);null!=r&&ns(t,["instancesFormat"],r);let n=na(e,["gcsUri"]);null!=n&&ns(t,["gcsSource","uris"],n);let i=na(e,["bigqueryUri"]);if(null!=i&&ns(t,["bigquerySource","inputUri"],i),void 0!==na(e,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==na(e,["inlinedRequests"]))throw Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(ie(o,l))),null!=(u=na(e,["config"]))&&(c=na(u,["displayName"]),void 0!==n&&null!=c&&ns(n,["displayName"],c),d=na(u,["dest"]),void 0!==n&&null!=d&&ns(n,["outputConfig"],function(e){let t={},r=na(e,["format"]);null!=r&&ns(t,["predictionsFormat"],r);let n=na(e,["gcsUri"]);null!=n&&ns(t,["gcsDestination","outputUriPrefix"],n);let i=na(e,["bigqueryUri"]);if(null!=i&&ns(t,["bigqueryDestination","outputUri"],i),void 0!==na(e,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==na(e,["inlinedResponses"]))throw Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==na(e,["inlinedEmbedContentResponses"]))throw Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}(function(e){if("string"!=typeof e)return e;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw Error(`Unsupported destination: ${e}`)}(d)))),n);return s=no("batchPredictionJobs",p._url),a=p._query,delete p._url,delete p._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(p),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>is(e))}{let t=il(this.apiClient,e);return s=no("{model}:batchGenerateContent",t._url),a=t._query,delete t._url,delete t._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>io(e))}}async createEmbeddingsInternal(e){var t,r,n,i,o;let s="",a={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let l,u,c,d,p,h,f,g,m=(n=this.apiClient,d={},null!=(p=na(e,["model"]))&&ns(d,["_url","model"],nL(n,p)),null!=(h=na(e,["src"]))&&ns(d,["batch","inputConfig"],(i=n,l={},null!=(u=na(o=h,["fileName"]))&&ns(l,["file_name"],u),null!=(c=na(o,["inlinedRequests"]))&&ns(l,["requests"],function(e,t){let r={},n=na(t,["contents"]);if(null!=n){let t=nz(e,n);Array.isArray(t)&&(t=t.map(e=>e)),ns(r,["requests[]","request","content"],t)}let i=na(t,["config"]);return null!=i&&(ns(r,["_self"],function(e,t){let r=na(e,["taskType"]);void 0!==t&&null!=r&&ns(t,["requests[]","taskType"],r);let n=na(e,["title"]);void 0!==t&&null!=n&&ns(t,["requests[]","title"],n);let i=na(e,["outputDimensionality"]);if(void 0!==t&&null!=i&&ns(t,["requests[]","outputDimensionality"],i),void 0!==na(e,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==na(e,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.");return{}}(i,r)),!function(e,t){for(let[r,n]of Object.entries(t)){let t=r.split("."),i=n.split("."),o=new Set,s=-1;for(let e=0;e<t.length;e++)if("*"===t[e]){s=e;break}if(-1!==s&&i.length>s)for(let e=s;e<i.length;e++){let t=i[e];"*"===t||t.endsWith("[]")||t.endsWith("[0]")||o.add(t)}!function e(t,r,n,i,o){if(i>=r.length||"object"!=typeof t||null===t)return;let s=r[i];if(s.endsWith("[]")){let a=s.slice(0,-2);if(a in t&&Array.isArray(t[a]))for(let s of t[a])e(s,r,n,i+1,o)}else if("*"===s){if("object"==typeof t&&null!==t&&!Array.isArray(t)){let e=Object.keys(t).filter(e=>!e.startsWith("_")&&!o.has(e)),r={};for(let n of e)r[n]=t[n];for(let[e,o]of Object.entries(r)){let r=[];for(let t of n.slice(i))"*"===t?r.push(e):r.push(t);ns(t,r,o)}for(let r of e)delete t[r]}}else s in t&&e(t[s],r,n,i+1,o)}(e,t,i,0,o)}}(r,{"requests[].*":"requests[].request.*"})),r}(i,c)),l)),null!=(f=na(e,["config"]))&&(g=na(f,["displayName"]),void 0!==d&&null!=g&&ns(d,["batch","displayName"],g)),d);return s=no("{model}:asyncBatchEmbedContent",m._url),a=m._query,delete m._url,delete m._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(m),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>io(e))}}async get(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s=(o=this.apiClient,n={},null!=(i=na(e,["name"]))&&ns(n,["_url","name"],ir(o,i)),n);return a=no("batchPredictionJobs/{name}",s._url),l=s._query,delete s._url,delete s._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>is(e))}{let t,r,o=(s=this.apiClient,t={},null!=(r=na(e,["name"]))&&ns(t,["_url","name"],ir(s,r)),t);return a=no("batches/{name}",o._url),l=o._query,delete o._url,delete o._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>io(e))}}async cancel(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s=(o=this.apiClient,n={},null!=(i=na(e,["name"]))&&ns(n,["_url","name"],ir(o,i)),n);a=no("batchPredictionJobs/{name}:cancel",s._url),l=s._query,delete s._url,delete s._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal})}else{let t,r,o=(s=this.apiClient,t={},null!=(r=na(e,["name"]))&&ns(t,["_url","name"],ir(s,r)),t);a=no("batches/{name}:cancel",o._url),l=o._query,delete o._url,delete o._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal})}}async listInternal(e){var t,r,n,i;let o="",s={};if(this.apiClient.isVertexAI()){let n,i,a,l,u,c=(n={},null!=(i=na(e,["config"]))&&(a=na(i,["pageSize"]),void 0!==n&&null!=a&&ns(n,["_query","pageSize"],a),l=na(i,["pageToken"]),void 0!==n&&null!=l&&ns(n,["_query","pageToken"],l),u=na(i,["filter"]),void 0!==n&&null!=u&&ns(n,["_query","filter"],u)),n);return o=no("batchPredictionJobs",c._url),s=c._query,delete c._url,delete c._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["nextPageToken"]);null!=n&&ns(t,["nextPageToken"],n);let i=na(e,["batchPredictionJobs"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>is(e))),ns(t,["batchJobs"],e)}return t}(e),r=new nD;return Object.assign(r,t),r})}{let t,r,a=(t={},null!=(r=na(e,["config"]))&&function(e,t){let r=na(e,["pageSize"]);void 0!==t&&null!=r&&ns(t,["_query","pageSize"],r);let n=na(e,["pageToken"]);if(void 0!==t&&null!=n&&ns(t,["_query","pageToken"],n),void 0!==na(e,["filter"]))throw Error("filter parameter is not supported in Gemini API.")}(r,t),t);return o=no("batches",a._url),s=a._query,delete a._url,delete a._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["nextPageToken"]);null!=n&&ns(t,["nextPageToken"],n);let i=na(e,["operations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>io(e))),ns(t,["batchJobs"],e)}return t}(e),r=new nD;return Object.assign(r,t),r})}}async delete(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s=(o=this.apiClient,n={},null!=(i=na(e,["name"]))&&ns(n,["_url","name"],ir(o,i)),n);return a=no("batchPredictionJobs/{name}",s._url),l=s._query,delete s._url,delete s._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n,i,o;return t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),null!=(n=na(e,["name"]))&&ns(t,["name"],n),null!=(i=na(e,["done"]))&&ns(t,["done"],i),null!=(o=na(e,["error"]))&&ns(t,["error"],o),t})}{let t,r,o=(s=this.apiClient,t={},null!=(r=na(e,["name"]))&&ns(t,["_url","name"],ir(s,r)),t);return a=no("batches/{name}",o._url),l=o._query,delete o._url,delete o._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n,i,o;return t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),null!=(n=na(e,["name"]))&&ns(t,["name"],n),null!=(i=na(e,["done"]))&&ns(t,["done"],i),null!=(o=na(e,["error"]))&&ns(t,["error"],o),t})}}}function id(e){let t={},r=na(e,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i,o,s,a,l,u,c,d,p,h;return r={},null!=(n=na(t=e,["mediaResolution"]))&&ns(r,["mediaResolution"],n),null!=(i=na(t,["codeExecutionResult"]))&&ns(r,["codeExecutionResult"],i),null!=(o=na(t,["executableCode"]))&&ns(r,["executableCode"],o),null!=(s=na(t,["fileData"]))&&ns(r,["fileData"],function(e){let t={};if(void 0!==na(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let r=na(e,["fileUri"]);null!=r&&ns(t,["fileUri"],r);let n=na(e,["mimeType"]);return null!=n&&ns(t,["mimeType"],n),t}(s)),null!=(a=na(t,["functionCall"]))&&ns(r,["functionCall"],function(e){let t={},r=na(e,["id"]);null!=r&&ns(t,["id"],r);let n=na(e,["args"]);null!=n&&ns(t,["args"],n);let i=na(e,["name"]);if(null!=i&&ns(t,["name"],i),void 0!==na(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==na(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(a)),null!=(l=na(t,["functionResponse"]))&&ns(r,["functionResponse"],l),null!=(u=na(t,["inlineData"]))&&ns(r,["inlineData"],function(e){let t={},r=na(e,["data"]);if(null!=r&&ns(t,["data"],r),void 0!==na(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=na(e,["mimeType"]);return null!=n&&ns(t,["mimeType"],n),t}(u)),null!=(c=na(t,["text"]))&&ns(r,["text"],c),null!=(d=na(t,["thought"]))&&ns(r,["thought"],d),null!=(p=na(t,["thoughtSignature"]))&&ns(r,["thoughtSignature"],p),null!=(h=na(t,["videoMetadata"]))&&ns(r,["videoMetadata"],h),r})),ns(t,["parts"],e)}let n=na(e,["role"]);return null!=n&&ns(t,["role"],n),t}class ip extends ni{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new iu(ty.PAGED_ITEM_CACHED_CONTENTS,e=>this.listInternal(e),await this.listInternal(e),e)}async create(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s,u=(o=this.apiClient,n={},null!=(i=na(e,["model"]))&&ns(n,["model"],nG(o,i)),null!=(s=na(e,["config"]))&&function(e,t){let r=na(e,["ttl"]);void 0!==t&&null!=r&&ns(t,["ttl"],r);let n=na(e,["expireTime"]);void 0!==t&&null!=n&&ns(t,["expireTime"],n);let i=na(e,["displayName"]);void 0!==t&&null!=i&&ns(t,["displayName"],i);let o=na(e,["contents"]);if(void 0!==t&&null!=o){let e=nX(o);Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["contents"],e)}let s=na(e,["systemInstruction"]);void 0!==t&&null!=s&&ns(t,["systemInstruction"],nY(s));let a=na(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["functionDeclarations"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==na(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let r=na(e,["description"]);null!=r&&ns(t,["description"],r);let n=na(e,["name"]);null!=n&&ns(t,["name"],n);let i=na(e,["parameters"]);null!=i&&ns(t,["parameters"],i);let o=na(e,["parametersJsonSchema"]);null!=o&&ns(t,["parametersJsonSchema"],o);let s=na(e,["response"]);null!=s&&ns(t,["response"],s);let a=na(e,["responseJsonSchema"]);return null!=a&&ns(t,["responseJsonSchema"],a),t})(e))),ns(t,["functionDeclarations"],e)}let n=na(e,["retrieval"]);null!=n&&ns(t,["retrieval"],n);let i=na(e,["googleSearchRetrieval"]);null!=i&&ns(t,["googleSearchRetrieval"],i);let o=na(e,["computerUse"]);if(null!=o&&ns(t,["computerUse"],o),void 0!==na(e,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let s=na(e,["codeExecution"]);null!=s&&ns(t,["codeExecution"],s);let a=na(e,["enterpriseWebSearch"]);null!=a&&ns(t,["enterpriseWebSearch"],a);let l=na(e,["googleMaps"]);null!=l&&ns(t,["googleMaps"],l);let u=na(e,["googleSearch"]);null!=u&&ns(t,["googleSearch"],u);let c=na(e,["urlContext"]);return null!=c&&ns(t,["urlContext"],c),t})(e))),ns(t,["tools"],e)}let l=na(e,["toolConfig"]);void 0!==t&&null!=l&&ns(t,["toolConfig"],l);let u=na(e,["kmsKeyName"]);void 0!==t&&null!=u&&ns(t,["encryption_spec","kmsKeyName"],u)}(s,n),n);return a=no("cachedContents",u._url),l=u._query,delete u._url,delete u._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}{let t,r,o,u=(s=this.apiClient,t={},null!=(r=na(e,["model"]))&&ns(t,["model"],nG(s,r)),null!=(o=na(e,["config"]))&&function(e,t){var r;let n,i,o,s=na(e,["ttl"]);void 0!==t&&null!=s&&ns(t,["ttl"],s);let a=na(e,["expireTime"]);void 0!==t&&null!=a&&ns(t,["expireTime"],a);let l=na(e,["displayName"]);void 0!==t&&null!=l&&ns(t,["displayName"],l);let u=na(e,["contents"]);if(void 0!==t&&null!=u){let e=nX(u);Array.isArray(e)&&(e=e.map(e=>id(e))),ns(t,["contents"],e)}let c=na(e,["systemInstruction"]);void 0!==t&&null!=c&&ns(t,["systemInstruction"],id(nY(c)));let d=na(e,["tools"]);if(void 0!==t&&null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["functionDeclarations"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["functionDeclarations"],e)}if(void 0!==na(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let n=na(e,["googleSearchRetrieval"]);null!=n&&ns(t,["googleSearchRetrieval"],n);let i=na(e,["computerUse"]);null!=i&&ns(t,["computerUse"],i);let o=na(e,["fileSearch"]);null!=o&&ns(t,["fileSearch"],o);let s=na(e,["codeExecution"]);if(null!=s&&ns(t,["codeExecution"],s),void 0!==na(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=na(e,["googleMaps"]);null!=a&&ns(t,["googleMaps"],function(e){let t={};if(void 0!==na(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let r=na(e,["enableWidget"]);return null!=r&&ns(t,["enableWidget"],r),t}(a));let l=na(e,["googleSearch"]);null!=l&&ns(t,["googleSearch"],function(e){let t={};if(void 0!==na(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==na(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let r=na(e,["timeRangeFilter"]);return null!=r&&ns(t,["timeRangeFilter"],r),t}(l));let u=na(e,["urlContext"]);return null!=u&&ns(t,["urlContext"],u),t})(e))),ns(t,["tools"],e)}let p=na(e,["toolConfig"]);if(void 0!==t&&null!=p&&ns(t,["toolConfig"],(n={},null!=(i=na(r=p,["functionCallingConfig"]))&&ns(n,["functionCallingConfig"],function(e){let t={},r=na(e,["mode"]);null!=r&&ns(t,["mode"],r);let n=na(e,["allowedFunctionNames"]);if(null!=n&&ns(t,["allowedFunctionNames"],n),void 0!==na(e,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(i)),null!=(o=na(r,["retrievalConfig"]))&&ns(n,["retrievalConfig"],o),n)),void 0!==na(e,["kmsKeyName"]))throw Error("kmsKeyName parameter is not supported in Gemini API.")}(o,t),t);return a=no("cachedContents",u._url),l=u._query,delete u._url,delete u._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>e)}}async get(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s=(o=this.apiClient,n={},null!=(i=na(e,["name"]))&&ns(n,["_url","name"],n4(o,i)),n);return a=no("{name}",s._url),l=s._query,delete s._url,delete s._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}{let t,r,o=(s=this.apiClient,t={},null!=(r=na(e,["name"]))&&ns(t,["_url","name"],n4(s,r)),t);return a=no("{name}",o._url),l=o._query,delete o._url,delete o._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s=(o=this.apiClient,n={},null!=(i=na(e,["name"]))&&ns(n,["_url","name"],n4(o,i)),n);return a=no("{name}",s._url),l=s._query,delete s._url,delete s._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n=(t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),t),i=new nO;return Object.assign(i,n),i})}{let t,r,o=(s=this.apiClient,t={},null!=(r=na(e,["name"]))&&ns(t,["_url","name"],n4(s,r)),t);return a=no("{name}",o._url),l=o._query,delete o._url,delete o._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n=(t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),t),i=new nO;return Object.assign(i,n),i})}}async update(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s,u,c,d=(o=this.apiClient,n={},null!=(i=na(e,["name"]))&&ns(n,["_url","name"],n4(o,i)),null!=(s=na(e,["config"]))&&(u=na(s,["ttl"]),void 0!==n&&null!=u&&ns(n,["ttl"],u),c=na(s,["expireTime"]),void 0!==n&&null!=c&&ns(n,["expireTime"],c)),n);return a=no("{name}",d._url),l=d._query,delete d._url,delete d._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}{let t,r,o,u,c,d=(s=this.apiClient,t={},null!=(r=na(e,["name"]))&&ns(t,["_url","name"],n4(s,r)),null!=(o=na(e,["config"]))&&(u=na(o,["ttl"]),void 0!==t&&null!=u&&ns(t,["ttl"],u),c=na(o,["expireTime"]),void 0!==t&&null!=c&&ns(t,["expireTime"],c)),t);return a=no("{name}",d._url),l=d._query,delete d._url,delete d._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>e)}}async listInternal(e){var t,r,n,i;let o="",s={};if(this.apiClient.isVertexAI()){let n,i,a,l,u=(n={},null!=(i=na(e,["config"]))&&(a=na(i,["pageSize"]),void 0!==n&&null!=a&&ns(n,["_query","pageSize"],a),l=na(i,["pageToken"]),void 0!==n&&null!=l&&ns(n,["_query","pageToken"],l)),n);return o=no("cachedContents",u._url),s=u._query,delete u._url,delete u._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["nextPageToken"]);null!=n&&ns(t,["nextPageToken"],n);let i=na(e,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["cachedContents"],e)}return t}(e),r=new nw;return Object.assign(r,t),r})}{let t,r,a,l,u=(t={},null!=(r=na(e,["config"]))&&(a=na(r,["pageSize"]),void 0!==t&&null!=a&&ns(t,["_query","pageSize"],a),l=na(r,["pageToken"]),void 0!==t&&null!=l&&ns(t,["_query","pageToken"],l)),t);return o=no("cachedContents",u._url),s=u._query,delete u._url,delete u._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["nextPageToken"]);null!=n&&ns(t,["nextPageToken"],n);let i=na(e,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["cachedContents"],e)}return t}(e),r=new nw;return Object.assign(r,t),r})}}}function ih(e){return this instanceof ih?(this.v=e,this):new ih(e)}function ig(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||a(e,t)})},t&&(n[e]=t(n[e])))}function a(e,t){try{var r;(r=i[e](t)).value instanceof ih?Promise.resolve(r.value.v).then(l,u):c(o[0][2],r)}catch(e){c(o[0][3],e)}}function l(e){a("next",e)}function u(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function im(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){var o,s,a;o=n,s=i,a=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){o({value:e,done:a})},s)})}}}function iy(e){if(void 0===e.parts||0===e.parts.length)return!1;for(let t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function i_(e){if(void 0===e||0===e.length)return[];let t=[],r=e.length,n=0;for(;n<r;)if("user"===e[n].role)t.push(e[n]),n++;else{let i=[],o=!0;for(;n<r&&"model"===e[n].role;)i.push(e[n]),o&&!iy(e[n])&&(o=!1),n++;o?t.push(...i):t.pop()}return t}"function"==typeof SuppressedError&&SuppressedError;class iE{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new iv(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class iv{constructor(e,t,r,n={},i=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=n,this.history=i,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length){for(let t of e)if("user"!==t.role&&"model"!==t.role)throw Error(`Role must be user or model, but got ${t.role}.`)}}(i)}async sendMessage(e){var t;await this.sendPromise;let r=nY(e.message),n=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:null!=(t=e.config)?t:this.config});return this.sendPromise=(async()=>{var e,t,i;let o=await n,s=null==(t=null==(e=o.candidates)?void 0:e[0])?void 0:t.content,a=o.automaticFunctionCallingHistory,l=this.getHistory(!0).length,u=[];null!=a&&(u=null!=(i=a.slice(l))?i:[]),this.recordHistory(r,s?[s]:[],u)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),n}async sendMessageStream(e){var t;await this.sendPromise;let r=nY(e.message),n=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:null!=(t=e.config)?t:this.config});this.sendPromise=n.then(()=>void 0).catch(()=>void 0);let i=await n;return this.processStreamResponse(i,r)}getHistory(e=!1){return structuredClone(e?i_(this.history):this.history)}processStreamResponse(e,t){var r,n;return ig(this,arguments,function*(){var i,o,s,a;let l=[];try{for(var u,c=!0,d=im(e);!(i=(u=yield ih(d.next())).done);c=!0){if(a=u.value,c=!1,function(e){var t;if(void 0==e.candidates||0===e.candidates.length)return!1;let r=null==(t=e.candidates[0])?void 0:t.content;return void 0!==r&&iy(r)}(a)){let e=null==(n=null==(r=a.candidates)?void 0:r[0])?void 0:n.content;void 0!==e&&l.push(e)}yield yield ih(a)}}catch(e){o={error:e}}finally{try{!c&&!i&&(s=d.return)&&(yield ih(s.call(d)))}finally{if(o)throw o.error}}this.recordHistory(t,l)})}recordHistory(e,t,r){let n=[];t.length>0&&t.every(e=>void 0!==e.role)?n=t:n.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...i_(r)):this.history.push(e),this.history.push(...n)}}class ib extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ib.prototype)}}class iS extends ni{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new iu(ty.PAGED_ITEM_FILES,e=>this.listInternal(e),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>e)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a,l,u=(o={},null!=(s=na(e,["config"]))&&(a=na(s,["pageSize"]),void 0!==o&&null!=a&&ns(o,["_query","pageSize"],a),l=na(s,["pageToken"]),void 0!==o&&null!=l&&ns(o,["_query","pageToken"],l)),o);return n=no("files",u._url),i=u._query,delete u._url,delete u._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["nextPageToken"]);null!=n&&ns(t,["nextPageToken"],n);let i=na(e,["files"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["files"],e)}return t}(e),r=new nN;return Object.assign(r,t),r})}}async createInternal(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a=(o={},null!=(s=na(e,["file"]))&&ns(o,["file"],s),o);return n=no("upload/v1beta/files",a._url),i=a._query,delete a._url,delete a._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>{let t,r,n=(t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),t),i=new nx;return Object.assign(i,n),i})}}async get(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a=(o={},null!=(s=na(e,["name"]))&&ns(o,["_url","file"],n8(s)),o);return n=no("files/{file}",a._url),i=a._query,delete a._url,delete a._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a=(o={},null!=(s=na(e,["name"]))&&ns(o,["_url","file"],n8(s)),o);return n=no("files/{file}",a._url),i=a._query,delete a._url,delete a._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n=(t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),t),i=new nk;return Object.assign(i,n),i})}}}function iT(e){let t={},r=na(e,["data"]);if(null!=r&&ns(t,["data"],r),void 0!==na(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=na(e,["mimeType"]);return null!=n&&ns(t,["mimeType"],n),t}function iA(e){let t={},r=na(e,["languageCode"]);null!=r&&ns(t,["languageCode"],r);let n=na(e,["voiceConfig"]);if(null!=n&&ns(t,["voiceConfig"],n),void 0!==na(e,["multiSpeakerVoiceConfig"]))throw Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function iO(e){let t={},r=na(e,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i,o,s,a,l,u,c,d,p,h;return r={},null!=(n=na(t=e,["mediaResolution"]))&&ns(r,["mediaResolution"],n),null!=(i=na(t,["codeExecutionResult"]))&&ns(r,["codeExecutionResult"],i),null!=(o=na(t,["executableCode"]))&&ns(r,["executableCode"],o),null!=(s=na(t,["fileData"]))&&ns(r,["fileData"],function(e){let t={};if(void 0!==na(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let r=na(e,["fileUri"]);null!=r&&ns(t,["fileUri"],r);let n=na(e,["mimeType"]);return null!=n&&ns(t,["mimeType"],n),t}(s)),null!=(a=na(t,["functionCall"]))&&ns(r,["functionCall"],function(e){let t={},r=na(e,["id"]);null!=r&&ns(t,["id"],r);let n=na(e,["args"]);null!=n&&ns(t,["args"],n);let i=na(e,["name"]);if(null!=i&&ns(t,["name"],i),void 0!==na(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==na(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(a)),null!=(l=na(t,["functionResponse"]))&&ns(r,["functionResponse"],l),null!=(u=na(t,["inlineData"]))&&ns(r,["inlineData"],function(e){let t={},r=na(e,["data"]);if(null!=r&&ns(t,["data"],r),void 0!==na(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=na(e,["mimeType"]);return null!=n&&ns(t,["mimeType"],n),t}(u)),null!=(c=na(t,["text"]))&&ns(r,["text"],c),null!=(d=na(t,["thought"]))&&ns(r,["thought"],d),null!=(p=na(t,["thoughtSignature"]))&&ns(r,["thoughtSignature"],p),null!=(h=na(t,["videoMetadata"]))&&ns(r,["videoMetadata"],h),r})),ns(t,["parts"],e)}let n=na(e,["role"]);return null!=n&&ns(t,["role"],n),t}function iw(e,t){let r={},n=na(t,["model"]);null!=n&&ns(r,["_url","model"],nL(e,n));let i=na(t,["contents"]);if(null!=i){let e=nX(i);Array.isArray(e)&&(e=e.map(e=>iO(e))),ns(r,["contents"],e)}let o=na(t,["config"]);return null!=o&&ns(r,["generationConfig"],function(e,t,r){var n;let i,o,s,a={},l=na(t,["systemInstruction"]);void 0!==r&&null!=l&&ns(r,["systemInstruction"],iO(nY(l)));let u=na(t,["temperature"]);null!=u&&ns(a,["temperature"],u);let c=na(t,["topP"]);null!=c&&ns(a,["topP"],c);let d=na(t,["topK"]);null!=d&&ns(a,["topK"],d);let p=na(t,["candidateCount"]);null!=p&&ns(a,["candidateCount"],p);let h=na(t,["maxOutputTokens"]);null!=h&&ns(a,["maxOutputTokens"],h);let f=na(t,["stopSequences"]);null!=f&&ns(a,["stopSequences"],f);let g=na(t,["responseLogprobs"]);null!=g&&ns(a,["responseLogprobs"],g);let m=na(t,["logprobs"]);null!=m&&ns(a,["logprobs"],m);let y=na(t,["presencePenalty"]);null!=y&&ns(a,["presencePenalty"],y);let _=na(t,["frequencyPenalty"]);null!=_&&ns(a,["frequencyPenalty"],_);let E=na(t,["seed"]);null!=E&&ns(a,["seed"],E);let v=na(t,["responseMimeType"]);null!=v&&ns(a,["responseMimeType"],v);let b=na(t,["responseSchema"]);null!=b&&ns(a,["responseSchema"],nZ(b));let S=na(t,["responseJsonSchema"]);if(null!=S&&ns(a,["responseJsonSchema"],S),void 0!==na(t,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==na(t,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let T=na(t,["safetySettings"]);if(void 0!==r&&null!=T){let e=T;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["category"]);if(null!=r&&ns(t,["category"],r),void 0!==na(e,["method"]))throw Error("method parameter is not supported in Gemini API.");let n=na(e,["threshold"]);return null!=n&&ns(t,["threshold"],n),t})(e))),ns(r,["safetySettings"],e)}let A=na(t,["tools"]);if(void 0!==r&&null!=A){let e=n2(A);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["functionDeclarations"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["functionDeclarations"],e)}if(void 0!==na(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let n=na(e,["googleSearchRetrieval"]);null!=n&&ns(t,["googleSearchRetrieval"],n);let i=na(e,["computerUse"]);null!=i&&ns(t,["computerUse"],i);let o=na(e,["fileSearch"]);null!=o&&ns(t,["fileSearch"],o);let s=na(e,["codeExecution"]);if(null!=s&&ns(t,["codeExecution"],s),void 0!==na(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=na(e,["googleMaps"]);null!=a&&ns(t,["googleMaps"],function(e){let t={};if(void 0!==na(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let r=na(e,["enableWidget"]);return null!=r&&ns(t,["enableWidget"],r),t}(a));let l=na(e,["googleSearch"]);null!=l&&ns(t,["googleSearch"],function(e){let t={};if(void 0!==na(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==na(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let r=na(e,["timeRangeFilter"]);return null!=r&&ns(t,["timeRangeFilter"],r),t}(l));let u=na(e,["urlContext"]);return null!=u&&ns(t,["urlContext"],u),t})(n1(e)))),ns(r,["tools"],e)}let O=na(t,["toolConfig"]);if(void 0!==r&&null!=O&&ns(r,["toolConfig"],(i={},null!=(o=na(n=O,["functionCallingConfig"]))&&ns(i,["functionCallingConfig"],function(e){let t={},r=na(e,["mode"]);null!=r&&ns(t,["mode"],r);let n=na(e,["allowedFunctionNames"]);if(null!=n&&ns(t,["allowedFunctionNames"],n),void 0!==na(e,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(o)),null!=(s=na(n,["retrievalConfig"]))&&ns(i,["retrievalConfig"],s),i)),void 0!==na(t,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let w=na(t,["cachedContent"]);void 0!==r&&null!=w&&ns(r,["cachedContent"],n4(e,w));let C=na(t,["responseModalities"]);null!=C&&ns(a,["responseModalities"],C);let R=na(t,["mediaResolution"]);null!=R&&ns(a,["mediaResolution"],R);let I=na(t,["speechConfig"]);if(null!=I&&ns(a,["speechConfig"],nQ(I)),void 0!==na(t,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let P=na(t,["thinkingConfig"]);null!=P&&ns(a,["thinkingConfig"],P);let N=na(t,["imageConfig"]);return null!=N&&ns(a,["imageConfig"],function(e){let t={},r=na(e,["aspectRatio"]);null!=r&&ns(t,["aspectRatio"],r);let n=na(e,["imageSize"]);if(null!=n&&ns(t,["imageSize"],n),void 0!==na(e,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==na(e,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(N)),a}(e,o,r)),r}function iC(e,t){let r={},n=na(t,["model"]);null!=n&&ns(r,["_url","model"],nL(e,n));let i=na(t,["contents"]);if(null!=i){let e=nX(i);Array.isArray(e)&&(e=e.map(e=>e)),ns(r,["contents"],e)}let o=na(t,["config"]);return null!=o&&ns(r,["generationConfig"],function(e,t,r){var n;let i,o,s,a,l,u={},c=na(t,["systemInstruction"]);void 0!==r&&null!=c&&ns(r,["systemInstruction"],nY(c));let d=na(t,["temperature"]);null!=d&&ns(u,["temperature"],d);let p=na(t,["topP"]);null!=p&&ns(u,["topP"],p);let h=na(t,["topK"]);null!=h&&ns(u,["topK"],h);let f=na(t,["candidateCount"]);null!=f&&ns(u,["candidateCount"],f);let g=na(t,["maxOutputTokens"]);null!=g&&ns(u,["maxOutputTokens"],g);let m=na(t,["stopSequences"]);null!=m&&ns(u,["stopSequences"],m);let y=na(t,["responseLogprobs"]);null!=y&&ns(u,["responseLogprobs"],y);let _=na(t,["logprobs"]);null!=_&&ns(u,["logprobs"],_);let E=na(t,["presencePenalty"]);null!=E&&ns(u,["presencePenalty"],E);let v=na(t,["frequencyPenalty"]);null!=v&&ns(u,["frequencyPenalty"],v);let b=na(t,["seed"]);null!=b&&ns(u,["seed"],b);let S=na(t,["responseMimeType"]);null!=S&&ns(u,["responseMimeType"],S);let T=na(t,["responseSchema"]);null!=T&&ns(u,["responseSchema"],nZ(T));let A=na(t,["responseJsonSchema"]);null!=A&&ns(u,["responseJsonSchema"],A);let O=na(t,["routingConfig"]);null!=O&&ns(u,["routingConfig"],O);let w=na(t,["modelSelectionConfig"]);null!=w&&ns(u,["modelConfig"],w);let C=na(t,["safetySettings"]);if(void 0!==r&&null!=C){let e=C;Array.isArray(e)&&(e=e.map(e=>e)),ns(r,["safetySettings"],e)}let R=na(t,["tools"]);if(void 0!==r&&null!=R){let e=n2(R);Array.isArray(e)&&(e=e.map(e=>iG(n1(e)))),ns(r,["tools"],e)}let I=na(t,["toolConfig"]);void 0!==r&&null!=I&&ns(r,["toolConfig"],I);let P=na(t,["labels"]);void 0!==r&&null!=P&&ns(r,["labels"],P);let N=na(t,["cachedContent"]);void 0!==r&&null!=N&&ns(r,["cachedContent"],n4(e,N));let x=na(t,["responseModalities"]);null!=x&&ns(u,["responseModalities"],x);let k=na(t,["mediaResolution"]);null!=k&&ns(u,["mediaResolution"],k);let D=na(t,["speechConfig"]);null!=D&&ns(u,["speechConfig"],iL(nQ(D)));let M=na(t,["audioTimestamp"]);null!=M&&ns(u,["audioTimestamp"],M);let U=na(t,["thinkingConfig"]);null!=U&&ns(u,["thinkingConfig"],U);let j=na(t,["imageConfig"]);return null!=j&&ns(u,["imageConfig"],(i={},null!=(o=na(n=j,["aspectRatio"]))&&ns(i,["aspectRatio"],o),null!=(s=na(n,["imageSize"]))&&ns(i,["imageSize"],s),null!=(a=na(n,["outputMimeType"]))&&ns(i,["imageOutputOptions","mimeType"],a),null!=(l=na(n,["outputCompressionQuality"]))&&ns(i,["imageOutputOptions","compressionQuality"],l),i)),u}(e,o,r)),r}function iR(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["candidates"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["content"]);null!=r&&ns(t,["content"],r);let n=na(e,["citationMetadata"]);null!=n&&ns(t,["citationMetadata"],function(e){let t={},r=na(e,["citationSources"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["citations"],e)}return t}(n));let i=na(e,["tokenCount"]);null!=i&&ns(t,["tokenCount"],i);let o=na(e,["finishReason"]);null!=o&&ns(t,["finishReason"],o);let s=na(e,["avgLogprobs"]);null!=s&&ns(t,["avgLogprobs"],s);let a=na(e,["groundingMetadata"]);null!=a&&ns(t,["groundingMetadata"],a);let l=na(e,["index"]);null!=l&&ns(t,["index"],l);let u=na(e,["logprobsResult"]);null!=u&&ns(t,["logprobsResult"],u);let c=na(e,["safetyRatings"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["safetyRatings"],e)}let d=na(e,["urlContextMetadata"]);return null!=d&&ns(t,["urlContextMetadata"],d),t})(e))),ns(t,["candidates"],e)}let i=na(e,["modelVersion"]);null!=i&&ns(t,["modelVersion"],i);let o=na(e,["promptFeedback"]);null!=o&&ns(t,["promptFeedback"],o);let s=na(e,["responseId"]);null!=s&&ns(t,["responseId"],s);let a=na(e,["usageMetadata"]);return null!=a&&ns(t,["usageMetadata"],a),t}function iI(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["candidates"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["candidates"],e)}let i=na(e,["createTime"]);null!=i&&ns(t,["createTime"],i);let o=na(e,["modelVersion"]);null!=o&&ns(t,["modelVersion"],o);let s=na(e,["promptFeedback"]);null!=s&&ns(t,["promptFeedback"],s);let a=na(e,["responseId"]);null!=a&&ns(t,["responseId"],a);let l=na(e,["usageMetadata"]);return null!=l&&ns(t,["usageMetadata"],l),t}function iP(e){let t={},r=na(e,["_self"]);null!=r&&ns(t,["image"],iN(r));let n=na(e,["raiFilteredReason"]);null!=n&&ns(t,["raiFilteredReason"],n);let i=na(e,["_self"]);null!=i&&ns(t,["safetyAttributes"],ij(i));let o=na(e,["prompt"]);return null!=o&&ns(t,["enhancedPrompt"],o),t}function iN(e){let t={},r=na(e,["gcsUri"]);null!=r&&ns(t,["gcsUri"],r);let n=na(e,["bytesBase64Encoded"]);null!=n&&ns(t,["imageBytes"],nl(n));let i=na(e,["mimeType"]);return null!=i&&ns(t,["mimeType"],i),t}function ix(e){let t={};if(void 0!==na(e,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");let r=na(e,["imageBytes"]);null!=r&&ns(t,["bytesBase64Encoded"],nl(r));let n=na(e,["mimeType"]);return null!=n&&ns(t,["mimeType"],n),t}function ik(e){let t={},r=na(e,["gcsUri"]);null!=r&&ns(t,["gcsUri"],r);let n=na(e,["imageBytes"]);null!=n&&ns(t,["bytesBase64Encoded"],nl(n));let i=na(e,["mimeType"]);return null!=i&&ns(t,["mimeType"],i),t}function iD(e){var t;let r,n,i,o,s={},a=na(e,["name"]);null!=a&&ns(s,["name"],a);let l=na(e,["displayName"]);null!=l&&ns(s,["displayName"],l);let u=na(e,["description"]);null!=u&&ns(s,["description"],u);let c=na(e,["version"]);null!=c&&ns(s,["version"],c);let d=na(e,["_self"]);null!=d&&ns(s,["tunedModelInfo"],(r={},null!=(n=na(t=d,["baseModel"]))&&ns(r,["baseModel"],n),null!=(i=na(t,["createTime"]))&&ns(r,["createTime"],i),null!=(o=na(t,["updateTime"]))&&ns(r,["updateTime"],o),r));let p=na(e,["inputTokenLimit"]);null!=p&&ns(s,["inputTokenLimit"],p);let h=na(e,["outputTokenLimit"]);null!=h&&ns(s,["outputTokenLimit"],h);let f=na(e,["supportedGenerationMethods"]);null!=f&&ns(s,["supportedActions"],f);let g=na(e,["temperature"]);null!=g&&ns(s,["temperature"],g);let m=na(e,["maxTemperature"]);null!=m&&ns(s,["maxTemperature"],m);let y=na(e,["topP"]);null!=y&&ns(s,["topP"],y);let _=na(e,["topK"]);null!=_&&ns(s,["topK"],_);let E=na(e,["thinking"]);return null!=E&&ns(s,["thinking"],E),s}function iM(e){var t;let r,n,i,o,s={},a=na(e,["name"]);null!=a&&ns(s,["name"],a);let l=na(e,["displayName"]);null!=l&&ns(s,["displayName"],l);let u=na(e,["description"]);null!=u&&ns(s,["description"],u);let c=na(e,["versionId"]);null!=c&&ns(s,["version"],c);let d=na(e,["deployedModels"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>{let t,r,n;return t={},null!=(r=na(e,["endpoint"]))&&ns(t,["name"],r),null!=(n=na(e,["deployedModelId"]))&&ns(t,["deployedModelId"],n),t})),ns(s,["endpoints"],e)}let p=na(e,["labels"]);null!=p&&ns(s,["labels"],p);let h=na(e,["_self"]);null!=h&&ns(s,["tunedModelInfo"],(r={},null!=(n=na(t=h,["labels","google-vertex-llm-tuning-base-model-id"]))&&ns(r,["baseModel"],n),null!=(i=na(t,["createTime"]))&&ns(r,["createTime"],i),null!=(o=na(t,["updateTime"]))&&ns(r,["updateTime"],o),r));let f=na(e,["defaultCheckpointId"]);null!=f&&ns(s,["defaultCheckpointId"],f);let g=na(e,["checkpoints"]);if(null!=g){let e=g;Array.isArray(e)&&(e=e.map(e=>e)),ns(s,["checkpoints"],e)}return s}function iU(e){let t={},r=na(e,["safetyAttributes","categories"]);null!=r&&ns(t,["categories"],r);let n=na(e,["safetyAttributes","scores"]);null!=n&&ns(t,["scores"],n);let i=na(e,["contentType"]);return null!=i&&ns(t,["contentType"],i),t}function ij(e){let t={},r=na(e,["safetyAttributes","categories"]);null!=r&&ns(t,["categories"],r);let n=na(e,["safetyAttributes","scores"]);null!=n&&ns(t,["scores"],n);let i=na(e,["contentType"]);return null!=i&&ns(t,["contentType"],i),t}function iL(e){let t={},r=na(e,["languageCode"]);null!=r&&ns(t,["languageCode"],r);let n=na(e,["voiceConfig"]);if(null!=n&&ns(t,["voiceConfig"],n),void 0!==na(e,["multiSpeakerVoiceConfig"]))throw Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function iG(e){let t={},r=na(e,["functionDeclarations"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==na(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let r=na(e,["description"]);null!=r&&ns(t,["description"],r);let n=na(e,["name"]);null!=n&&ns(t,["name"],n);let i=na(e,["parameters"]);null!=i&&ns(t,["parameters"],i);let o=na(e,["parametersJsonSchema"]);null!=o&&ns(t,["parametersJsonSchema"],o);let s=na(e,["response"]);null!=s&&ns(t,["response"],s);let a=na(e,["responseJsonSchema"]);return null!=a&&ns(t,["responseJsonSchema"],a),t})(e))),ns(t,["functionDeclarations"],e)}let n=na(e,["retrieval"]);null!=n&&ns(t,["retrieval"],n);let i=na(e,["googleSearchRetrieval"]);null!=i&&ns(t,["googleSearchRetrieval"],i);let o=na(e,["computerUse"]);if(null!=o&&ns(t,["computerUse"],o),void 0!==na(e,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let s=na(e,["codeExecution"]);null!=s&&ns(t,["codeExecution"],s);let a=na(e,["enterpriseWebSearch"]);null!=a&&ns(t,["enterpriseWebSearch"],a);let l=na(e,["googleMaps"]);null!=l&&ns(t,["googleMaps"],l);let u=na(e,["googleSearch"]);null!=u&&ns(t,["googleSearch"],u);let c=na(e,["urlContext"]);return null!=c&&ns(t,["urlContext"],c),t}function iF(e){let t={},r=na(e,["uri"]);null!=r&&ns(t,["uri"],r);let n=na(e,["videoBytes"]);null!=n&&ns(t,["encodedVideo"],nl(n));let i=na(e,["mimeType"]);return null!=i&&ns(t,["encoding"],i),t}function iq(e){let t={},r=na(e,["uri"]);null!=r&&ns(t,["gcsUri"],r);let n=na(e,["videoBytes"]);null!=n&&ns(t,["bytesBase64Encoded"],nl(n));let i=na(e,["mimeType"]);return null!=i&&ns(t,["mimeType"],i),t}function iB(e,t){let r=na(e,["mimeType"]);void 0!==t&&null!=r&&ns(t,["mimeType"],r);let n=na(e,["displayName"]);void 0!==t&&null!=n&&ns(t,["displayName"],n);let i=na(e,["customMetadata"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["customMetadata"],e)}let o=na(e,["chunkingConfig"]);return void 0!==t&&null!=o&&ns(t,["chunkingConfig"],o),{}}let iH="x-goog-api-client",iV=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class i${constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const n={};this.clientOptions.vertexai?(n.apiVersion=null!=(t=this.clientOptions.apiVersion)?t:"v1beta1",n.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(n.apiVersion=null!=(r=this.clientOptions.apiVersion)?r:"v1beta",n.baseUrl="https://generativelanguage.googleapis.com/"),n.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=n,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(n,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return null!=(e=this.clientOptions.vertexai)&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw Error("HTTP options are not correctly set.");let t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=new URL(this.getBaseUrl());return e.protocol="http:"==e.protocol?"ws":"wss",e.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw Error("HTTP options are not correctly set.")}constructUrl(e,t,r){let n=[this.getRequestUrlInternal(t)];return r&&n.push(this.getBaseResourcePath()),""!==e&&n.push(e),new URL(`${n.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||"GET"===e.httpMethod&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e),n=this.constructUrl(e.path,t,r);if(e.queryParams)for(let[t,r]of Object.entries(e.queryParams))n.searchParams.append(t,String(r));let i={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,n.toString(),e.abortSignal),this.unaryApiCall(n,i,e.httpMethod)}patchHttpOptions(e,t){let r=JSON.parse(JSON.stringify(e));for(let[e,n]of Object.entries(t))"object"==typeof n?r[e]=Object.assign(Object.assign({},r[e]),n):void 0!==n&&(r[e]=n);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e),n=this.constructUrl(e.path,t,r);n.searchParams.has("alt")&&"sse"===n.searchParams.get("alt")||n.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,n.toString(),e.abortSignal),this.streamApiCall(n,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r,n){if(t&&t.timeout||n){let r=new AbortController,i=r.signal;if(t.timeout&&(null==t?void 0:t.timeout)>0){let e=setTimeout(()=>r.abort(),t.timeout);e&&"function"==typeof e.unref&&e.unref()}n&&n.addEventListener("abort",()=>{r.abort()}),e.signal=i}return t&&null!==t.extraBody&&function(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let r={};if("string"==typeof e.body&&e.body.length>0)try{let t=JSON.parse(e.body);if("object"!=typeof t||null===t||Array.isArray(t))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");r=t}catch(e){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}e.body=JSON.stringify(function e(t,r){let n=Object.assign({},t);for(let t in r)if(Object.prototype.hasOwnProperty.call(r,t)){let i=r[t],o=n[t];i&&"object"==typeof i&&!Array.isArray(i)&&o&&"object"==typeof o&&!Array.isArray(o)?n[t]=e(o,i):(o&&i&&typeof o!=typeof i&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${t}". Original type: ${typeof o}, New type: ${typeof i}. Overwriting.`),n[t]=i)}return n}(r,t))}(e,t.extraBody),e.headers=await this.getHeadersInternal(t,r),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async e=>(await iW(e),new nc(e))).catch(e=>{if(e instanceof Error)throw e;throw Error(JSON.stringify(e))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async e=>(await iW(e),this.processStreamResponse(e))).catch(e=>{if(e instanceof Error)throw e;throw Error(JSON.stringify(e))})}processStreamResponse(e){var t;return ig(this,arguments,function*(){let r=null==(t=null==e?void 0:e.body)?void 0:t.getReader(),n=new TextDecoder("utf-8");if(!r)throw Error("Response body is empty");try{let t="";for(;;){let{done:i,value:o}=yield ih(r.read());if(i){if(t.trim().length>0)throw Error("Incomplete JSON segment at the end");break}let s=n.decode(o,{stream:!0});try{let e=JSON.parse(s);if("error"in e){let t=JSON.parse(JSON.stringify(e.error)),r=t.status,n=t.code,i=`got status: ${r}. ${JSON.stringify(e)}`;if(n>=400&&n<600)throw new ib({message:i,status:n})}}catch(e){if("ApiError"===e.name)throw e}let a=(t+=s).match(iV);for(;a;){let r=a[1];try{let n=new Response(r,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield ih(new nc(n)),a=(t=t.slice(a[0].length)).match(iV)}catch(e){throw Error(`exception parsing stream chunk ${r}. ${e}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(e=>{throw Error(`exception ${e} sending request`)})}getDefaultHeaders(){let e={},t="google-genai-sdk/1.31.0 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[iH]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e,t){let r=new Headers;if(e&&e.headers){for(let[t,n]of Object.entries(e.headers))r.append(t,n);e.timeout&&e.timeout>0&&r.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,t),r}getFileName(e){var t;let r="";return"string"==typeof e&&(r=null!=(t=(r=e.replace(/[/\\]+$/,"")).split(/[/\\]/).pop())?t:""),r}async uploadFile(e,t){var r;let n={};null!=t&&(n.mimeType=t.mimeType,n.name=t.name,n.displayName=t.displayName),n.name&&!n.name.startsWith("files/")&&(n.name=`files/${n.name}`);let i=this.clientOptions.uploader,o=await i.stat(e);n.sizeBytes=String(o.size);let s=null!=(r=null==t?void 0:t.mimeType)?r:o.type;if(void 0===s||""===s)throw Error("Can not determine mimeType. Please provide mimeType in the config.");n.mimeType=s;let a={file:n},l=this.getFileName(e),u=no("upload/v1beta/files",a._url),c=await this.fetchUploadUrl(u,n.sizeBytes,n.mimeType,l,a,null==t?void 0:t.httpOptions);return i.upload(e,c,this)}async uploadFileToFileSearchStore(e,t,r){var n;let i=this.clientOptions.uploader,o=await i.stat(t),s=String(o.size),a=null!=(n=null==r?void 0:r.mimeType)?n:o.type;if(void 0===a||""===a)throw Error("Can not determine mimeType. Please provide mimeType in the config.");let l=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(t),c={};null!=r&&iB(r,c);let d=await this.fetchUploadUrl(l,s,a,u,c,null==r?void 0:r.httpOptions);return i.uploadToFileSearchStore(t,d,this)}async downloadFile(e){let t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t,r,n,i,o){var s;let a={};a=o||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${r}`},n?{"X-Goog-Upload-File-Name":n}:{})};let l=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:a});if(!l||!(null==l?void 0:l.headers))throw Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let u=null==(s=null==l?void 0:l.headers)?void 0:s["x-goog-upload-url"];if(void 0===u)throw Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function iW(e){var t;if(void 0===e)throw Error("response is undefined");if(!e.ok){let r=e.status,n=JSON.stringify((null==(t=e.headers.get("content-type"))?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}});if(r>=400&&r<600)throw new ib({message:n,status:r});throw Error(n)}}function iJ(e){for(let r of e){var t;if(null!==(t=r)&&"object"==typeof t&&t instanceof iY||"object"==typeof r&&"inputSchema"in r)return!0}return!1}function iK(e){var t;let r=null!=(t=e[iH])?t:"";e[iH]=(r+" mcp_used/unknown").trimStart()}class iY{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new iY(e,t)}async initialize(){var e,t,r,n;if(this.mcpTools.length>0)return;let i={},o=[];for(let u of this.mcpClients)try{for(var s,a=!0,l=(t=void 0,im(function(e,t=100){return ig(this,arguments,function*(){let r,n=0;for(;n<t;){let t=yield ih(e.listTools({cursor:r}));for(let e of t.tools)yield yield ih(e),n++;if(!t.nextCursor)break;r=t.nextCursor}})}(u)));!(e=(s=await l.next()).done);a=!0){n=s.value,a=!1,o.push(n);let e=n.name;if(i[e])throw Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);i[e]=u}}catch(e){t={error:e}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),function(e,t={}){let r=[],n=new Set;for(let i of e){let e=i.name;if(n.has(e))throw Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);n.add(e);let o=function(e,t={}){let r={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(r.responseJsonSchema=e.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}(i,t);o.functionDeclarations&&r.push(...o.functionDeclarations)}return{functionDeclarations:r}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();let t=[];for(let r of e)if(r.name in this.functionNameToMcpClient){let e,n=this.functionNameToMcpClient[r.name];this.config.timeout&&(e={timeout:this.config.timeout});let i=await n.callTool({name:r.name,arguments:r.args},void 0,e);t.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return t}}async function iz(e,t,r){let n=new nU;Object.assign(n,r.data instanceof Blob?JSON.parse(await r.data.text()):JSON.parse(r.data)),t(n)}class iX{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;let n;if(this.apiClient.isVertexAI())throw Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=function(e){let t=new Headers;for(let[r,n]of Object.entries(e))t.append(r,n);return t}(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`,u=()=>{},c=new Promise(e=>{u=e}),d=e.callbacks,p=this.apiClient,h={onopen:function(){u({})},onmessage:e=>{iz(p,d.onmessage,e)},onerror:null!=(t=null==d?void 0:d.onerror)?t:function(e){},onclose:null!=(r=null==d?void 0:d.onclose)?r:function(e){}},f=this.webSocketFactory.create(l,(n={},s.forEach((e,t)=>{n[t]=e}),n),h);f.connect(),await c;let g=nL(this.apiClient,e.model);return f.send(JSON.stringify({setup:{model:g}})),new iZ(f,this.apiClient)}}class iZ{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw Error("Weighted prompts must be set and contain at least one entry.");let t=function(e){let t={},r=na(e,["weightedPrompts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["weightedPrompts"],e)}return t}(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){let t,r;e.musicGenerationConfig||(e.musicGenerationConfig={});let n=(t={},null!=(r=na(e,["musicGenerationConfig"]))&&ns(t,["musicGenerationConfig"],r),t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){this.conn.send(JSON.stringify({playbackControl:e}))}play(){this.sendPlaybackControl(tm.PLAY)}pause(){this.sendPlaybackControl(tm.PAUSE)}stop(){this.sendPlaybackControl(tm.STOP)}resetContext(){this.sendPlaybackControl(tm.RESET_CONTEXT)}close(){this.conn.close()}}async function iQ(e,t,r){let n=new nM,i=JSON.parse(r.data instanceof Blob?await r.data.text():r.data instanceof ArrayBuffer?new TextDecoder().decode(r.data):r.data);if(e.isVertexAI()){let e,t,r,o,s,a,l,u;Object.assign(n,(e={},null!=(t=na(i,["setupComplete"]))&&ns(e,["setupComplete"],t),null!=(r=na(i,["serverContent"]))&&ns(e,["serverContent"],r),null!=(o=na(i,["toolCall"]))&&ns(e,["toolCall"],o),null!=(s=na(i,["toolCallCancellation"]))&&ns(e,["toolCallCancellation"],s),null!=(a=na(i,["usageMetadata"]))&&ns(e,["usageMetadata"],function(e){let t={},r=na(e,["promptTokenCount"]);null!=r&&ns(t,["promptTokenCount"],r);let n=na(e,["cachedContentTokenCount"]);null!=n&&ns(t,["cachedContentTokenCount"],n);let i=na(e,["candidatesTokenCount"]);null!=i&&ns(t,["responseTokenCount"],i);let o=na(e,["toolUsePromptTokenCount"]);null!=o&&ns(t,["toolUsePromptTokenCount"],o);let s=na(e,["thoughtsTokenCount"]);null!=s&&ns(t,["thoughtsTokenCount"],s);let a=na(e,["totalTokenCount"]);null!=a&&ns(t,["totalTokenCount"],a);let l=na(e,["promptTokensDetails"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["promptTokensDetails"],e)}let u=na(e,["cacheTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["cacheTokensDetails"],e)}let c=na(e,["candidatesTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["responseTokensDetails"],e)}let d=na(e,["toolUsePromptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["toolUsePromptTokensDetails"],e)}let p=na(e,["trafficType"]);return null!=p&&ns(t,["trafficType"],p),t}(a)),null!=(l=na(i,["goAway"]))&&ns(e,["goAway"],l),null!=(u=na(i,["sessionResumptionUpdate"]))&&ns(e,["sessionResumptionUpdate"],u),e))}else Object.assign(n,i);t(n)}class i0{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new iX(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,n,i,o,s,a,l;let u,c;if(e.config&&e.config.httpOptions)throw Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let d=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion(),h=this.apiClient.getHeaders();e.config&&e.config.tools&&iJ(e.config.tools)&&iK(h);let f=function(e){let t=new Headers;for(let[r,n]of Object.entries(e))t.append(r,n);return t}(h);if(this.apiClient.isVertexAI())u=`${d}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(f,u);else{let e=this.apiClient.getApiKey(),t="BidiGenerateContent",r="key";(null==e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==p&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),t="BidiGenerateContentConstrained",r="access_token"),u=`${d}/ws/google.ai.generativelanguage.${p}.GenerativeService.${t}?${r}=${e}`}let g=()=>{},m=new Promise(e=>{g=e}),y=e.callbacks,_=this.apiClient,E={onopen:function(){var e;null==(e=null==y?void 0:y.onopen)||e.call(y),g({})},onmessage:e=>{iQ(_,y.onmessage,e)},onerror:null!=(t=null==y?void 0:y.onerror)?t:function(e){},onclose:null!=(r=null==y?void 0:y.onclose)?r:function(e){}},v=this.webSocketFactory.create(u,(c={},f.forEach((e,t)=>{c[t]=e}),c),E);v.connect(),await m;let b=nL(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&b.startsWith("publishers/")){let e=this.apiClient.getProject(),t=this.apiClient.getLocation();b=`projects/${e}/locations/${t}/`+b}let S={};this.apiClient.isVertexAI()&&(null==(n=e.config)?void 0:n.responseModalities)===void 0&&(void 0===e.config?e.config={responseModalities:[e$.AUDIO]}:e.config.responseModalities=[e$.AUDIO]),(null==(i=e.config)?void 0:i.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let T=null!=(s=null==(o=e.config)?void 0:o.tools)?s:[],A=[];for(let e of T)this.isCallableTool(e)?A.push(await e.tool()):A.push(e);A.length>0&&(e.config.tools=A);let O={model:b,config:e.config,callbacks:e.callbacks};if(this.apiClient.isVertexAI()){let e,t,r;a=this.apiClient,e={},null!=(t=na(O,["model"]))&&ns(e,["setup","model"],nL(a,t)),null!=(r=na(O,["config"]))&&ns(e,["config"],function(e,t){let r=na(e,["generationConfig"]);void 0!==t&&null!=r&&ns(t,["setup","generationConfig"],function(e){let t={},r=na(e,["modelSelectionConfig"]);null!=r&&ns(t,["modelConfig"],r);let n=na(e,["responseJsonSchema"]);null!=n&&ns(t,["responseJsonSchema"],n);let i=na(e,["audioTimestamp"]);null!=i&&ns(t,["audioTimestamp"],i);let o=na(e,["candidateCount"]);null!=o&&ns(t,["candidateCount"],o);let s=na(e,["enableAffectiveDialog"]);null!=s&&ns(t,["enableAffectiveDialog"],s);let a=na(e,["frequencyPenalty"]);null!=a&&ns(t,["frequencyPenalty"],a);let l=na(e,["logprobs"]);null!=l&&ns(t,["logprobs"],l);let u=na(e,["maxOutputTokens"]);null!=u&&ns(t,["maxOutputTokens"],u);let c=na(e,["mediaResolution"]);null!=c&&ns(t,["mediaResolution"],c);let d=na(e,["presencePenalty"]);null!=d&&ns(t,["presencePenalty"],d);let p=na(e,["responseLogprobs"]);null!=p&&ns(t,["responseLogprobs"],p);let h=na(e,["responseMimeType"]);null!=h&&ns(t,["responseMimeType"],h);let f=na(e,["responseModalities"]);null!=f&&ns(t,["responseModalities"],f);let g=na(e,["responseSchema"]);null!=g&&ns(t,["responseSchema"],g);let m=na(e,["routingConfig"]);null!=m&&ns(t,["routingConfig"],m);let y=na(e,["seed"]);null!=y&&ns(t,["seed"],y);let _=na(e,["speechConfig"]);null!=_&&ns(t,["speechConfig"],iA(_));let E=na(e,["stopSequences"]);null!=E&&ns(t,["stopSequences"],E);let v=na(e,["temperature"]);null!=v&&ns(t,["temperature"],v);let b=na(e,["thinkingConfig"]);null!=b&&ns(t,["thinkingConfig"],b);let S=na(e,["topK"]);null!=S&&ns(t,["topK"],S);let T=na(e,["topP"]);if(null!=T&&ns(t,["topP"],T),void 0!==na(e,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(r));let n=na(e,["responseModalities"]);void 0!==t&&null!=n&&ns(t,["setup","generationConfig","responseModalities"],n);let i=na(e,["temperature"]);void 0!==t&&null!=i&&ns(t,["setup","generationConfig","temperature"],i);let o=na(e,["topP"]);void 0!==t&&null!=o&&ns(t,["setup","generationConfig","topP"],o);let s=na(e,["topK"]);void 0!==t&&null!=s&&ns(t,["setup","generationConfig","topK"],s);let a=na(e,["maxOutputTokens"]);void 0!==t&&null!=a&&ns(t,["setup","generationConfig","maxOutputTokens"],a);let l=na(e,["mediaResolution"]);void 0!==t&&null!=l&&ns(t,["setup","generationConfig","mediaResolution"],l);let u=na(e,["seed"]);void 0!==t&&null!=u&&ns(t,["setup","generationConfig","seed"],u);let c=na(e,["speechConfig"]);void 0!==t&&null!=c&&ns(t,["setup","generationConfig","speechConfig"],iA(n0(c)));let d=na(e,["thinkingConfig"]);void 0!==t&&null!=d&&ns(t,["setup","generationConfig","thinkingConfig"],d);let p=na(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&ns(t,["setup","generationConfig","enableAffectiveDialog"],p);let h=na(e,["systemInstruction"]);void 0!==t&&null!=h&&ns(t,["setup","systemInstruction"],nY(h));let f=na(e,["tools"]);if(void 0!==t&&null!=f){let e=n2(f);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["functionDeclarations"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==na(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let r=na(e,["description"]);null!=r&&ns(t,["description"],r);let n=na(e,["name"]);null!=n&&ns(t,["name"],n);let i=na(e,["parameters"]);null!=i&&ns(t,["parameters"],i);let o=na(e,["parametersJsonSchema"]);null!=o&&ns(t,["parametersJsonSchema"],o);let s=na(e,["response"]);null!=s&&ns(t,["response"],s);let a=na(e,["responseJsonSchema"]);return null!=a&&ns(t,["responseJsonSchema"],a),t})(e))),ns(t,["functionDeclarations"],e)}let n=na(e,["retrieval"]);null!=n&&ns(t,["retrieval"],n);let i=na(e,["googleSearchRetrieval"]);null!=i&&ns(t,["googleSearchRetrieval"],i);let o=na(e,["computerUse"]);if(null!=o&&ns(t,["computerUse"],o),void 0!==na(e,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let s=na(e,["codeExecution"]);null!=s&&ns(t,["codeExecution"],s);let a=na(e,["enterpriseWebSearch"]);null!=a&&ns(t,["enterpriseWebSearch"],a);let l=na(e,["googleMaps"]);null!=l&&ns(t,["googleMaps"],l);let u=na(e,["googleSearch"]);null!=u&&ns(t,["googleSearch"],u);let c=na(e,["urlContext"]);return null!=c&&ns(t,["urlContext"],c),t})(n1(e)))),ns(t,["setup","tools"],e)}let g=na(e,["sessionResumption"]);void 0!==t&&null!=g&&ns(t,["setup","sessionResumption"],g);let m=na(e,["inputAudioTranscription"]);void 0!==t&&null!=m&&ns(t,["setup","inputAudioTranscription"],m);let y=na(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&ns(t,["setup","outputAudioTranscription"],y);let _=na(e,["realtimeInputConfig"]);void 0!==t&&null!=_&&ns(t,["setup","realtimeInputConfig"],_);let E=na(e,["contextWindowCompression"]);void 0!==t&&null!=E&&ns(t,["setup","contextWindowCompression"],E);let v=na(e,["proactivity"]);return void 0!==t&&null!=v&&ns(t,["setup","proactivity"],v),{}}(r,e)),S=e}else{let e,t,r;l=this.apiClient,e={},null!=(t=na(O,["model"]))&&ns(e,["setup","model"],nL(l,t)),null!=(r=na(O,["config"]))&&ns(e,["config"],function(e,t){let r=na(e,["generationConfig"]);void 0!==t&&null!=r&&ns(t,["setup","generationConfig"],r);let n=na(e,["responseModalities"]);void 0!==t&&null!=n&&ns(t,["setup","generationConfig","responseModalities"],n);let i=na(e,["temperature"]);void 0!==t&&null!=i&&ns(t,["setup","generationConfig","temperature"],i);let o=na(e,["topP"]);void 0!==t&&null!=o&&ns(t,["setup","generationConfig","topP"],o);let s=na(e,["topK"]);void 0!==t&&null!=s&&ns(t,["setup","generationConfig","topK"],s);let a=na(e,["maxOutputTokens"]);void 0!==t&&null!=a&&ns(t,["setup","generationConfig","maxOutputTokens"],a);let l=na(e,["mediaResolution"]);void 0!==t&&null!=l&&ns(t,["setup","generationConfig","mediaResolution"],l);let u=na(e,["seed"]);void 0!==t&&null!=u&&ns(t,["setup","generationConfig","seed"],u);let c=na(e,["speechConfig"]);void 0!==t&&null!=c&&ns(t,["setup","generationConfig","speechConfig"],n0(c));let d=na(e,["thinkingConfig"]);void 0!==t&&null!=d&&ns(t,["setup","generationConfig","thinkingConfig"],d);let p=na(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&ns(t,["setup","generationConfig","enableAffectiveDialog"],p);let h=na(e,["systemInstruction"]);void 0!==t&&null!=h&&ns(t,["setup","systemInstruction"],function(e){let t={},r=na(e,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i,o,s,a,l,u,c,d,p,h;return r={},null!=(n=na(t=e,["mediaResolution"]))&&ns(r,["mediaResolution"],n),null!=(i=na(t,["codeExecutionResult"]))&&ns(r,["codeExecutionResult"],i),null!=(o=na(t,["executableCode"]))&&ns(r,["executableCode"],o),null!=(s=na(t,["fileData"]))&&ns(r,["fileData"],function(e){let t={};if(void 0!==na(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let r=na(e,["fileUri"]);null!=r&&ns(t,["fileUri"],r);let n=na(e,["mimeType"]);return null!=n&&ns(t,["mimeType"],n),t}(s)),null!=(a=na(t,["functionCall"]))&&ns(r,["functionCall"],function(e){let t={},r=na(e,["id"]);null!=r&&ns(t,["id"],r);let n=na(e,["args"]);null!=n&&ns(t,["args"],n);let i=na(e,["name"]);if(null!=i&&ns(t,["name"],i),void 0!==na(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==na(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(a)),null!=(l=na(t,["functionResponse"]))&&ns(r,["functionResponse"],l),null!=(u=na(t,["inlineData"]))&&ns(r,["inlineData"],iT(u)),null!=(c=na(t,["text"]))&&ns(r,["text"],c),null!=(d=na(t,["thought"]))&&ns(r,["thought"],d),null!=(p=na(t,["thoughtSignature"]))&&ns(r,["thoughtSignature"],p),null!=(h=na(t,["videoMetadata"]))&&ns(r,["videoMetadata"],h),r})),ns(t,["parts"],e)}let n=na(e,["role"]);return null!=n&&ns(t,["role"],n),t}(nY(h)));let f=na(e,["tools"]);if(void 0!==t&&null!=f){let e=n2(f);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["functionDeclarations"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["functionDeclarations"],e)}if(void 0!==na(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let n=na(e,["googleSearchRetrieval"]);null!=n&&ns(t,["googleSearchRetrieval"],n);let i=na(e,["computerUse"]);null!=i&&ns(t,["computerUse"],i);let o=na(e,["fileSearch"]);null!=o&&ns(t,["fileSearch"],o);let s=na(e,["codeExecution"]);if(null!=s&&ns(t,["codeExecution"],s),void 0!==na(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=na(e,["googleMaps"]);null!=a&&ns(t,["googleMaps"],function(e){let t={};if(void 0!==na(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let r=na(e,["enableWidget"]);return null!=r&&ns(t,["enableWidget"],r),t}(a));let l=na(e,["googleSearch"]);null!=l&&ns(t,["googleSearch"],function(e){let t={};if(void 0!==na(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==na(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let r=na(e,["timeRangeFilter"]);return null!=r&&ns(t,["timeRangeFilter"],r),t}(l));let u=na(e,["urlContext"]);return null!=u&&ns(t,["urlContext"],u),t})(n1(e)))),ns(t,["setup","tools"],e)}let g=na(e,["sessionResumption"]);void 0!==t&&null!=g&&ns(t,["setup","sessionResumption"],function(e){let t={},r=na(e,["handle"]);if(null!=r&&ns(t,["handle"],r),void 0!==na(e,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return t}(g));let m=na(e,["inputAudioTranscription"]);void 0!==t&&null!=m&&ns(t,["setup","inputAudioTranscription"],m);let y=na(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&ns(t,["setup","outputAudioTranscription"],y);let _=na(e,["realtimeInputConfig"]);void 0!==t&&null!=_&&ns(t,["setup","realtimeInputConfig"],_);let E=na(e,["contextWindowCompression"]);void 0!==t&&null!=E&&ns(t,["setup","contextWindowCompression"],E);let v=na(e,["proactivity"]);return void 0!==t&&null!=v&&ns(t,["setup","proactivity"],v),{}}(r,e)),S=e}return delete S.config,v.send(JSON.stringify(S)),new i2(v,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}}let i1={turnComplete:!0};class i2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let r=[];try{r=nX(t.turns),e.isVertexAI()||(r=r.map(e=>iO(e)))}catch(e){throw Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(null==t.functionResponses||0===(r=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses]).length)throw Error("functionResponses is required.");for(let t of r){if("object"!=typeof t||null===t||!("name"in t)||!("response"in t))throw Error(`Could not parse function response, type '${typeof t}'.`);if(!e.isVertexAI()&&!("id"in t))throw Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},i1),e);let t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:function(e){let t={},r=na(e,["media"]);if(null!=r){let e=nF(r);Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["mediaChunks"],e)}let n=na(e,["audio"]);null!=n&&ns(t,["audio"],nH(n));let i=na(e,["audioStreamEnd"]);null!=i&&ns(t,["audioStreamEnd"],i);let o=na(e,["video"]);null!=o&&ns(t,["video"],nB(o));let s=na(e,["text"]);null!=s&&ns(t,["text"],s);let a=na(e,["activityStart"]);null!=a&&ns(t,["activityStart"],a);let l=na(e,["activityEnd"]);return null!=l&&ns(t,["activityEnd"],l),t}(e)}:{realtimeInput:function(e){let t={},r=na(e,["media"]);if(null!=r){let e=nF(r);Array.isArray(e)&&(e=e.map(e=>iT(e))),ns(t,["mediaChunks"],e)}let n=na(e,["audio"]);null!=n&&ns(t,["audio"],iT(nH(n)));let i=na(e,["audioStreamEnd"]);null!=i&&ns(t,["audioStreamEnd"],i);let o=na(e,["video"]);null!=o&&ns(t,["video"],iT(nB(o)));let s=na(e,["text"]);null!=s&&ns(t,["text"],s);let a=na(e,["activityStart"]);null!=a&&ns(t,["activityStart"],a);let l=na(e,["activityEnd"]);return null!=l&&ns(t,["activityEnd"],l),t}(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw Error("Tool response parameters are required.");let t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function i4(e){var t,r,n;if(null==(t=null==e?void 0:e.automaticFunctionCalling)?void 0:t.disable)return!0;let i=!1;for(let t of null!=(r=null==e?void 0:e.tools)?r:[])if(i3(t)){i=!0;break}if(!i)return!0;let o=null==(n=null==e?void 0:e.automaticFunctionCalling)?void 0:n.maximumRemoteCalls;return(!(!o||!(o<0)&&Number.isInteger(o))||0==o)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0)}function i3(e){return"callTool"in e&&"function"==typeof e.callTool}function i6(e){var t;let r=[];return(null==(t=null==e?void 0:e.config)?void 0:t.tools)&&e.config.tools.forEach((e,t)=>{i3(e)||e.functionDeclarations&&e.functionDeclarations.length>0&&r.push(t)}),r}function i5(e){var t;return!(null==(t=null==e?void 0:e.automaticFunctionCalling)?void 0:t.ignoreCallHistory)}class i8 extends ni{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,r,n,i,o,s,a,l;let u,c,d=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!(null!=(l=null==(a=null==(s=e.config)?void 0:s.tools)?void 0:a.some(e=>i3(e)))&&l)||i4(e.config))return await this.generateContentInternal(d);let p=i6(e);if(p.length>0){let e=p.map(e=>`tools[${e}]`).join(", ");throw Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${e}.`)}let h=nX(d.contents),f=null!=(n=null==(r=null==(t=d.config)?void 0:t.automaticFunctionCalling)?void 0:r.maximumRemoteCalls)?n:10,g=0;for(;g<f&&(u=await this.generateContentInternal(d)).functionCalls&&0!==u.functionCalls.length;){let t=u.candidates[0].content,r=[];for(let t of null!=(o=null==(i=e.config)?void 0:i.tools)?o:[])if(i3(t)){let e=await t.callTool(u.functionCalls);r.push(...e)}g++,c={role:"user",parts:r},d.contents=nX(d.contents),d.contents.push(t),d.contents.push(c),i5(d.config)&&(h.push(t),h.push(c))}return i5(d.config)&&(u.automaticFunctionCallingHistory=h),u},this.generateContentStream=async e=>{var t,r,n,i,o;if(this.maybeMoveToResponseJsonSchem(e),i4(e.config)){let t=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(t)}let s=i6(e);if(s.length>0){let e=s.map(e=>`tools[${e}]`).join(", ");throw Error(`Incompatible tools found at ${e}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let a=null==(n=null==(r=null==(t=null==e?void 0:e.config)?void 0:t.toolConfig)?void 0:r.functionCallingConfig)?void 0:n.streamFunctionCallArguments,l=null==(o=null==(i=null==e?void 0:e.config)?void 0:i.automaticFunctionCalling)?void 0:o.disable;if(a&&!l)throw Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var t;let r,n=[];if(null==e?void 0:e.generatedImages)for(let i of e.generatedImages)i&&(null==i?void 0:i.safetyAttributes)&&(null==(t=null==i?void 0:i.safetyAttributes)?void 0:t.contentType)==="Positive Prompt"?r=null==i?void 0:i.safetyAttributes:n.push(i);return r?{generatedImages:n,positivePromptSafetyAttributes:r,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:n,sdkHttpResponse:e.sdkHttpResponse}}),this.list=async e=>{var t;let r={config:Object.assign(Object.assign({},{queryBase:!0}),null==e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase)if(null==(t=r.config)?void 0:t.filter)throw Error("Filtering tuned models list for Vertex AI is not currently supported");else r.config.filter="labels.tune-type:*";return new iu(ty.PAGED_ITEM_MODELS,e=>this.listInternal(e),await this.listInternal(r),r)},this.editImage=async e=>{let t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map(e=>e.toReferenceImageAPI())),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));let r={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(r)},this.generateVideos=async e=>{var t,r,n,i,o,s;if((e.prompt||e.image||e.video)&&e.source)throw Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return!this.apiClient.isVertexAI()&&((null==(t=e.video)?void 0:t.uri)&&(null==(r=e.video)?void 0:r.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:(null==(i=null==(n=e.source)?void 0:n.video)?void 0:i.uri)&&(null==(s=null==(o=e.source)?void 0:o.video)?void 0:s.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&!e.config.responseJsonSchema&&Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema)}async processParamsMaybeAddMcpUsage(e){var t,r,n;let i=null==(t=e.config)?void 0:t.tools;if(!i)return e;let o=await Promise.all(i.map(async e=>i3(e)?await e.tool():e)),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(s.config.tools=o,e.config&&e.config.tools&&iJ(e.config.tools)){let t=Object.assign({},null!=(n=null==(r=e.config.httpOptions)?void 0:r.headers)?n:{});0===Object.keys(t).length&&(t=this.apiClient.getDefaultHeaders()),iK(t),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:t})}return s}async initAfcToolsMap(e){var t,r,n;let i=new Map;for(let o of null!=(r=null==(t=e.config)?void 0:t.tools)?r:[])if(i3(o))for(let e of null!=(n=(await o.tool()).functionDeclarations)?n:[]){if(!e.name)throw Error("Function declaration name is required.");if(i.has(e.name))throw Error(`Duplicate tool declaration name: ${e.name}`);i.set(e.name,o)}return i}async processAfcStream(e){var t,r,n;let i=null!=(n=null==(r=null==(t=e.config)?void 0:t.automaticFunctionCalling)?void 0:r.maximumRemoteCalls)?n:10,o=!1,s=0;return function(e,t,r){var n,a;return ig(this,arguments,function*(){for(var l,u,c,d;s<i;){o&&(s++,o=!1);let g=yield ih(e.processParamsMaybeAddMcpUsage(r)),m=yield ih(e.generateContentStreamInternal(g)),y=[],_=[];try{for(var p,h=!0,f=(u=void 0,im(m));!(l=(p=yield ih(f.next())).done);h=!0)if(d=p.value,h=!1,yield yield ih(d),d.candidates&&(null==(n=d.candidates[0])?void 0:n.content)){for(let e of(_.push(d.candidates[0].content),null!=(a=d.candidates[0].content.parts)?a:[]))if(s<i&&e.functionCall){if(!e.functionCall.name)throw Error("Function call name was not returned by the model.");if(t.has(e.functionCall.name)){let r=yield ih(t.get(e.functionCall.name).callTool([e.functionCall]));y.push(...r)}else throw Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${t.keys()}, mising tool: ${e.functionCall.name}`)}}}catch(e){u={error:e}}finally{try{!h&&!l&&(c=f.return)&&(yield ih(c.call(f)))}finally{if(u)throw u.error}}if(y.length>0){o=!0;let e=new nd;e.candidates=[{content:{role:"user",parts:y}}],yield yield ih(e);let t=[];t.push(..._),t.push({role:"user",parts:y});let n=nX(r.contents).concat(t);r.contents=n}else break}})}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,r,n,i;let o="",s={};if(this.apiClient.isVertexAI()){let n=iC(this.apiClient,e);return o=no("{model}:generateContent",n._url),s=n._query,delete n._url,delete n._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=iI(e),r=new nd;return Object.assign(r,t),r})}{let t=iw(this.apiClient,e);return o=no("{model}:generateContent",t._url),s=t._query,delete t._url,delete t._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=iR(e),r=new nd;return Object.assign(r,t),r})}}async generateContentStreamInternal(e){var t,r,n,i;let o="",s={};if(this.apiClient.isVertexAI()){let n=iC(this.apiClient,e);return o=no("{model}:streamGenerateContent?alt=sse",n._url),s=n._query,delete n._url,delete n._query,this.apiClient.requestStream({path:o,queryParams:s,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(function(e){return ig(this,arguments,function*(){var t,r,n,i;try{for(var o,s=!0,a=im(e);!(t=(o=yield ih(a.next())).done);s=!0){i=o.value,s=!1;let e=iI((yield ih(i.json())));e.sdkHttpResponse={headers:i.headers};let t=new nd;Object.assign(t,e),yield yield ih(t)}}catch(e){r={error:e}}finally{try{!s&&!t&&(n=a.return)&&(yield ih(n.call(a)))}finally{if(r)throw r.error}}})})}{let t=iw(this.apiClient,e);return o=no("{model}:streamGenerateContent?alt=sse",t._url),s=t._query,delete t._url,delete t._query,this.apiClient.requestStream({path:o,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(function(e){return ig(this,arguments,function*(){var t,r,n,i;try{for(var o,s=!0,a=im(e);!(t=(o=yield ih(a.next())).done);s=!0){i=o.value,s=!1;let e=iR((yield ih(i.json())));e.sdkHttpResponse={headers:i.headers};let t=new nd;Object.assign(t,e),yield yield ih(t)}}catch(e){r={error:e}}finally{try{!s&&!t&&(n=a.return)&&(yield ih(n.call(a)))}finally{if(r)throw r.error}}})})}}async embedContent(e){var t,r,n,i;let o="",s={};if(this.apiClient.isVertexAI()){let n=function(e,t){let r,n,i,o,s,a={},l=na(t,["model"]);null!=l&&ns(a,["_url","model"],nL(e,l));let u=na(t,["contents"]);if(null!=u){let t=nz(e,u);Array.isArray(t)&&(t=t.map(e=>e)),ns(a,["instances[]","content"],t)}let c=na(t,["config"]);return null!=c&&(r=na(c,["taskType"]),void 0!==a&&null!=r&&ns(a,["instances[]","task_type"],r),n=na(c,["title"]),void 0!==a&&null!=n&&ns(a,["instances[]","title"],n),i=na(c,["outputDimensionality"]),void 0!==a&&null!=i&&ns(a,["parameters","outputDimensionality"],i),o=na(c,["mimeType"]),void 0!==a&&null!=o&&ns(a,["instances[]","mimeType"],o),s=na(c,["autoTruncate"]),void 0!==a&&null!=s&&ns(a,["parameters","autoTruncate"],s)),a}(this.apiClient,e);return o=no("{model}:predict",n._url),s=n._query,delete n._url,delete n._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["predictions[]","embeddings"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i,o,s,a;return r={},null!=(n=na(e,["values"]))&&ns(r,["values"],n),null!=(i=na(e,["statistics"]))&&ns(r,["statistics"],(o={},null!=(s=na(t=i,["truncated"]))&&ns(o,["truncated"],s),null!=(a=na(t,["token_count"]))&&ns(o,["tokenCount"],a),o)),r})),ns(t,["embeddings"],e)}let i=na(e,["metadata"]);return null!=i&&ns(t,["metadata"],i),t}(e),r=new np;return Object.assign(r,t),r})}{let t=function(e,t){let r={},n=na(t,["model"]);null!=n&&ns(r,["_url","model"],nL(e,n));let i=na(t,["contents"]);if(null!=i){let t=nz(e,i);Array.isArray(t)&&(t=t.map(e=>e)),ns(r,["requests[]","content"],t)}let o=na(t,["config"]);null!=o&&function(e,t){let r=na(e,["taskType"]);void 0!==t&&null!=r&&ns(t,["requests[]","taskType"],r);let n=na(e,["title"]);void 0!==t&&null!=n&&ns(t,["requests[]","title"],n);let i=na(e,["outputDimensionality"]);if(void 0!==t&&null!=i&&ns(t,["requests[]","outputDimensionality"],i),void 0!==na(e,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==na(e,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.")}(o,r);let s=na(t,["model"]);return void 0!==s&&ns(r,["requests[]","model"],nL(e,s)),r}(this.apiClient,e);return o=no("{model}:batchEmbedContents",t._url),s=t._query,delete t._url,delete t._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["embeddings"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["embeddings"],e)}let i=na(e,["metadata"]);return null!=i&&ns(t,["metadata"],i),t}(e),r=new np;return Object.assign(r,t),r})}}async generateImagesInternal(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s,u,c,d,p,h,f,g,m,y,_,E,v,b,S,T,A,O,w,C=(o=this.apiClient,n={},null!=(i=na(e,["model"]))&&ns(n,["_url","model"],nL(o,i)),null!=(s=na(e,["prompt"]))&&ns(n,["instances[0]","prompt"],s),null!=(u=na(e,["config"]))&&(c=na(u,["outputGcsUri"]),void 0!==n&&null!=c&&ns(n,["parameters","storageUri"],c),d=na(u,["negativePrompt"]),void 0!==n&&null!=d&&ns(n,["parameters","negativePrompt"],d),p=na(u,["numberOfImages"]),void 0!==n&&null!=p&&ns(n,["parameters","sampleCount"],p),h=na(u,["aspectRatio"]),void 0!==n&&null!=h&&ns(n,["parameters","aspectRatio"],h),f=na(u,["guidanceScale"]),void 0!==n&&null!=f&&ns(n,["parameters","guidanceScale"],f),g=na(u,["seed"]),void 0!==n&&null!=g&&ns(n,["parameters","seed"],g),m=na(u,["safetyFilterLevel"]),void 0!==n&&null!=m&&ns(n,["parameters","safetySetting"],m),y=na(u,["personGeneration"]),void 0!==n&&null!=y&&ns(n,["parameters","personGeneration"],y),_=na(u,["includeSafetyAttributes"]),void 0!==n&&null!=_&&ns(n,["parameters","includeSafetyAttributes"],_),E=na(u,["includeRaiReason"]),void 0!==n&&null!=E&&ns(n,["parameters","includeRaiReason"],E),v=na(u,["language"]),void 0!==n&&null!=v&&ns(n,["parameters","language"],v),b=na(u,["outputMimeType"]),void 0!==n&&null!=b&&ns(n,["parameters","outputOptions","mimeType"],b),S=na(u,["outputCompressionQuality"]),void 0!==n&&null!=S&&ns(n,["parameters","outputOptions","compressionQuality"],S),T=na(u,["addWatermark"]),void 0!==n&&null!=T&&ns(n,["parameters","addWatermark"],T),A=na(u,["labels"]),void 0!==n&&null!=A&&ns(n,["labels"],A),O=na(u,["imageSize"]),void 0!==n&&null!=O&&ns(n,["parameters","sampleImageSize"],O),w=na(u,["enhancePrompt"]),void 0!==n&&null!=w&&ns(n,["parameters","enhancePrompt"],w)),n);return a=no("{model}:predict",C._url),l=C._query,delete C._url,delete C._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(C),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>iP(e))),ns(t,["generatedImages"],e)}let i=na(e,["positivePromptSafetyAttributes"]);return null!=i&&ns(t,["positivePromptSafetyAttributes"],ij(i)),t}(e),r=new nh;return Object.assign(r,t),r})}{let t,r,o,u,c=(s=this.apiClient,t={},null!=(r=na(e,["model"]))&&ns(t,["_url","model"],nL(s,r)),null!=(o=na(e,["prompt"]))&&ns(t,["instances[0]","prompt"],o),null!=(u=na(e,["config"]))&&function(e,t){if(void 0!==na(e,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==na(e,["negativePrompt"]))throw Error("negativePrompt parameter is not supported in Gemini API.");let r=na(e,["numberOfImages"]);void 0!==t&&null!=r&&ns(t,["parameters","sampleCount"],r);let n=na(e,["aspectRatio"]);void 0!==t&&null!=n&&ns(t,["parameters","aspectRatio"],n);let i=na(e,["guidanceScale"]);if(void 0!==t&&null!=i&&ns(t,["parameters","guidanceScale"],i),void 0!==na(e,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let o=na(e,["safetyFilterLevel"]);void 0!==t&&null!=o&&ns(t,["parameters","safetySetting"],o);let s=na(e,["personGeneration"]);void 0!==t&&null!=s&&ns(t,["parameters","personGeneration"],s);let a=na(e,["includeSafetyAttributes"]);void 0!==t&&null!=a&&ns(t,["parameters","includeSafetyAttributes"],a);let l=na(e,["includeRaiReason"]);void 0!==t&&null!=l&&ns(t,["parameters","includeRaiReason"],l);let u=na(e,["language"]);void 0!==t&&null!=u&&ns(t,["parameters","language"],u);let c=na(e,["outputMimeType"]);void 0!==t&&null!=c&&ns(t,["parameters","outputOptions","mimeType"],c);let d=na(e,["outputCompressionQuality"]);if(void 0!==t&&null!=d&&ns(t,["parameters","outputOptions","compressionQuality"],d),void 0!==na(e,["addWatermark"]))throw Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==na(e,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let p=na(e,["imageSize"]);if(void 0!==t&&null!=p&&ns(t,["parameters","sampleImageSize"],p),void 0!==na(e,["enhancePrompt"]))throw Error("enhancePrompt parameter is not supported in Gemini API.")}(u,t),t);return a=no("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>{var t,r;let n,i,o,s,a,l,u;return n={},null!=(i=na(t=e,["_self"]))&&ns(n,["image"],(o={},null!=(s=na(r=i,["bytesBase64Encoded"]))&&ns(o,["imageBytes"],nl(s)),null!=(a=na(r,["mimeType"]))&&ns(o,["mimeType"],a),o)),null!=(l=na(t,["raiFilteredReason"]))&&ns(n,["raiFilteredReason"],l),null!=(u=na(t,["_self"]))&&ns(n,["safetyAttributes"],iU(u)),n})),ns(t,["generatedImages"],e)}let i=na(e,["positivePromptSafetyAttributes"]);return null!=i&&ns(t,["positivePromptSafetyAttributes"],iU(i)),t}(e),r=new nh;return Object.assign(r,t),r})}}async editImageInternal(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI()){let o=function(e,t){let r,n,i,o,s,a,l,u,c,d,p,h,f,g,m,y,_,E={},v=na(t,["model"]);null!=v&&ns(E,["_url","model"],nL(e,v));let b=na(t,["prompt"]);null!=b&&ns(E,["instances[0]","prompt"],b);let S=na(t,["referenceImages"]);if(null!=S){let e=S;Array.isArray(e)&&(e=e.map(e=>(function(e){let t,r,n,i,o,s,a,l={},u=na(e,["referenceImage"]);null!=u&&ns(l,["referenceImage"],ik(u));let c=na(e,["referenceId"]);null!=c&&ns(l,["referenceId"],c);let d=na(e,["referenceType"]);null!=d&&ns(l,["referenceType"],d);let p=na(e,["maskImageConfig"]);null!=p&&ns(l,["maskImageConfig"],(t={},null!=(r=na(p,["maskMode"]))&&ns(t,["maskMode"],r),null!=(n=na(p,["segmentationClasses"]))&&ns(t,["maskClasses"],n),null!=(i=na(p,["maskDilation"]))&&ns(t,["dilation"],i),t));let h=na(e,["controlImageConfig"]);null!=h&&ns(l,["controlImageConfig"],(o={},null!=(s=na(h,["controlType"]))&&ns(o,["controlType"],s),null!=(a=na(h,["enableControlImageComputation"]))&&ns(o,["computeControl"],a),o));let f=na(e,["styleImageConfig"]);null!=f&&ns(l,["styleImageConfig"],f);let g=na(e,["subjectImageConfig"]);return null!=g&&ns(l,["subjectImageConfig"],g),l})(e))),ns(E,["instances[0]","referenceImages"],e)}let T=na(t,["config"]);return null!=T&&(r=na(T,["outputGcsUri"]),void 0!==E&&null!=r&&ns(E,["parameters","storageUri"],r),n=na(T,["negativePrompt"]),void 0!==E&&null!=n&&ns(E,["parameters","negativePrompt"],n),i=na(T,["numberOfImages"]),void 0!==E&&null!=i&&ns(E,["parameters","sampleCount"],i),o=na(T,["aspectRatio"]),void 0!==E&&null!=o&&ns(E,["parameters","aspectRatio"],o),s=na(T,["guidanceScale"]),void 0!==E&&null!=s&&ns(E,["parameters","guidanceScale"],s),a=na(T,["seed"]),void 0!==E&&null!=a&&ns(E,["parameters","seed"],a),l=na(T,["safetyFilterLevel"]),void 0!==E&&null!=l&&ns(E,["parameters","safetySetting"],l),u=na(T,["personGeneration"]),void 0!==E&&null!=u&&ns(E,["parameters","personGeneration"],u),c=na(T,["includeSafetyAttributes"]),void 0!==E&&null!=c&&ns(E,["parameters","includeSafetyAttributes"],c),d=na(T,["includeRaiReason"]),void 0!==E&&null!=d&&ns(E,["parameters","includeRaiReason"],d),p=na(T,["language"]),void 0!==E&&null!=p&&ns(E,["parameters","language"],p),h=na(T,["outputMimeType"]),void 0!==E&&null!=h&&ns(E,["parameters","outputOptions","mimeType"],h),f=na(T,["outputCompressionQuality"]),void 0!==E&&null!=f&&ns(E,["parameters","outputOptions","compressionQuality"],f),g=na(T,["addWatermark"]),void 0!==E&&null!=g&&ns(E,["parameters","addWatermark"],g),m=na(T,["labels"]),void 0!==E&&null!=m&&ns(E,["labels"],m),y=na(T,["editMode"]),void 0!==E&&null!=y&&ns(E,["parameters","editMode"],y),_=na(T,["baseSteps"]),void 0!==E&&null!=_&&ns(E,["parameters","editConfig","baseSteps"],_)),E}(this.apiClient,e);return n=no("{model}:predict",o._url),i=o._query,delete o._url,delete o._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>iP(e))),ns(t,["generatedImages"],e)}return t}(e),r=new nf;return Object.assign(r,t),r})}throw Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r,n;let i="",o={};if(this.apiClient.isVertexAI()){let s,a,l,u,c,d,p,h,f,g,m,y,_,E,v,b,S=(n=this.apiClient,s={},null!=(a=na(e,["model"]))&&ns(s,["_url","model"],nL(n,a)),null!=(l=na(e,["image"]))&&ns(s,["instances[0]","image"],ik(l)),null!=(u=na(e,["upscaleFactor"]))&&ns(s,["parameters","upscaleConfig","upscaleFactor"],u),null!=(c=na(e,["config"]))&&(d=na(c,["outputGcsUri"]),void 0!==s&&null!=d&&ns(s,["parameters","storageUri"],d),p=na(c,["safetyFilterLevel"]),void 0!==s&&null!=p&&ns(s,["parameters","safetySetting"],p),h=na(c,["personGeneration"]),void 0!==s&&null!=h&&ns(s,["parameters","personGeneration"],h),f=na(c,["includeRaiReason"]),void 0!==s&&null!=f&&ns(s,["parameters","includeRaiReason"],f),g=na(c,["outputMimeType"]),void 0!==s&&null!=g&&ns(s,["parameters","outputOptions","mimeType"],g),m=na(c,["outputCompressionQuality"]),void 0!==s&&null!=m&&ns(s,["parameters","outputOptions","compressionQuality"],m),y=na(c,["enhanceInputImage"]),void 0!==s&&null!=y&&ns(s,["parameters","upscaleConfig","enhanceInputImage"],y),_=na(c,["imagePreservationFactor"]),void 0!==s&&null!=_&&ns(s,["parameters","upscaleConfig","imagePreservationFactor"],_),E=na(c,["labels"]),void 0!==s&&null!=E&&ns(s,["labels"],E),v=na(c,["numberOfImages"]),void 0!==s&&null!=v&&ns(s,["parameters","sampleCount"],v),b=na(c,["mode"]),void 0!==s&&null!=b&&ns(s,["parameters","mode"],b)),s);return i=no("{model}:predict",S._url),o=S._query,delete S._url,delete S._query,this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(S),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>iP(e))),ns(t,["generatedImages"],e)}return t}(e),r=new ng;return Object.assign(r,t),r})}throw Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r,n;let i="",o={};if(this.apiClient.isVertexAI()){let s,a,l,u,c,d,p,h,f,g,m,y,_,E,v,b=(n=this.apiClient,s={},null!=(a=na(e,["model"]))&&ns(s,["_url","model"],nL(n,a)),null!=(l=na(e,["source"]))&&function(e,t){let r=na(e,["prompt"]);void 0!==t&&null!=r&&ns(t,["instances[0]","prompt"],r);let n=na(e,["personImage"]);void 0!==t&&null!=n&&ns(t,["instances[0]","personImage","image"],ik(n));let i=na(e,["productImages"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>{let t,r;return t={},null!=(r=na(e,["productImage"]))&&ns(t,["image"],ik(r)),t})),ns(t,["instances[0]","productImages"],e)}}(l,s),null!=(u=na(e,["config"]))&&(c=na(u,["numberOfImages"]),void 0!==s&&null!=c&&ns(s,["parameters","sampleCount"],c),d=na(u,["baseSteps"]),void 0!==s&&null!=d&&ns(s,["parameters","baseSteps"],d),p=na(u,["outputGcsUri"]),void 0!==s&&null!=p&&ns(s,["parameters","storageUri"],p),h=na(u,["seed"]),void 0!==s&&null!=h&&ns(s,["parameters","seed"],h),f=na(u,["safetyFilterLevel"]),void 0!==s&&null!=f&&ns(s,["parameters","safetySetting"],f),g=na(u,["personGeneration"]),void 0!==s&&null!=g&&ns(s,["parameters","personGeneration"],g),m=na(u,["addWatermark"]),void 0!==s&&null!=m&&ns(s,["parameters","addWatermark"],m),y=na(u,["outputMimeType"]),void 0!==s&&null!=y&&ns(s,["parameters","outputOptions","mimeType"],y),_=na(u,["outputCompressionQuality"]),void 0!==s&&null!=_&&ns(s,["parameters","outputOptions","compressionQuality"],_),E=na(u,["enhancePrompt"]),void 0!==s&&null!=E&&ns(s,["parameters","enhancePrompt"],E),v=na(u,["labels"]),void 0!==s&&null!=v&&ns(s,["labels"],v)),s);return i=no("{model}:predict",b._url),o=b._query,delete b._url,delete b._query,this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},r=na(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>iP(e))),ns(t,["generatedImages"],e)}return t}(e),r=new nm;return Object.assign(r,t),r})}throw Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r,n,i,o;let s="",a={};if(this.apiClient.isVertexAI()){let l,u,c,d,p,h,f,g,m,y,_,E,v,b,S,T=(n=this.apiClient,h={},null!=(f=na(e,["model"]))&&ns(h,["_url","model"],nL(n,f)),null!=(g=na(e,["source"]))&&(i=g,o=h,c=na(i,["prompt"]),void 0!==o&&null!=c&&ns(o,["instances[0]","prompt"],c),d=na(i,["image"]),void 0!==o&&null!=d&&ns(o,["instances[0]","image"],ik(d)),p=na(i,["scribbleImage"]),void 0!==o&&null!=p&&ns(o,["instances[0]","scribble"],(l={},null!=(u=na(p,["image"]))&&ns(l,["image"],ik(u)),l))),null!=(m=na(e,["config"]))&&(y=na(m,["mode"]),void 0!==h&&null!=y&&ns(h,["parameters","mode"],y),_=na(m,["maxPredictions"]),void 0!==h&&null!=_&&ns(h,["parameters","maxPredictions"],_),E=na(m,["confidenceThreshold"]),void 0!==h&&null!=E&&ns(h,["parameters","confidenceThreshold"],E),v=na(m,["maskDilation"]),void 0!==h&&null!=v&&ns(h,["parameters","maskDilation"],v),b=na(m,["binaryColorThreshold"]),void 0!==h&&null!=b&&ns(h,["parameters","binaryColorThreshold"],b),S=na(m,["labels"]),void 0!==h&&null!=S&&ns(h,["labels"],S)),h);return s=no("{model}:predict",T._url),a=T._query,delete T._url,delete T._query,this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(T),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},r=na(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["_self"]);null!=r&&ns(t,["mask"],iN(r));let n=na(e,["labels"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["labels"],e)}return t})(e))),ns(t,["generatedMasks"],e)}return t}(e),r=new ny;return Object.assign(r,t),r})}throw Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s=(o=this.apiClient,n={},null!=(i=na(e,["model"]))&&ns(n,["_url","name"],nL(o,i)),n);return a=no("{name}",s._url),l=s._query,delete s._url,delete s._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>iM(e))}{let t,r,o=(s=this.apiClient,t={},null!=(r=na(e,["model"]))&&ns(t,["_url","name"],nL(s,r)),t);return a=no("{name}",o._url),l=o._query,delete o._url,delete o._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>iD(e))}}async listInternal(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s,u,c,d,p=(o=this.apiClient,n={},null!=(i=na(e,["config"]))&&(s=na(i,["pageSize"]),void 0!==n&&null!=s&&ns(n,["_query","pageSize"],s),u=na(i,["pageToken"]),void 0!==n&&null!=u&&ns(n,["_query","pageToken"],u),c=na(i,["filter"]),void 0!==n&&null!=c&&ns(n,["_query","filter"],c),d=na(i,["queryBase"]),void 0!==n&&null!=d&&ns(n,["_url","models_url"],n7(o,d))),n);return a=no("{models_url}",p._url),l=p._query,delete p._url,delete p._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(p),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["nextPageToken"]);null!=n&&ns(t,["nextPageToken"],n);let i=na(e,["_self"]);if(null!=i){let e=n9(i);Array.isArray(e)&&(e=e.map(e=>iM(e))),ns(t,["models"],e)}return t}(e),r=new n_;return Object.assign(r,t),r})}{let t,r,o,u,c,d,p=(s=this.apiClient,t={},null!=(r=na(e,["config"]))&&(o=na(r,["pageSize"]),void 0!==t&&null!=o&&ns(t,["_query","pageSize"],o),u=na(r,["pageToken"]),void 0!==t&&null!=u&&ns(t,["_query","pageToken"],u),c=na(r,["filter"]),void 0!==t&&null!=c&&ns(t,["_query","filter"],c),d=na(r,["queryBase"]),void 0!==t&&null!=d&&ns(t,["_url","models_url"],n7(s,d))),t);return a=no("{models_url}",p._url),l=p._query,delete p._url,delete p._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(p),httpMethod:"GET",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["nextPageToken"]);null!=n&&ns(t,["nextPageToken"],n);let i=na(e,["_self"]);if(null!=i){let e=n9(i);Array.isArray(e)&&(e=e.map(e=>iD(e))),ns(t,["models"],e)}return t}(e),r=new n_;return Object.assign(r,t),r})}}async update(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s,u,c,d,p=(o=this.apiClient,n={},null!=(i=na(e,["model"]))&&ns(n,["_url","model"],nL(o,i)),null!=(s=na(e,["config"]))&&(u=na(s,["displayName"]),void 0!==n&&null!=u&&ns(n,["displayName"],u),c=na(s,["description"]),void 0!==n&&null!=c&&ns(n,["description"],c),d=na(s,["defaultCheckpointId"]),void 0!==n&&null!=d&&ns(n,["defaultCheckpointId"],d)),n);return a=no("{model}",p._url),l=p._query,delete p._url,delete p._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>iM(e))}{let t,r,o,u,c,d,p=(s=this.apiClient,t={},null!=(r=na(e,["model"]))&&ns(t,["_url","name"],nL(s,r)),null!=(o=na(e,["config"]))&&(u=na(o,["displayName"]),void 0!==t&&null!=u&&ns(t,["displayName"],u),c=na(o,["description"]),void 0!==t&&null!=c&&ns(t,["description"],c),d=na(o,["defaultCheckpointId"]),void 0!==t&&null!=d&&ns(t,["defaultCheckpointId"],d)),t);return a=no("{name}",p._url),l=p._query,delete p._url,delete p._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>iD(e))}}async delete(e){var t,r,n,i,o,s;let a="",l={};if(this.apiClient.isVertexAI()){let n,i,s=(o=this.apiClient,n={},null!=(i=na(e,["model"]))&&ns(n,["_url","name"],nL(o,i)),n);return a=no("{name}",s._url),l=s._query,delete s._url,delete s._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n=(t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),t),i=new nE;return Object.assign(i,n),i})}{let t,r,o=(s=this.apiClient,t={},null!=(r=na(e,["model"]))&&ns(t,["_url","name"],nL(s,r)),t);return a=no("{name}",o._url),l=o._query,delete o._url,delete o._query,this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n=(t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),t),i=new nE;return Object.assign(i,n),i})}}async countTokens(e){var t,r,n,i;let o="",s={};if(this.apiClient.isVertexAI()){let n=function(e,t){let r={},n=na(t,["model"]);null!=n&&ns(r,["_url","model"],nL(e,n));let i=na(t,["contents"]);if(null!=i){let e=nX(i);Array.isArray(e)&&(e=e.map(e=>e)),ns(r,["contents"],e)}let o=na(t,["config"]);return null!=o&&function(e,t){let r=na(e,["systemInstruction"]);void 0!==t&&null!=r&&ns(t,["systemInstruction"],nY(r));let n=na(e,["tools"]);if(void 0!==t&&null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>iG(e))),ns(t,["tools"],e)}let i=na(e,["generationConfig"]);void 0!==t&&null!=i&&ns(t,["generationConfig"],function(e){let t={},r=na(e,["modelSelectionConfig"]);null!=r&&ns(t,["modelConfig"],r);let n=na(e,["responseJsonSchema"]);null!=n&&ns(t,["responseJsonSchema"],n);let i=na(e,["audioTimestamp"]);null!=i&&ns(t,["audioTimestamp"],i);let o=na(e,["candidateCount"]);null!=o&&ns(t,["candidateCount"],o);let s=na(e,["enableAffectiveDialog"]);null!=s&&ns(t,["enableAffectiveDialog"],s);let a=na(e,["frequencyPenalty"]);null!=a&&ns(t,["frequencyPenalty"],a);let l=na(e,["logprobs"]);null!=l&&ns(t,["logprobs"],l);let u=na(e,["maxOutputTokens"]);null!=u&&ns(t,["maxOutputTokens"],u);let c=na(e,["mediaResolution"]);null!=c&&ns(t,["mediaResolution"],c);let d=na(e,["presencePenalty"]);null!=d&&ns(t,["presencePenalty"],d);let p=na(e,["responseLogprobs"]);null!=p&&ns(t,["responseLogprobs"],p);let h=na(e,["responseMimeType"]);null!=h&&ns(t,["responseMimeType"],h);let f=na(e,["responseModalities"]);null!=f&&ns(t,["responseModalities"],f);let g=na(e,["responseSchema"]);null!=g&&ns(t,["responseSchema"],g);let m=na(e,["routingConfig"]);null!=m&&ns(t,["routingConfig"],m);let y=na(e,["seed"]);null!=y&&ns(t,["seed"],y);let _=na(e,["speechConfig"]);null!=_&&ns(t,["speechConfig"],iL(_));let E=na(e,["stopSequences"]);null!=E&&ns(t,["stopSequences"],E);let v=na(e,["temperature"]);null!=v&&ns(t,["temperature"],v);let b=na(e,["thinkingConfig"]);null!=b&&ns(t,["thinkingConfig"],b);let S=na(e,["topK"]);null!=S&&ns(t,["topK"],S);let T=na(e,["topP"]);if(null!=T&&ns(t,["topP"],T),void 0!==na(e,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(i))}(o,r),r}(this.apiClient,e);return o=no("{model}:countTokens",n._url),s=n._query,delete n._url,delete n._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n,i=(t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),null!=(n=na(e,["totalTokens"]))&&ns(t,["totalTokens"],n),t),o=new nv;return Object.assign(o,i),o})}{let t=function(e,t){let r={},n=na(t,["model"]);null!=n&&ns(r,["_url","model"],nL(e,n));let i=na(t,["contents"]);if(null!=i){let e=nX(i);Array.isArray(e)&&(e=e.map(e=>iO(e))),ns(r,["contents"],e)}let o=na(t,["config"]);return null!=o&&function(e){if(void 0!==na(e,["systemInstruction"]))throw Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==na(e,["tools"]))throw Error("tools parameter is not supported in Gemini API.");if(void 0!==na(e,["generationConfig"]))throw Error("generationConfig parameter is not supported in Gemini API.")}(o),r}(this.apiClient,e);return o=no("{model}:countTokens",t._url),s=t._query,delete t._url,delete t._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n,i,o=(t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),null!=(n=na(e,["totalTokens"]))&&ns(t,["totalTokens"],n),null!=(i=na(e,["cachedContentTokenCount"]))&&ns(t,["cachedContentTokenCount"],i),t),s=new nv;return Object.assign(s,o),s})}}async computeTokens(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI()){let o=function(e,t){let r={},n=na(t,["model"]);null!=n&&ns(r,["_url","model"],nL(e,n));let i=na(t,["contents"]);if(null!=i){let e=nX(i);Array.isArray(e)&&(e=e.map(e=>e)),ns(r,["contents"],e)}return r}(this.apiClient,e);return n=no("{model}:computeTokens",o._url),i=o._query,delete o._url,delete o._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["tokensInfo"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["tokensInfo"],e)}return t}(e),r=new nb;return Object.assign(r,t),r})}throw Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,n,i,o,s,a,l,u,c;let d="",p={};if(this.apiClient.isVertexAI()){let n,i,s,u,c,h,f,g,m,y,_=(o=this.apiClient,u={},null!=(c=na(e,["model"]))&&ns(u,["_url","model"],nL(o,c)),null!=(h=na(e,["prompt"]))&&ns(u,["instances[0]","prompt"],h),null!=(f=na(e,["image"]))&&ns(u,["instances[0]","image"],ik(f)),null!=(g=na(e,["video"]))&&ns(u,["instances[0]","video"],iq(g)),null!=(m=na(e,["source"]))&&(a=m,l=u,n=na(a,["prompt"]),void 0!==l&&null!=n&&ns(l,["instances[0]","prompt"],n),i=na(a,["image"]),void 0!==l&&null!=i&&ns(l,["instances[0]","image"],ik(i)),s=na(a,["video"]),void 0!==l&&null!=s&&ns(l,["instances[0]","video"],iq(s))),null!=(y=na(e,["config"]))&&function(e,t){var r;let n,i,o,s=na(e,["numberOfVideos"]);void 0!==t&&null!=s&&ns(t,["parameters","sampleCount"],s);let a=na(e,["outputGcsUri"]);void 0!==t&&null!=a&&ns(t,["parameters","storageUri"],a);let l=na(e,["fps"]);void 0!==t&&null!=l&&ns(t,["parameters","fps"],l);let u=na(e,["durationSeconds"]);void 0!==t&&null!=u&&ns(t,["parameters","durationSeconds"],u);let c=na(e,["seed"]);void 0!==t&&null!=c&&ns(t,["parameters","seed"],c);let d=na(e,["aspectRatio"]);void 0!==t&&null!=d&&ns(t,["parameters","aspectRatio"],d);let p=na(e,["resolution"]);void 0!==t&&null!=p&&ns(t,["parameters","resolution"],p);let h=na(e,["personGeneration"]);void 0!==t&&null!=h&&ns(t,["parameters","personGeneration"],h);let f=na(e,["pubsubTopic"]);void 0!==t&&null!=f&&ns(t,["parameters","pubsubTopic"],f);let g=na(e,["negativePrompt"]);void 0!==t&&null!=g&&ns(t,["parameters","negativePrompt"],g);let m=na(e,["enhancePrompt"]);void 0!==t&&null!=m&&ns(t,["parameters","enhancePrompt"],m);let y=na(e,["generateAudio"]);void 0!==t&&null!=y&&ns(t,["parameters","generateAudio"],y);let _=na(e,["lastFrame"]);void 0!==t&&null!=_&&ns(t,["instances[0]","lastFrame"],ik(_));let E=na(e,["referenceImages"]);if(void 0!==t&&null!=E){let e=E;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i;return r={},null!=(n=na(t=e,["image"]))&&ns(r,["image"],ik(n)),null!=(i=na(t,["referenceType"]))&&ns(r,["referenceType"],i),r})),ns(t,["instances[0]","referenceImages"],e)}let v=na(e,["mask"]);void 0!==t&&null!=v&&ns(t,["instances[0]","mask"],(n={},null!=(i=na(r=v,["image"]))&&ns(n,["_self"],ik(i)),null!=(o=na(r,["maskMode"]))&&ns(n,["maskMode"],o),n));let b=na(e,["compressionQuality"]);void 0!==t&&null!=b&&ns(t,["parameters","compressionQuality"],b)}(y,u),u);return d=no("{model}:predictLongRunning",_._url),p=_._query,delete _._url,delete _._query,this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(_),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>{let t,r,n,i,o,s,a=(t={},null!=(r=na(e,["name"]))&&ns(t,["name"],r),null!=(n=na(e,["metadata"]))&&ns(t,["metadata"],n),null!=(i=na(e,["done"]))&&ns(t,["done"],i),null!=(o=na(e,["error"]))&&ns(t,["error"],o),null!=(s=na(e,["response"]))&&ns(t,["response"],function(e){let t={},r=na(e,["videos"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i,o,s,a;return r={},null!=(n=na(e,["_self"]))&&ns(r,["video"],(i={},null!=(o=na(t=n,["gcsUri"]))&&ns(i,["uri"],o),null!=(s=na(t,["bytesBase64Encoded"]))&&ns(i,["videoBytes"],nl(s)),null!=(a=na(t,["mimeType"]))&&ns(i,["mimeType"],a),i)),r})),ns(t,["generatedVideos"],e)}let n=na(e,["raiMediaFilteredCount"]);null!=n&&ns(t,["raiMediaFilteredCount"],n);let i=na(e,["raiMediaFilteredReasons"]);return null!=i&&ns(t,["raiMediaFilteredReasons"],i),t}(s)),t),l=new nS;return Object.assign(l,a),l})}{let t,r,o,a,l,h,f,g,m,y,_=(s=this.apiClient,a={},null!=(l=na(e,["model"]))&&ns(a,["_url","model"],nL(s,l)),null!=(h=na(e,["prompt"]))&&ns(a,["instances[0]","prompt"],h),null!=(f=na(e,["image"]))&&ns(a,["instances[0]","image"],ix(f)),null!=(g=na(e,["video"]))&&ns(a,["instances[0]","video"],iF(g)),null!=(m=na(e,["source"]))&&(u=m,c=a,t=na(u,["prompt"]),void 0!==c&&null!=t&&ns(c,["instances[0]","prompt"],t),r=na(u,["image"]),void 0!==c&&null!=r&&ns(c,["instances[0]","image"],ix(r)),o=na(u,["video"]),void 0!==c&&null!=o&&ns(c,["instances[0]","video"],iF(o))),null!=(y=na(e,["config"]))&&function(e,t){let r=na(e,["numberOfVideos"]);if(void 0!==t&&null!=r&&ns(t,["parameters","sampleCount"],r),void 0!==na(e,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==na(e,["fps"]))throw Error("fps parameter is not supported in Gemini API.");let n=na(e,["durationSeconds"]);if(void 0!==t&&null!=n&&ns(t,["parameters","durationSeconds"],n),void 0!==na(e,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let i=na(e,["aspectRatio"]);void 0!==t&&null!=i&&ns(t,["parameters","aspectRatio"],i);let o=na(e,["resolution"]);void 0!==t&&null!=o&&ns(t,["parameters","resolution"],o);let s=na(e,["personGeneration"]);if(void 0!==t&&null!=s&&ns(t,["parameters","personGeneration"],s),void 0!==na(e,["pubsubTopic"]))throw Error("pubsubTopic parameter is not supported in Gemini API.");let a=na(e,["negativePrompt"]);void 0!==t&&null!=a&&ns(t,["parameters","negativePrompt"],a);let l=na(e,["enhancePrompt"]);if(void 0!==t&&null!=l&&ns(t,["parameters","enhancePrompt"],l),void 0!==na(e,["generateAudio"]))throw Error("generateAudio parameter is not supported in Gemini API.");let u=na(e,["lastFrame"]);void 0!==t&&null!=u&&ns(t,["instances[0]","lastFrame"],ix(u));let c=na(e,["referenceImages"]);if(void 0!==t&&null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i;return r={},null!=(n=na(t=e,["image"]))&&ns(r,["image"],ix(n)),null!=(i=na(t,["referenceType"]))&&ns(r,["referenceType"],i),r})),ns(t,["instances[0]","referenceImages"],e)}if(void 0!==na(e,["mask"]))throw Error("mask parameter is not supported in Gemini API.");if(void 0!==na(e,["compressionQuality"]))throw Error("compressionQuality parameter is not supported in Gemini API.")}(y,a),a);return d=no("{model}:predictLongRunning",_._url),p=_._query,delete _._url,delete _._query,this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(_),httpMethod:"POST",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>{let t,r,n,i,o,s,a=(t={},null!=(r=na(e,["name"]))&&ns(t,["name"],r),null!=(n=na(e,["metadata"]))&&ns(t,["metadata"],n),null!=(i=na(e,["done"]))&&ns(t,["done"],i),null!=(o=na(e,["error"]))&&ns(t,["error"],o),null!=(s=na(e,["response","generateVideoResponse"]))&&ns(t,["response"],function(e){let t={},r=na(e,["generatedSamples"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i,o,s,a;return r={},null!=(n=na(e,["video"]))&&ns(r,["video"],(i={},null!=(o=na(t=n,["uri"]))&&ns(i,["uri"],o),null!=(s=na(t,["encodedVideo"]))&&ns(i,["videoBytes"],nl(s)),null!=(a=na(t,["encoding"]))&&ns(i,["mimeType"],a),i)),r})),ns(t,["generatedVideos"],e)}let n=na(e,["raiMediaFilteredCount"]);null!=n&&ns(t,["raiMediaFilteredCount"],n);let i=na(e,["raiMediaFilteredReasons"]);return null!=i&&ns(t,["raiMediaFilteredReasons"],i),t}(s)),t),l=new nS;return Object.assign(l,a),l})}}}class i7 extends ni{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let t=e.operation,r=e.config;if(void 0===t.name||""===t.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let e,n=t.name.split("/operations/")[0];r&&"httpOptions"in r&&(e=r.httpOptions);let i=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:n,config:{httpOptions:e}});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}{let e=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async get(e){let t=e.operation,r=e.config;if(void 0===t.name||""===t.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let e,n=t.name.split("/operations/")[0];r&&"httpOptions"in r&&(e=r.httpOptions);let i=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:n,config:{httpOptions:e}});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}{let e=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,n,i;let o="",s={};if(this.apiClient.isVertexAI()){let n,i,a=(n={},null!=(i=na(e,["operationName"]))&&ns(n,["_url","operationName"],i),n);return o=no("{operationName}",a._url),s=a._query,delete a._url,delete a._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json())}{let t,r,a=(t={},null!=(r=na(e,["operationName"]))&&ns(t,["_url","operationName"],r),t);return o=no("{operationName}",a._url),s=a._query,delete a._url,delete a._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json())}}async fetchPredictVideosOperationInternal(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI()){let o,s,a,l=(o={},null!=(s=na(e,["operationName"]))&&ns(o,["operationName"],s),null!=(a=na(e,["resourceName"]))&&ns(o,["_url","resourceName"],a),o);return n=no("{resourceName}:fetchPredictOperation",l._url),i=l._query,delete l._url,delete l._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json())}throw Error("This method is only supported by the Vertex AI.")}}class i9 extends ni{constructor(e){super(),this.apiClient=e}async create(e){var t,r,n,i,o;let s="",a={};if(this.apiClient.isVertexAI())throw Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let l,u,c,d,p,h,f,g,m,y,_=(n=this.apiClient,d={},null!=(p=na(e,["config"]))&&ns(d,["config"],(h=na(p,["expireTime"]),void 0!==d&&null!=h&&ns(d,["expireTime"],h),f=na(p,["newSessionExpireTime"]),void 0!==d&&null!=f&&ns(d,["newSessionExpireTime"],f),g=na(p,["uses"]),void 0!==d&&null!=g&&ns(d,["uses"],g),m=na(p,["liveConnectConstraints"]),void 0!==d&&null!=m&&ns(d,["bidiGenerateContentSetup"],(i=n,l={},null!=(u=na(o=m,["model"]))&&ns(l,["setup","model"],nL(i,u)),null!=(c=na(o,["config"]))&&ns(l,["config"],function(e,t){let r=na(e,["generationConfig"]);void 0!==t&&null!=r&&ns(t,["setup","generationConfig"],r);let n=na(e,["responseModalities"]);void 0!==t&&null!=n&&ns(t,["setup","generationConfig","responseModalities"],n);let i=na(e,["temperature"]);void 0!==t&&null!=i&&ns(t,["setup","generationConfig","temperature"],i);let o=na(e,["topP"]);void 0!==t&&null!=o&&ns(t,["setup","generationConfig","topP"],o);let s=na(e,["topK"]);void 0!==t&&null!=s&&ns(t,["setup","generationConfig","topK"],s);let a=na(e,["maxOutputTokens"]);void 0!==t&&null!=a&&ns(t,["setup","generationConfig","maxOutputTokens"],a);let l=na(e,["mediaResolution"]);void 0!==t&&null!=l&&ns(t,["setup","generationConfig","mediaResolution"],l);let u=na(e,["seed"]);void 0!==t&&null!=u&&ns(t,["setup","generationConfig","seed"],u);let c=na(e,["speechConfig"]);void 0!==t&&null!=c&&ns(t,["setup","generationConfig","speechConfig"],n0(c));let d=na(e,["thinkingConfig"]);void 0!==t&&null!=d&&ns(t,["setup","generationConfig","thinkingConfig"],d);let p=na(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&ns(t,["setup","generationConfig","enableAffectiveDialog"],p);let h=na(e,["systemInstruction"]);void 0!==t&&null!=h&&ns(t,["setup","systemInstruction"],function(e){let t={},r=na(e,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>{var t;let r,n,i,o,s,a,l,u,c,d,p,h;return r={},null!=(n=na(t=e,["mediaResolution"]))&&ns(r,["mediaResolution"],n),null!=(i=na(t,["codeExecutionResult"]))&&ns(r,["codeExecutionResult"],i),null!=(o=na(t,["executableCode"]))&&ns(r,["executableCode"],o),null!=(s=na(t,["fileData"]))&&ns(r,["fileData"],function(e){let t={};if(void 0!==na(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let r=na(e,["fileUri"]);null!=r&&ns(t,["fileUri"],r);let n=na(e,["mimeType"]);return null!=n&&ns(t,["mimeType"],n),t}(s)),null!=(a=na(t,["functionCall"]))&&ns(r,["functionCall"],function(e){let t={},r=na(e,["id"]);null!=r&&ns(t,["id"],r);let n=na(e,["args"]);null!=n&&ns(t,["args"],n);let i=na(e,["name"]);if(null!=i&&ns(t,["name"],i),void 0!==na(e,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==na(e,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return t}(a)),null!=(l=na(t,["functionResponse"]))&&ns(r,["functionResponse"],l),null!=(u=na(t,["inlineData"]))&&ns(r,["inlineData"],function(e){let t={},r=na(e,["data"]);if(null!=r&&ns(t,["data"],r),void 0!==na(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=na(e,["mimeType"]);return null!=n&&ns(t,["mimeType"],n),t}(u)),null!=(c=na(t,["text"]))&&ns(r,["text"],c),null!=(d=na(t,["thought"]))&&ns(r,["thought"],d),null!=(p=na(t,["thoughtSignature"]))&&ns(r,["thoughtSignature"],p),null!=(h=na(t,["videoMetadata"]))&&ns(r,["videoMetadata"],h),r})),ns(t,["parts"],e)}let n=na(e,["role"]);return null!=n&&ns(t,["role"],n),t}(nY(h)));let f=na(e,["tools"]);if(void 0!==t&&null!=f){let e=n2(f);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},r=na(e,["functionDeclarations"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["functionDeclarations"],e)}if(void 0!==na(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let n=na(e,["googleSearchRetrieval"]);null!=n&&ns(t,["googleSearchRetrieval"],n);let i=na(e,["computerUse"]);null!=i&&ns(t,["computerUse"],i);let o=na(e,["fileSearch"]);null!=o&&ns(t,["fileSearch"],o);let s=na(e,["codeExecution"]);if(null!=s&&ns(t,["codeExecution"],s),void 0!==na(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=na(e,["googleMaps"]);null!=a&&ns(t,["googleMaps"],function(e){let t={};if(void 0!==na(e,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let r=na(e,["enableWidget"]);return null!=r&&ns(t,["enableWidget"],r),t}(a));let l=na(e,["googleSearch"]);null!=l&&ns(t,["googleSearch"],function(e){let t={};if(void 0!==na(e,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==na(e,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let r=na(e,["timeRangeFilter"]);return null!=r&&ns(t,["timeRangeFilter"],r),t}(l));let u=na(e,["urlContext"]);return null!=u&&ns(t,["urlContext"],u),t})(n1(e)))),ns(t,["setup","tools"],e)}let g=na(e,["sessionResumption"]);void 0!==t&&null!=g&&ns(t,["setup","sessionResumption"],function(e){let t={},r=na(e,["handle"]);if(null!=r&&ns(t,["handle"],r),void 0!==na(e,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return t}(g));let m=na(e,["inputAudioTranscription"]);void 0!==t&&null!=m&&ns(t,["setup","inputAudioTranscription"],m);let y=na(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&ns(t,["setup","outputAudioTranscription"],y);let _=na(e,["realtimeInputConfig"]);void 0!==t&&null!=_&&ns(t,["setup","realtimeInputConfig"],_);let E=na(e,["contextWindowCompression"]);void 0!==t&&null!=E&&ns(t,["setup","contextWindowCompression"],E);let v=na(e,["proactivity"]);return void 0!==t&&null!=v&&ns(t,["setup","proactivity"],v),{}}(c,l)),l)),y=na(p,["lockAdditionalFields"]),void 0!==d&&null!=y&&ns(d,["fieldMask"],y),{})),d);s=no("auth_tokens",_._url),a=_._query,delete _.config,delete _._url,delete _._query;let E=function(e,t){let r=null,n=e.bidiGenerateContentSetup;if("object"==typeof n&&null!==n&&"setup"in n){let t=n.setup;"object"==typeof t&&null!==t?(e.bidiGenerateContentSetup=t,r=t):delete e.bidiGenerateContentSetup}else void 0!==n&&delete e.bidiGenerateContentSetup;let i=e.fieldMask;if(r){let n=function(e){let t=[];for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let n=e[r];if("object"==typeof n&&null!=n&&Object.keys(n).length>0){let e=Object.keys(n).map(e=>`${r}.${e}`);t.push(...e)}else t.push(r)}return t.join(",")}(r);if(Array.isArray(null==t?void 0:t.lockAdditionalFields)&&(null==t?void 0:t.lockAdditionalFields.length)===0)n?e.fieldMask=n:delete e.fieldMask;else if((null==t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==i&&Array.isArray(i)&&i.length>0){let t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],r=[];i.length>0&&(r=i.map(e=>t.includes(e)?`generationConfig.${e}`:e));let o=[];n&&o.push(n),r.length>0&&o.push(...r),o.length>0?e.fieldMask=o.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==i&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}(_,e.config);return this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(E),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}}}class oe extends ni{constructor(e){super(),this.apiClient=e,this.list=async e=>new iu(ty.PAGED_ITEM_DOCUMENTS,t=>this.listInternal({parent:e.parent,config:t.config}),await this.listInternal(e),e)}async get(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a=(o={},null!=(s=na(e,["name"]))&&ns(o,["_url","name"],s),o);return n=no("{name}",a._url),i=a._query,delete a._url,delete a._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a,l,u=(o={},null!=(s=na(e,["name"]))&&ns(o,["_url","name"],s),null!=(a=na(e,["config"]))&&(l=na(a,["force"]),void 0!==o&&null!=l&&ns(o,["_query","force"],l)),o);n=no("{name}",u._url),i=u._query,delete u._url,delete u._query,await this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal})}}async listInternal(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a,l,u,c=(o={},null!=(s=na(e,["parent"]))&&ns(o,["_url","parent"],s),null!=(a=na(e,["config"]))&&(l=na(a,["pageSize"]),void 0!==o&&null!=l&&ns(o,["_query","pageSize"],l),u=na(a,["pageToken"]),void 0!==o&&null!=u&&ns(o,["_query","pageToken"],u)),o);return n=no("{parent}/documents",c._url),i=c._query,delete c._url,delete c._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["nextPageToken"]);null!=n&&ns(t,["nextPageToken"],n);let i=na(e,["documents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["documents"],e)}return t}(e),r=new nC;return Object.assign(r,t),r})}}}class ot extends ni{constructor(e,t=new oe(e)){super(),this.apiClient=e,this.documents=t,this.list=async(e={})=>new iu(ty.PAGED_ITEM_FILE_SEARCH_STORES,e=>this.listInternal(e),await this.listInternal(e),e)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a,l=(o={},null!=(s=na(e,["config"]))&&(a=na(s,["displayName"]),void 0!==o&&null!=a&&ns(o,["displayName"],a)),o);return n=no("fileSearchStores",l._url),i=l._query,delete l._url,delete l._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}}async get(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a=(o={},null!=(s=na(e,["name"]))&&ns(o,["_url","name"],s),o);return n=no("{name}",a._url),i=a._query,delete a._url,delete a._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>e)}}async delete(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a,l,u=(o={},null!=(s=na(e,["name"]))&&ns(o,["_url","name"],s),null!=(a=na(e,["config"]))&&(l=na(a,["force"]),void 0!==o&&null!=l&&ns(o,["_query","force"],l)),o);n=no("{name}",u._url),i=u._query,delete u._url,delete u._query,await this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal})}}async listInternal(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a,l,u=(o={},null!=(s=na(e,["config"]))&&(a=na(s,["pageSize"]),void 0!==o&&null!=a&&ns(o,["_query","pageSize"],a),l=na(s,["pageToken"]),void 0!==o&&null!=l&&ns(o,["_query","pageToken"],l)),o);return n=no("fileSearchStores",u._url),i=u._query,delete u._url,delete u._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},r=na(e,["sdkHttpResponse"]);null!=r&&ns(t,["sdkHttpResponse"],r);let n=na(e,["nextPageToken"]);null!=n&&ns(t,["nextPageToken"],n);let i=na(e,["fileSearchStores"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["fileSearchStores"],e)}return t}(e),r=new nR;return Object.assign(r,t),r})}}async uploadToFileSearchStoreInternal(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a,l=(o={},null!=(s=na(e,["fileSearchStoreName"]))&&ns(o,["_url","file_search_store_name"],s),null!=(a=na(e,["config"]))&&iB(a,o),o);return n=no("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),i=l._query,delete l._url,delete l._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>{let t,r,n=(t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),t),i=new nI;return Object.assign(i,n),i})}}async importFile(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a,l,u=(o={},null!=(s=na(e,["fileSearchStoreName"]))&&ns(o,["_url","file_search_store_name"],s),null!=(a=na(e,["fileName"]))&&ns(o,["fileName"],a),null!=(l=na(e,["config"]))&&function(e,t){let r=na(e,["customMetadata"]);if(void 0!==t&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ns(t,["customMetadata"],e)}let n=na(e,["chunkingConfig"]);void 0!==t&&null!=n&&ns(t,["chunkingConfig"],n)}(l,o),o);return n=no("{file_search_store_name}:importFile",u._url),i=u._query,delete u._url,delete u._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json()).then(e=>{var t;let r,n,i,o,s,a,l,u,c,d,p=(s={},null!=(a=na(e,["name"]))&&ns(s,["name"],a),null!=(l=na(e,["metadata"]))&&ns(s,["metadata"],l),null!=(u=na(e,["done"]))&&ns(s,["done"],u),null!=(c=na(e,["error"]))&&ns(s,["error"],c),null!=(d=na(e,["response"]))&&ns(s,["response"],(r={},null!=(n=na(t=d,["sdkHttpResponse"]))&&ns(r,["sdkHttpResponse"],n),null!=(i=na(t,["parent"]))&&ns(r,["parent"],i),null!=(o=na(t,["documentName"]))&&ns(r,["documentName"],o),r)),s),h=new nP;return Object.assign(h,p),h})}}}let or="x-goog-api-key",on="https://www.googleapis.com/auth/cloud-platform";class oi{constructor(e){if(void 0!==e.apiKey){this.apiKey=e.apiKey;return}const t=function(e){let t;if(!e)return{scopes:[on]};if((t=e).scopes){if("string"==typeof t.scopes&&t.scopes!==on||Array.isArray(t.scopes)&&0>t.scopes.indexOf(on))throw Error(`Invalid auth scopes. Scopes must include: ${on}`)}else t.scopes=[on];return t}(e.googleAuthOptions);this.googleAuth=new r8.GoogleAuth(t)}async addAuthHeaders(e,t){if(void 0!==this.apiKey){if(this.apiKey.startsWith("auth_tokens/"))throw Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader(e);return}return this.addGoogleAuthHeaders(e,t)}addKeyHeader(e){if(null===e.get(or)){if(void 0===this.apiKey)throw Error("Trying to set API key header but apiKey is not set");e.append(or,this.apiKey)}}async addGoogleAuthHeaders(e,t){if(void 0===this.googleAuth)throw Error("Trying to set google-auth headers but googleAuth is unset");for(let[r,n]of(await this.googleAuth.getRequestHeaders(t)))null===e.get(r)&&e.append(r,n)}}class oo{async download(e,t){if(e.downloadPath){let r=await os(e,t);if(r instanceof nc){let t=(0,r7.createWriteStream)(e.downloadPath);ne.Readable.fromWeb(r.responseInternal.body).pipe(t),await (0,nt.finished)(t)}else try{await (0,r9.writeFile)(e.downloadPath,r,{encoding:"base64"})}catch(t){throw Error(`Failed to write file to ${e.downloadPath}: ${t}`)}}}}async function os(e,t){var r,n,i;let o=n8(e.file);if(void 0!==o)return await t.request({path:`files/${o}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:null==(r=e.config)?void 0:r.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal});if(n6(e.file)){let t=null==(i=e.file.video)?void 0:i.videoBytes;if("string"==typeof t)return t;throw Error("Failed to download generated video, Uri or videoBytes not found.")}if(n5(e.file)){let t=e.file.videoBytes;if("string"==typeof t)return t;throw Error("Failed to download video, Uri or videoBytes not found.")}throw Error("Unsupported file type")}class oa{create(e,t,r){return new ol(e,t,r)}}class ol{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new nr.default(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.close()}}function ou(e,t){let r,n,i,o={},s=na(e,["sdkHttpResponse"]);null!=s&&ns(o,["sdkHttpResponse"],s);let a=na(e,["name"]);null!=a&&ns(o,["name"],a);let l=na(e,["state"]);null!=l&&ns(o,["state"],n3(l));let u=na(e,["createTime"]);null!=u&&ns(o,["createTime"],u);let c=na(e,["tuningTask","startTime"]);null!=c&&ns(o,["startTime"],c);let d=na(e,["tuningTask","completeTime"]);null!=d&&ns(o,["endTime"],d);let p=na(e,["updateTime"]);null!=p&&ns(o,["updateTime"],p);let h=na(e,["description"]);null!=h&&ns(o,["description"],h);let f=na(e,["baseModel"]);null!=f&&ns(o,["baseModel"],f);let g=na(e,["_self"]);return null!=g&&ns(o,["tunedModel"],(r={},null!=(n=na(g,["name"]))&&ns(r,["model"],n),null!=(i=na(g,["name"]))&&ns(r,["endpoint"],i),r)),o}function oc(e,t){let r={},n=na(e,["sdkHttpResponse"]);null!=n&&ns(r,["sdkHttpResponse"],n);let i=na(e,["name"]);null!=i&&ns(r,["name"],i);let o=na(e,["state"]);null!=o&&ns(r,["state"],n3(o));let s=na(e,["createTime"]);null!=s&&ns(r,["createTime"],s);let a=na(e,["startTime"]);null!=a&&ns(r,["startTime"],a);let l=na(e,["endTime"]);null!=l&&ns(r,["endTime"],l);let u=na(e,["updateTime"]);null!=u&&ns(r,["updateTime"],u);let c=na(e,["error"]);null!=c&&ns(r,["error"],c);let d=na(e,["description"]);null!=d&&ns(r,["description"],d);let p=na(e,["baseModel"]);null!=p&&ns(r,["baseModel"],p);let h=na(e,["tunedModel"]);null!=h&&ns(r,["tunedModel"],h);let f=na(e,["preTunedModel"]);null!=f&&ns(r,["preTunedModel"],f);let g=na(e,["supervisedTuningSpec"]);null!=g&&ns(r,["supervisedTuningSpec"],g);let m=na(e,["preferenceOptimizationSpec"]);null!=m&&ns(r,["preferenceOptimizationSpec"],m);let y=na(e,["tuningDataStats"]);null!=y&&ns(r,["tuningDataStats"],y);let _=na(e,["encryptionSpec"]);null!=_&&ns(r,["encryptionSpec"],_);let E=na(e,["partnerModelTuningSpec"]);null!=E&&ns(r,["partnerModelTuningSpec"],E);let v=na(e,["customBaseModel"]);null!=v&&ns(r,["customBaseModel"],v);let b=na(e,["experiment"]);null!=b&&ns(r,["experiment"],b);let S=na(e,["labels"]);null!=S&&ns(r,["labels"],S);let T=na(e,["outputUri"]);null!=T&&ns(r,["outputUri"],T);let A=na(e,["pipelineJob"]);null!=A&&ns(r,["pipelineJob"],A);let O=na(e,["serviceAccount"]);null!=O&&ns(r,["serviceAccount"],O);let w=na(e,["tunedModelDisplayName"]);null!=w&&ns(r,["tunedModelDisplayName"],w);let C=na(e,["veoTuningSpec"]);return null!=C&&ns(r,["veoTuningSpec"],C),r}function od(e,t){let r={},n=na(e,["gcsUri"]);null!=n&&ns(r,["validationDatasetUri"],n);let i=na(e,["vertexDatasetResource"]);return null!=i&&ns(r,["validationDatasetUri"],i),r}class op extends ni{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new iu(ty.PAGED_ITEM_TUNING_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var t;if(this.apiClient.isVertexAI())if(e.baseModel.startsWith("projects/")){let r={tunedModelName:e.baseModel};(null==(t=e.config)?void 0:t.preTunedModelCheckpointId)&&(r.checkpointId=e.config.preTunedModelCheckpointId);let n=Object.assign(Object.assign({},e),{preTunedModel:r});return n.baseModel=void 0,await this.tuneInternal(n)}else{let t=Object.assign({},e);return await this.tuneInternal(t)}{let t=Object.assign({},e),r=await this.tuneMldevInternal(t),n="";return void 0!==r.metadata&&void 0!==r.metadata.tunedModel?n=r.metadata.tunedModel:void 0!==r.name&&r.name.includes("/operations/")&&(n=r.name.split("/operations/")[0]),{name:n,state:eY.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,n,i;let o="",s={};if(this.apiClient.isVertexAI()){let n,i,a=(n={},null!=(i=na(e,["name"]))&&ns(n,["_url","name"],i),n);return o=no("{name}",a._url),s=a._query,delete a._url,delete a._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>oc(e))}{let t,r,a=(t={},null!=(r=na(e,["name"]))&&ns(t,["_url","name"],r),t);return o=no("{name}",a._url),s=a._query,delete a._url,delete a._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>ou(e))}}async listInternal(e){var t,r,n,i;let o="",s={};if(this.apiClient.isVertexAI()){let n,i,a,l,u,c=(n={},null!=(i=na(e,["config"]))&&(a=na(i,["pageSize"]),void 0!==n&&null!=a&&ns(n,["_query","pageSize"],a),l=na(i,["pageToken"]),void 0!==n&&null!=l&&ns(n,["_query","pageToken"],l),u=na(i,["filter"]),void 0!==n&&null!=u&&ns(n,["_query","filter"],u)),n);return o=no("tuningJobs",c._url),s=c._query,delete c._url,delete c._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e,t){let r={},n=na(e,["sdkHttpResponse"]);null!=n&&ns(r,["sdkHttpResponse"],n);let i=na(e,["nextPageToken"]);null!=i&&ns(r,["nextPageToken"],i);let o=na(e,["tuningJobs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>oc(e))),ns(r,["tuningJobs"],e)}return r}(e),r=new nT;return Object.assign(r,t),r})}{let t,r,a,l,u,c=(t={},null!=(r=na(e,["config"]))&&(a=na(r,["pageSize"]),void 0!==t&&null!=a&&ns(t,["_query","pageSize"],a),l=na(r,["pageToken"]),void 0!==t&&null!=l&&ns(t,["_query","pageToken"],l),u=na(r,["filter"]),void 0!==t&&null!=u&&ns(t,["_query","filter"],u)),t);return o=no("tunedModels",c._url),s=c._query,delete c._url,delete c._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=function(e,t){let r={},n=na(e,["sdkHttpResponse"]);null!=n&&ns(r,["sdkHttpResponse"],n);let i=na(e,["nextPageToken"]);null!=i&&ns(r,["nextPageToken"],i);let o=na(e,["tunedModels"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>ou(e))),ns(r,["tuningJobs"],e)}return r}(e),r=new nT;return Object.assign(r,t),r})}}async cancel(e){var t,r,n,i;let o="",s={};if(this.apiClient.isVertexAI()){let n,i,a=(n={},null!=(i=na(e,["name"]))&&ns(n,["_url","name"],i),n);return o=no("{name}:cancel",a._url),s=a._query,delete a._url,delete a._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n=(t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),t),i=new nA;return Object.assign(i,n),i})}{let t,r,a=(t={},null!=(r=na(e,["name"]))&&ns(t,["_url","name"],r),t);return o=no("{name}:cancel",a._url),s=a._query,delete a._url,delete a._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null==(n=e.config)?void 0:n.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n=(t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),t),i=new nA;return Object.assign(i,n),i})}}async tuneInternal(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI()){let o,s,a,l,u,c=(o={},null!=(s=na(e,["baseModel"]))&&ns(o,["baseModel"],s),null!=(a=na(e,["preTunedModel"]))&&ns(o,["preTunedModel"],a),null!=(l=na(e,["trainingDataset"]))&&function(e,t,r){let n=na(r,["config","method"]);if(void 0===n&&(n="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===n){let r=na(e,["gcsUri"]);void 0!==t&&null!=r&&ns(t,["supervisedTuningSpec","trainingDatasetUri"],r)}else if("PREFERENCE_TUNING"===n){let r=na(e,["gcsUri"]);void 0!==t&&null!=r&&ns(t,["preferenceOptimizationSpec","trainingDatasetUri"],r)}let i=na(r,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){let r=na(e,["vertexDatasetResource"]);void 0!==t&&null!=r&&ns(t,["supervisedTuningSpec","trainingDatasetUri"],r)}else if("PREFERENCE_TUNING"===i){let r=na(e,["vertexDatasetResource"]);void 0!==t&&null!=r&&ns(t,["preferenceOptimizationSpec","trainingDatasetUri"],r)}if(void 0!==na(e,["examples"]))throw Error("examples parameter is not supported in Vertex AI.")}(l,o,e),null!=(u=na(e,["config"]))&&function(e,t,r){let n=na(r,["config","method"]);if(void 0===n&&(n="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===n){let r=na(e,["validationDataset"]);void 0!==t&&null!=r&&ns(t,["supervisedTuningSpec"],od(r))}else if("PREFERENCE_TUNING"===n){let r=na(e,["validationDataset"]);void 0!==t&&null!=r&&ns(t,["preferenceOptimizationSpec"],od(r))}let i=na(e,["tunedModelDisplayName"]);void 0!==t&&null!=i&&ns(t,["tunedModelDisplayName"],i);let o=na(e,["description"]);void 0!==t&&null!=o&&ns(t,["description"],o);let s=na(r,["config","method"]);if(void 0===s&&(s="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===s){let r=na(e,["epochCount"]);void 0!==t&&null!=r&&ns(t,["supervisedTuningSpec","hyperParameters","epochCount"],r)}else if("PREFERENCE_TUNING"===s){let r=na(e,["epochCount"]);void 0!==t&&null!=r&&ns(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],r)}let a=na(r,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){let r=na(e,["learningRateMultiplier"]);void 0!==t&&null!=r&&ns(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],r)}else if("PREFERENCE_TUNING"===a){let r=na(e,["learningRateMultiplier"]);void 0!==t&&null!=r&&ns(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],r)}let l=na(r,["config","method"]);if(void 0===l&&(l="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===l){let r=na(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=r&&ns(t,["supervisedTuningSpec","exportLastCheckpointOnly"],r)}else if("PREFERENCE_TUNING"===l){let r=na(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=r&&ns(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],r)}let u=na(r,["config","method"]);if(void 0===u&&(u="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===u){let r=na(e,["adapterSize"]);void 0!==t&&null!=r&&ns(t,["supervisedTuningSpec","hyperParameters","adapterSize"],r)}else if("PREFERENCE_TUNING"===u){let r=na(e,["adapterSize"]);void 0!==t&&null!=r&&ns(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],r)}if(void 0!==na(e,["batchSize"]))throw Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==na(e,["learningRate"]))throw Error("learningRate parameter is not supported in Vertex AI.");let c=na(e,["labels"]);void 0!==t&&null!=c&&ns(t,["labels"],c);let d=na(e,["beta"]);void 0!==t&&null!=d&&ns(t,["preferenceOptimizationSpec","hyperParameters","beta"],d)}(u,o,e),o);return n=no("tuningJobs",c._url),i=c._query,delete c._url,delete c._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>oc(e))}throw Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let n="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let o,s,a,l,u,c=(o={},null!=(s=na(e,["baseModel"]))&&ns(o,["baseModel"],s),null!=(a=na(e,["preTunedModel"]))&&ns(o,["preTunedModel"],a),null!=(l=na(e,["trainingDataset"]))&&function(e,t){if(void 0!==na(e,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==na(e,["vertexDatasetResource"]))throw Error("vertexDatasetResource parameter is not supported in Gemini API.");let r=na(e,["examples"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ns({},["examples","examples"],e)}}(l),null!=(u=na(e,["config"]))&&function(e,t,r){if(void 0!==na(e,["validationDataset"]))throw Error("validationDataset parameter is not supported in Gemini API.");let n=na(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=n&&ns(t,["displayName"],n),void 0!==na(e,["description"]))throw Error("description parameter is not supported in Gemini API.");let i=na(e,["epochCount"]);void 0!==t&&null!=i&&ns(t,["tuningTask","hyperparameters","epochCount"],i);let o=na(e,["learningRateMultiplier"]);if(null!=o&&ns({},["tuningTask","hyperparameters","learningRateMultiplier"],o),void 0!==na(e,["exportLastCheckpointOnly"]))throw Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==na(e,["preTunedModelCheckpointId"]))throw Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==na(e,["adapterSize"]))throw Error("adapterSize parameter is not supported in Gemini API.");let s=na(e,["batchSize"]);void 0!==t&&null!=s&&ns(t,["tuningTask","hyperparameters","batchSize"],s);let a=na(e,["learningRate"]);if(void 0!==t&&null!=a&&ns(t,["tuningTask","hyperparameters","learningRate"],a),void 0!==na(e,["labels"]))throw Error("labels parameter is not supported in Gemini API.");if(void 0!==na(e,["beta"]))throw Error("beta parameter is not supported in Gemini API.")}(u,o),o);return n=no("tunedModels",c._url),i=c._query,delete c._url,delete c._query,this.apiClient.request({path:n,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(r=e.config)?void 0:r.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t,r,n,i,o,s;return t={},null!=(r=na(e,["sdkHttpResponse"]))&&ns(t,["sdkHttpResponse"],r),null!=(n=na(e,["name"]))&&ns(t,["name"],n),null!=(i=na(e,["metadata"]))&&ns(t,["metadata"],i),null!=(o=na(e,["done"]))&&ns(t,["done"],o),null!=(s=na(e,["error"]))&&ns(t,["error"],s),t})}}}let oh="x-goog-upload-status";async function of(e,t,r){var n;let i=await om(e,t,r),o=await (null==i?void 0:i.json());if((null==(n=null==i?void 0:i.headers)?void 0:n[oh])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return o.file}async function og(e,t,r){var n;let i=await om(e,t,r),o=await (null==i?void 0:i.json());if((null==(n=null==i?void 0:i.headers)?void 0:n[oh])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let s=nu(o),a=new nj;return Object.assign(a,s),a}async function om(e,t,r){var n,i;let o=0,s=0,a=new nc(new Response),l="upload";for(o=e.size;s<o;){let u=Math.min(8388608,o-s),c=e.slice(s,s+u);s+u>=o&&(l+=", finalize");let d=0,p=1e3;for(;d<3&&(null==(n=null==(a=await r.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}))?void 0:a.headers)||!n[oh]);)d++,await o_(p),p*=2;if(s+=u,(null==(i=null==a?void 0:a.headers)?void 0:i[oh])!=="active")break;if(o<=s)throw Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function oy(e){return{size:e.size,type:e.type}}function o_(e){return new Promise(t=>setTimeout(t,e))}class oE{async stat(e){let t={size:0,type:void 0};return"string"==typeof e?(t.size=(await r9.stat(e)).size,t.type=this.inferMimeType(e),t):await oy(e)}async upload(e,t,r){return"string"==typeof e?await this.uploadFileFromPath(e,t,r):of(e,t,r)}async uploadToFileSearchStore(e,t,r){return"string"==typeof e?await this.uploadFileToFileSearchStoreFromPath(e,t,r):og(e,t,r)}inferMimeType(e){return({aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"})[e.slice(e.lastIndexOf(".")+1).toLowerCase()]}async uploadFileFromPath(e,t,r){var n;let i=await this.uploadFileFromPathInternal(e,t,r),o=await (null==i?void 0:i.json());if((null==(n=null==i?void 0:i.headers)?void 0:n[oh])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return o.file}async uploadFileToFileSearchStoreFromPath(e,t,r){var n;let i=await this.uploadFileFromPathInternal(e,t,r),o=await (null==i?void 0:i.json());if((null==(n=null==i?void 0:i.headers)?void 0:n[oh])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let s=nu(o),a=new nj;return Object.assign(a,s),a}async uploadFileFromPathInternal(e,t,r){var n,i;let o,s=0,a=0,l=new nc(new Response),u="upload",c=nn.basename(e);try{if(!(o=await r9.open(e,"r")))throw Error("Failed to open file");for(s=(await o.stat()).size;a<s;){let e=Math.min(8388608,s-a);a+e>=s&&(u+=", finalize");let d=new Uint8Array(e),{bytesRead:p}=await o.read(d,0,e,a);if(p!==e)throw Error(`Failed to read ${e} bytes from file at offset ${a}. bytes actually read: ${p}`);let h=new Blob([d]),f=0,g=1e3;for(;f<3&&(null==(n=null==(l=await r.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p),"X-Goog-Upload-File-Name":c}}}))?void 0:l.headers)||!n[oh]);)f++,await o_(g),g*=2;if(a+=p,(null==(i=null==l?void 0:l.headers)?void 0:i[oh])!=="active")break;if(s<=a)throw Error("All content has been uploaded, but the upload status is not finalized.")}return l}finally{o&&await o.close()}}}function ov(e){var t,r,n;return null!=(n=null==(r=null==(t=null==process?void 0:process.env)?void 0:t[e])?void 0:r.trim())?n:void 0}let ob=process.env.GEMINI_API_KEY||process.env.API_KEY||"",oS=new class{constructor(e){var t,r,n,s,a,l;if((e.project||e.location)&&e.apiKey)throw Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=null!=(r=null!=(t=e.vertexai)?t:function(e){var t;return void 0!==(t=ov(e))&&"true"===t.toLowerCase()}("GOOGLE_GENAI_USE_VERTEXAI"))&&r;const u=function(){let e=ov("GOOGLE_API_KEY"),t=ov("GEMINI_API_KEY");return e&&t&&console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY."),e||t||void 0}(),c=ov("GOOGLE_CLOUD_PROJECT"),d=ov("GOOGLE_CLOUD_LOCATION");this.apiKey=null!=(n=e.apiKey)?n:u,this.project=null!=(s=e.project)?s:c,this.location=null!=(a=e.location)?a:d,e.vertexai&&((null==(l=e.googleAuthOptions)?void 0:l.credentials)&&(console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0),(c||d)&&e.apiKey?(console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0):(e.project||e.location)&&u?(console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0):(c||d)&&u&&(console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0),this.location||this.apiKey||(this.location="global"));const p=function(e,t,r,n){return(null==e?void 0:e.baseUrl)?e.baseUrl:t?null!=o?o:r:null!=i?i:n}(e.httpOptions,e.vertexai,ov("GOOGLE_VERTEX_BASE_URL"),ov("GOOGLE_GEMINI_BASE_URL"));p&&(e.httpOptions?e.httpOptions.baseUrl=p:e.httpOptions={baseUrl:p}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const h=new oi({apiKey:this.apiKey,googleAuthOptions:e.googleAuthOptions});this.apiClient=new i$({auth:h,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/"+process.version,uploader:new oE,downloader:new oo}),this.models=new i8(this.apiClient),this.live=new i0(this.apiClient,h,new oa),this.batches=new ic(this.apiClient),this.chats=new iE(this.models,this.apiClient),this.caches=new ip(this.apiClient),this.files=new iS(this.apiClient),this.operations=new i7(this.apiClient),this.authTokens=new i9(this.apiClient),this.tunings=new op(this.apiClient),this.fileSearchStores=new ot(this.apiClient)}}({apiKey:ob});async function oT(e){try{let{action:t,...r}=await e.json();if(!ob)return r5.NextResponse.json({error:"API Key not configured"},{status:500});let n="";if("generateDescription"===t){let{salonName:e,services:t}=r;n=`Escreva uma descri\xe7\xe3o curta, atraente e profissional para um sal\xe3o de beleza chamado "${e}". 
        O sal\xe3o oferece os seguintes servi\xe7os: ${t.join(", ")}. 
        A descri\xe7\xe3o deve ter no m\xe1ximo 300 caracteres e focar na qualidade e experi\xeancia do cliente.`}else{if("generateMarketingPost"!==t)return r5.NextResponse.json({error:"Invalid action"},{status:400});let{salonName:e,goal:i,tone:o}=r;n=`Crie um post curto para Instagram/WhatsApp para o sal\xe3o de beleza "${e}".
        Objetivo: ${i}.
        Tom de voz: ${o||"divertido"}.
        Use emojis. M\xe1ximo 200 caracteres.
        N\xe3o use hashtags.`}let i=(await oS.models.generateContent({model:"gemini-1.5-flash",contents:n})).text||"";return r5.NextResponse.json({text:i})}catch(e){return console.error("AI API Error:",e),r5.NextResponse.json({error:"Failed to generate content"},{status:500})}}e.s(["POST",()=>oT],25857);var oA=e.i(25857);let oO=new t_.AppRouteRouteModule({definition:{kind:tE.APP_ROUTE,page:"/api/ai/route",pathname:"/api/ai",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/ai/route.ts",nextConfigOutput:"",userland:oA}),{workAsyncStorage:ow,workUnitAsyncStorage:oC,serverHooks:oR}=oO;function oI(){return function(e){var t;let r;if(!0===globalThis[rq])return;let n=(t=globalThis.fetch,r=tz.cache(e=>[]),function(e,n){let i,o;if(n&&n.signal)return t(e,n);if("string"!=typeof e||n){let r,s="string"==typeof e||e instanceof URL?new Request(e,n):e;if("GET"!==s.method&&"HEAD"!==s.method||s.keepalive)return t(e,n);r=Array.from(s.headers.entries()).filter(([e])=>!rt.has(e.toLowerCase())),o=JSON.stringify([s.method,r,s.mode,s.redirect,s.credentials,s.referrer,s.referrerPolicy,s.integrity]),i=s.url}else o='["GET",[],null,"follow",null,null,null,null]',i=e;let s=r(i);for(let e=0,t=s.length;e<t;e+=1){let[t,r]=s[e];if(t===o)return r.then(()=>{let t=s[e][2];if(!t)throw Object.defineProperty(new t6("No cached response"),"__NEXT_ERROR_CODE",{value:"E579",enumerable:!1,configurable:!0});let[r,n]=re(t);return s[e][2]=n,r})}let a=t(e,n),l=[o,a,null];return s.push(l),a.then(e=>{let[t,r]=re(e);return l[2]=r,t})});globalThis.fetch=function(e,{workAsyncStorage:t,workUnitAsyncStorage:r}){let n=async function(n,i){var o,s;let a;try{(a=new URL(n instanceof Request?n.url:n)).username="",a.password=""}catch{a=void 0}let l=(null==a?void 0:a.href)??"",u=(null==i||null==(o=i.method)?void 0:o.toUpperCase())||"GET",c=(null==i||null==(s=i.next)?void 0:s.internal)===!0,d="1"===process.env.NEXT_OTEL_FETCH_DISABLED,p=c?void 0:performance.timeOrigin+performance.now(),h=t.getStore(),f=r.getStore(),g=f?(0,tQ.getCacheSignal)(f):null;g&&g.beginRead();let m=tJ().trace(c?tT.internalFetch:tw.fetch,{hideSpan:d,kind:tG.CLIENT,spanName:["fetch",u,l].filter(Boolean).join(" "),attributes:{"http.url":l,"http.method":u,"net.peer.name":null==a?void 0:a.hostname,"net.peer.port":(null==a?void 0:a.port)||void 0}},async()=>{var t;let r,o,s,a,u,d;if(c||!h||h.isDraftMode)return e(n,i);let m=n&&"object"==typeof n&&"string"==typeof n.method,y=e=>(null==i?void 0:i[e])||(m?n[e]:null),_=e=>{var t,r,o;return void 0!==(null==i||null==(t=i.next)?void 0:t[e])?null==i||null==(r=i.next)?void 0:r[e]:m?null==(o=n.next)?void 0:o[e]:void 0},E=_("revalidate"),v=E,b=function(e,t){let r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];if("string"!=typeof o?n.push({tag:o,reason:"invalid type, must be a string"}):o.length>256?n.push({tag:o,reason:"exceeded max length of 256"}):r.push(o),r.length>128){console.warn(`Warning: exceeded max tag count for ${t}, dropped tags:`,e.slice(i).join(", "));break}}if(n.length>0)for(let{tag:e,reason:r}of(console.warn(`Warning: invalid tags passed to ${t}: `),n))console.log(`tag: "${e}" ${r}`);return r}(_("tags")||[],`fetch ${n.toString()}`);if(f)switch(f.type){case"prerender":case"prerender-runtime":case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"cache":case"private-cache":r=f}if(r&&Array.isArray(b)){let e=r.tags??(r.tags=[]);for(let t of b)e.includes(t)||e.push(t)}let S=null==f?void 0:f.implicitTags,T=h.fetchCache;f&&"unstable-cache"===f.type&&(T="force-no-store");let A=!!h.isUnstableNoStore,O=y("cache"),w="";"string"==typeof O&&void 0!==v&&("force-cache"===O&&0===v||"no-store"===O&&(v>0||!1===v))&&(o=`Specified "cache: ${O}" and "revalidate: ${v}", only one should be specified.`,O=void 0,v=void 0);let C="no-cache"===O||"no-store"===O||"force-no-store"===T||"only-no-store"===T,R=!T&&!O&&!v&&h.forceDynamic;"force-cache"===O&&void 0===v?v=!1:(C||R)&&(v=0),("no-cache"===O||"no-store"===O)&&(w=`cache: ${O}`),d=function(e,t){try{let r;if(!1===e)r=0xfffffffe;else if("number"==typeof e&&!isNaN(e)&&e>-1)r=e;else if(void 0!==e)throw Object.defineProperty(Error(`Invalid revalidate value "${e}" on "${t}", must be a non-negative number or false`),"__NEXT_ERROR_CODE",{value:"E179",enumerable:!1,configurable:!0});return r}catch(e){if(e instanceof Error&&e.message.includes("Invalid revalidate"))throw e;return}}(v,h.route);let I=y("headers"),P="function"==typeof(null==I?void 0:I.get)?I:new Headers(I||{}),N=P.get("authorization")||P.get("cookie"),x=!["get","head"].includes((null==(t=y("method"))?void 0:t.toLowerCase())||"get"),k=void 0==T&&(void 0==O||"default"===O)&&void 0==v,D=!!((N||x)&&(null==r?void 0:r.revalidate)===0),M=!1;if(!D&&k&&(h.isBuildTimePrerendering?M=!0:D=!0),k&&void 0!==f)switch(f.type){case"prerender":case"prerender-runtime":case"prerender-client":return g&&(g.endRead(),g=null),t4(f.renderSignal,h.route,"fetch()")}switch(T){case"force-no-store":w="fetchCache = force-no-store";break;case"only-no-store":if("force-cache"===O||void 0!==d&&d>0)throw Object.defineProperty(Error(`cache: 'force-cache' used on fetch for ${l} with 'export const fetchCache = 'only-no-store'`),"__NEXT_ERROR_CODE",{value:"E448",enumerable:!1,configurable:!0});w="fetchCache = only-no-store";break;case"only-cache":if("no-store"===O)throw Object.defineProperty(Error(`cache: 'no-store' used on fetch for ${l} with 'export const fetchCache = 'only-cache'`),"__NEXT_ERROR_CODE",{value:"E521",enumerable:!1,configurable:!0});break;case"force-cache":(void 0===v||0===v)&&(w="fetchCache = force-cache",d=0xfffffffe)}if(void 0===d?"default-cache"!==T||A?"default-no-store"===T?(d=0,w="fetchCache = default-no-store"):A?(d=0,w="noStore call"):D?(d=0,w="auto no cache"):(w="auto cache",d=r?r.revalidate:0xfffffffe):(d=0xfffffffe,w="fetchCache = default-cache"):w||(w=`revalidate: ${d}`),!(h.forceStatic&&0===d)&&!D&&r&&d<r.revalidate){if(0===d){if(f)switch(f.type){case"prerender":case"prerender-client":case"prerender-runtime":return g&&(g.endRead(),g=null),t4(f.renderSignal,h.route,"fetch()")}t8(h,f,`revalidate: 0 fetch ${n} ${h.route}`)}r&&E===d&&(r.revalidate=d)}let U="number"==typeof d&&d>0,{incrementalCache:j}=h,L=!1;if(f)switch(f.type){case"request":case"cache":case"private-cache":L=f.isHmrRefresh??!1,a=f.serverComponentsHmrCache}if(j&&(U||a))try{s=await j.generateCacheKey(l,m?n:i)}catch(e){console.error("Failed to generate cache key for",n)}let G=h.nextFetchId??1;h.nextFetchId=G+1;let F=()=>{},q=async(t,r)=>{let u=["cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","window","duplex",...t?[]:["signal"]];if(m){let e=n,t={body:e._ogBody||e.body};for(let r of u)t[r]=e[r];n=new Request(e.url,t)}else if(i){let{_ogBody:e,body:r,signal:n,...o}=i;i={...o,body:e||r,signal:t?void 0:n}}let c={...i,next:{...null==i?void 0:i.next,fetchType:"origin",fetchIdx:G}};return e(n,c).then(async e=>{if(!t&&p&&rB(h,{start:p,url:l,cacheReason:r||w,cacheStatus:0===d||r?"skip":"miss",cacheWarning:o,status:e.status,method:c.method||"GET"}),200===e.status&&j&&s&&(U||a)){let t=d>=0xfffffffe?31536e3:d,r=U?{fetchCache:!0,fetchUrl:l,fetchIdx:G,tags:b,isImplicitBuildTimeCache:M}:void 0;switch(null==f?void 0:f.type){case"prerender":case"prerender-client":case"prerender-runtime":return rH(e,s,r,j,t,F);case"request":case"prerender-ppr":case"prerender-legacy":case"cache":case"private-cache":case"unstable-cache":case void 0:return rV(h,e,s,r,j,a,t,n,F)}}return await F(),e}).catch(e=>{throw F(),e})},B=!1,H=!1;if(s&&j){let e;if(L&&a&&(e=a.get(s),H=!0),U&&!e){F=await j.lock(s);let t=h.isOnDemandRevalidate?null:await j.get(s,{kind:ri.FETCH,revalidate:d,fetchUrl:l,fetchIdx:G,tags:b,softTags:null==S?void 0:S.tags});if(k&&f)switch(f.type){case"prerender":case"prerender-client":case"prerender-runtime":await (r$||(r$=new Promise(e=>{setTimeout(()=>{r$=null,e()},0)})),r$)}if(t?await F():u="cache-control: no-cache (hard refresh)",(null==t?void 0:t.value)&&t.value.kind===rn.FETCH)if(h.isStaticGeneration&&t.isStale)B=!0;else{if(t.isStale&&(h.pendingRevalidates??={},!h.pendingRevalidates[s])){let e=q(!0).then(async e=>({body:await e.arrayBuffer(),headers:e.headers,status:e.status,statusText:e.statusText})).finally(()=>{h.pendingRevalidates??={},delete h.pendingRevalidates[s||""]});e.catch(console.error),h.pendingRevalidates[s]=e}e=t.value.data}}if(e){p&&rB(h,{start:p,url:l,cacheReason:w,cacheStatus:H?"hmr":"hit",cacheWarning:o,status:e.status||200,method:(null==i?void 0:i.method)||"GET"});let t=new Response(Buffer.from(e.body,"base64"),{headers:e.headers,status:e.status});return Object.defineProperty(t,"url",{value:e.url}),t}}if(h.isStaticGeneration&&i&&"object"==typeof i){let{cache:e}=i;if("no-store"===e){if(f)switch(f.type){case"prerender":case"prerender-client":case"prerender-runtime":return g&&(g.endRead(),g=null),t4(f.renderSignal,h.route,"fetch()")}t8(h,f,`no-store fetch ${n} ${h.route}`)}let t="next"in i,{next:o={}}=i;if("number"==typeof o.revalidate&&r&&o.revalidate<r.revalidate){if(0===o.revalidate){if(f)switch(f.type){case"prerender":case"prerender-client":case"prerender-runtime":return t4(f.renderSignal,h.route,"fetch()")}t8(h,f,`revalidate: 0 fetch ${n} ${h.route}`)}h.forceStatic&&0===o.revalidate||(r.revalidate=o.revalidate)}t&&delete i.next}if(!s||!B)return q(!1,u);{let e=s;h.pendingRevalidates??={};let t=h.pendingRevalidates[e];if(t){let e=await t;return new Response(e.body,{headers:e.headers,status:e.status,statusText:e.statusText})}let r=q(!0,u).then(re);return(t=r.then(async e=>{let t=e[0];return{body:await t.arrayBuffer(),headers:t.headers,status:t.status,statusText:t.statusText}}).finally(()=>{var t;(null==(t=h.pendingRevalidates)?void 0:t[e])&&delete h.pendingRevalidates[e]})).catch(()=>{}),h.pendingRevalidates[e]=t,r.then(e=>e[1])}});if(g)try{return await m}finally{g&&g.endRead()}return m};return n.__nextPatched=!0,n.__nextGetStaticStore=()=>t,n._nextOriginalFetch=e,globalThis[rq]=!0,Object.defineProperty(n,"name",{value:"fetch",writable:!1}),n}(n,e)}({workAsyncStorage:ow,workUnitAsyncStorage:oC})}async function oP(e,t,r){var n;let i;oO.isDev&&(n=process.hrtime.bigint(),(i=rd(e)).devRequestTimingInternalsEnd=n,e[rc]=i);let o="/api/ai/route";o=o.replace(/\/index$/,"")||"/";let s=await oO.prepare(e,t,{srcPage:o,multiZoneDraftMode:!1});if(!s)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:a,params:l,nextConfig:u,parsedUrl:c,isDraftMode:d,prerenderManifest:p,routerServerContext:h,isOnDemandRevalidate:f,revalidateOnlyGenerated:g,resolvedPathname:m,clientReferenceManifest:y,serverActionsManifest:_}=s,E=rW(o),v=!!(p.dynamicRoutes[E]||p.routes[m]),b=async()=>((null==h?void 0:h.render404)?await h.render404(e,t,c,!1):t.end("This page could not be found"),null);if(v&&!d){let e=!!p.routes[m],t=p.dynamicRoutes[E];if(t&&!1===t.fallback&&!e){if(u.experimental.adapterPath)return await b();throw new r6.NoFallbackError}}let S=null;!v||oO.isDev||d||(S="/index"===(S=m)?"/":S);let T=!0===oO.isDev||!v,A=v&&!T;_&&y&&function({page:e,clientReferenceManifest:t,serverActionsManifest:r,serverModuleMap:n}){var i;let o=null==(i=globalThis[rJ])?void 0:i.clientReferenceManifestsPerPage;globalThis[rJ]={clientReferenceManifestsPerPage:{...o,[rW(e)]:t},serverActionsManifest:r,serverModuleMap:n}}({page:o,clientReferenceManifest:y,serverActionsManifest:_,serverModuleMap:function({serverActionsManifest:e}){return new Proxy({},{get:(t,r)=>{var n,i,o;let s,a=null==(i=e.node)||null==(n=i[r])?void 0:n.workers;if(!a)return;let l=t0.workAsyncStorage.getStore();if(!(s=l?a[rE(o=l.page,"app")?o:"app"+o]:Object.values(a).at(0)))return;let{moduleId:u,async:c}=s;return{id:u,name:r,chunks:[],async:c}}})}({serverActionsManifest:_})});let O=e.method||"GET",w=tJ(),C=w.getActiveScopeSpan(),R={params:l,prerenderManifest:p,renderOpts:{experimental:{authInterrupts:!!u.experimental.authInterrupts},cacheComponents:!!u.cacheComponents,supportsDynamicResponse:T,incrementalCache:rd(e,"incrementalCache"),cacheLifeProfiles:u.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>oO.onRequestError(e,t,n,h)},sharedContext:{buildId:a}},I=new r1(e),P=new r2(t),N=rD.fromNodeNextRequest(I,function(e){let{errored:t,destroyed:r}=e;if(t||r)return AbortSignal.abort(t??new rx);let{signal:n}=rk(e);return n}(t));try{let n=async e=>oO.handle(N,R).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=w.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==tv.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${O} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${O} ${o}`)}),i=!!rd(e,"minimalMode"),s=async s=>{var a,l;let c=async({previousCacheEntry:a})=>{try{if(!i&&f&&g&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let o=await n(s);e.fetchMetrics=R.renderOpts.fetchMetrics;let l=R.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let u=R.renderOpts.collectedTags;if(!v)return await r3(I,P,o,R.renderOpts.pendingWaitUntil),null;{let e=await o.blob(),t=rf(o.headers);u&&(t[tK]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==R.renderOpts.collectedRevalidate&&!(R.renderOpts.collectedRevalidate>=0xfffffffe)&&R.renderOpts.collectedRevalidate,n=void 0===R.renderOpts.collectedExpire||R.renderOpts.collectedExpire>=0xfffffffe?void 0:R.renderOpts.collectedExpire;return{value:{kind:rn.APP_ROUTE,status:o.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==a?void 0:a.isStale)&&await oO.onRequestError(e,t,{routerKind:"App Router",routePath:o,routeType:"route",revalidateReason:r4({isStaticGeneration:A,isOnDemandRevalidate:f})},h),t}},m=await oO.handleResponse({req:e,nextConfig:u,cacheKey:S,routeKind:tE.APP_ROUTE,isFallback:!1,prerenderManifest:p,isRoutePPREnabled:!1,isOnDemandRevalidate:f,revalidateOnlyGenerated:g,responseGenerator:c,waitUntil:r.waitUntil,isMinimalMode:i});if(!v)return null;if((null==m||null==(a=m.value)?void 0:a.kind)!==rn.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==m||null==(l=m.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",f?"REVALIDATED":m.isMiss?"MISS":m.isStale?"STALE":"HIT"),d&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let y=rp(m.value.headers);return i&&v||y.delete(tK),!m.cacheControl||t.getHeader("Cache-Control")||y.get("Cache-Control")||y.set("Cache-Control",function({revalidate:e,expire:t}){let r="number"==typeof e&&void 0!==t&&e<t?`, stale-while-revalidate=${t-e}`:"";return 0===e?"private, no-cache, no-store, max-age=0, must-revalidate":"number"==typeof e?`s-maxage=${e}${r}`:`s-maxage=31536000${r}`}(m.cacheControl)),await r3(I,P,new Response(m.value.body,{headers:y,status:m.value.status||200})),null};C?await s(C):await w.withPropagatedContext(e.headers,()=>w.trace(tv.handleRequest,{spanName:`${O} ${o}`,kind:tG.SERVER,attributes:{"http.method":O,"http.target":e.url}},s))}catch(t){if(t instanceof r6.NoFallbackError||await oO.onRequestError(e,t,{routerKind:"App Router",routePath:E,routeType:"route",revalidateReason:r4({isStaticGeneration:A,isOnDemandRevalidate:f})}),v)throw t;return await r3(I,P,new Response(null,{status:500})),null}}e.s(["handler",()=>oP,"patchFetch",()=>oI,"routeModule",()=>oO,"serverHooks",()=>oR,"workAsyncStorage",()=>ow,"workUnitAsyncStorage",()=>oC],37291)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5231101b._.js.map