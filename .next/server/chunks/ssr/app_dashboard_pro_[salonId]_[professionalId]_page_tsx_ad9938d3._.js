module.exports=[78703,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(72131),e=a.i(94134),f=a.i(68377),g=a.i(41675),h=a.i(46842),i=a.i(90166),j=a.i(20005),k=a.i(56468),l=a.i(40784),m=a.i(15618);let n=(0,a.i(70106).default)("calendar-range",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);var o=a.i(21161);let p=({salonId:a,professionalId:c,onLogout:p})=>{let{salons:q,addBlockedPeriod:r,addAppointment:s}=(0,e.useStore)(),t=q.find(b=>b.id===a),u=t?.professionals.find(a=>a.id===c),[v,w]=(0,d.useState)("agenda"),[x,y]=(0,d.useState)(!1),[z,A]=(0,d.useState)({clientName:"",clientPhone:"",serviceId:"",date:"",time:""}),[B,C]=(0,d.useState)("single"),[D,E]=(0,d.useState)(""),[F,G]=(0,d.useState)({start:"",end:""});if(!t||!u)return(0,b.jsx)("div",{children:"Acesso negado."});let H=t.appointments.filter(a=>a.professionalId===c),I=new Date().getMonth(),J=H.filter(a=>"completed"===a.status&&new Date(a.date).getMonth()===I),K=0,L=0;J.forEach(a=>{let b=a.products?a.products.reduce((a,b)=>a+(b.salePrice||0),0):0;L+=b,K+=a.price-b});let M=K*(u.commissionRate/100),N=L*((u.productCommissionRate||0)/100),O=M+N,P=()=>{if("single"===B&&D)r(t.id,{id:Math.random().toString(),date:D,professionalId:u.id,reason:"Bloqueio Manual"}),E(""),alert("Data bloqueada com sucesso!");else if("range"===B&&F.start&&F.end){let a=new Date(F.start),b=new Date(F.end);for(;a<=b;a.setDate(a.getDate()+1)){let b=a.toISOString().split("T")[0];r(t.id,{id:Math.random().toString(),date:b,professionalId:u.id,reason:"Bloqueio de Período"})}G({start:"",end:""}),alert("Período bloqueado com sucesso!")}},Q=(0,b.jsxs)("div",{className:"px-4 py-3 bg-white flex items-center justify-between shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("img",{src:u.avatarUrl,className:"w-10 h-10 rounded-full border border-gray-200"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-bold text-gray-900 leading-tight",children:u.name}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"Painel do Profissional"})]})]}),(0,b.jsx)("button",{onClick:p,className:"text-gray-400 hover:text-red-500",children:(0,b.jsx)(j.LogOut,{className:"w-5 h-5"})})]});return(0,b.jsx)(f.AppShell,{header:Q,bottomNav:(0,b.jsxs)(f.MobileNav,{children:[(0,b.jsx)(f.MobileNavItem,{icon:(0,b.jsx)(g.Calendar,{}),label:"Agenda",active:"agenda"===v,onClick:()=>w("agenda")}),(0,b.jsx)(f.MobileNavItem,{icon:(0,b.jsx)(l.ShoppingBag,{}),label:"Sacolinha",active:"store"===v,onClick:()=>w("store")}),(0,b.jsx)(f.MobileNavItem,{icon:(0,b.jsx)(i.DollarSign,{}),label:"Comissões",active:"performance"===v,onClick:()=>w("performance")}),(0,b.jsx)(f.MobileNavItem,{icon:(0,b.jsx)(h.User,{}),label:"Perfil",active:"profile"===v,onClick:()=>w("profile")}),(0,b.jsx)(f.MobileNavItem,{icon:(0,b.jsx)(o.Settings,{}),label:"Ajuste",active:"settings"===v,onClick:()=>w("settings")})]}),children:(0,b.jsxs)("div",{className:"p-4",children:[(()=>{switch(v){case"agenda":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)(f.Button,{className:"flex items-center justify-center gap-1 text-xs h-12",onClick:()=>y(!0),children:[(0,b.jsx)(m.Plus,{className:"w-4 h-4"})," Novo Agendamento"]}),(0,b.jsxs)("div",{className:"bg-blue-50 px-3 py-2 rounded-xl flex items-center justify-between border border-blue-100",children:[(0,b.jsx)("div",{className:"text-xs text-blue-800 font-bold",children:"Hoje"}),(0,b.jsx)(f.Badge,{color:"blue",children:H.filter(a=>new Date(a.date).toDateString()===new Date().toDateString()).length})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"font-bold text-gray-700 text-sm px-1",children:"Seus Agendamentos"}),0===H.length&&(0,b.jsx)("p",{className:"text-center text-gray-400 py-4 text-sm",children:"Agenda vazia."}),H.map(a=>(0,b.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"font-bold text-gray-800 flex items-center gap-2",children:[new Date(a.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),(0,b.jsx)("span",{className:"text-xs font-normal text-gray-500",children:new Date(a.date).toLocaleDateString()})]}),(0,b.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:a.clientName}),(0,b.jsxs)("div",{className:"text-xs text-gray-400 flex items-center gap-1 mt-1",children:[t.services.find(b=>b.id===a.serviceId)?.name,a.products&&a.products.length>0&&(0,b.jsxs)("span",{className:"bg-green-50 text-green-700 px-1.5 py-0.5 rounded flex items-center gap-1 text-[10px] font-bold",children:[(0,b.jsx)(l.ShoppingBag,{className:"w-3 h-3"})," +",a.products.length]})]})]}),(0,b.jsx)(f.Badge,{color:"completed"===a.status?"green":"blue",children:"scheduled"===a.status?"Agendado":"Concluído"})]},a.id))]}),(0,b.jsx)(f.Card,{title:"Gerenciar Disponibilidade",className:"mt-8 border-orange-100 bg-orange-50/50",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex bg-white p-1 rounded-lg border border-gray-200",children:[(0,b.jsx)("button",{className:`flex-1 py-1.5 text-xs font-bold rounded ${"single"===B?"bg-orange-100 text-orange-700":"text-gray-500"}`,onClick:()=>C("single"),children:"Dia Único"}),(0,b.jsx)("button",{className:`flex-1 py-1.5 text-xs font-bold rounded ${"range"===B?"bg-orange-100 text-orange-700":"text-gray-500"}`,onClick:()=>C("range"),children:"Período (Férias)"})]}),"single"===B?(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Input,{type:"date",className:"mb-0 bg-white",value:D,onChange:a=>E(a.target.value)}),(0,b.jsx)(f.Button,{variant:"danger",onClick:P,disabled:!D,children:(0,b.jsx)(k.Ban,{className:"w-4 h-4"})})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-500",children:"De"}),(0,b.jsx)(f.Input,{type:"date",className:"mb-0 bg-white",value:F.start,onChange:a=>G({...F,start:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-500",children:"Até"}),(0,b.jsx)(f.Input,{type:"date",className:"mb-0 bg-white",value:F.end,onChange:a=>G({...F,end:a.target.value})})]})]}),(0,b.jsxs)(f.Button,{variant:"danger",className:"w-full text-xs",onClick:P,disabled:!F.start||!F.end,children:[(0,b.jsx)(n,{className:"w-3 h-3 mr-2"})," Bloquear Período"]})]})]})})]});case"performance":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(f.Card,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white border-0",children:[(0,b.jsx)("div",{className:"text-sm opacity-80 mb-1",children:"Total a Receber (Mês)"}),(0,b.jsxs)("div",{className:"text-3xl font-bold",children:["R$ ",O.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"bg-white p-3 rounded-xl border border-gray-100 shadow-sm",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Serviços"}),(0,b.jsxs)("div",{className:"text-xl font-bold text-gray-800",children:["R$ ",M.toFixed(2)]}),(0,b.jsxs)("div",{className:"text-[10px] text-green-600 font-medium",children:["(",u.commissionRate,"%)"]})]}),(0,b.jsxs)("div",{className:"bg-white p-3 rounded-xl border border-gray-100 shadow-sm",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase mb-1",children:"Vendas"}),(0,b.jsxs)("div",{className:"text-xl font-bold text-gray-800",children:["R$ ",N.toFixed(2)]}),(0,b.jsxs)("div",{className:"text-[10px] text-green-600 font-medium",children:["(",u.productCommissionRate||0,"%)"]})]})]}),(0,b.jsx)("h3",{className:"font-bold text-gray-700 px-1 mt-2",children:"Histórico Detalhado"}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[J.map(a=>{let c=a.products?.reduce((a,b)=>a+(b.salePrice||0),0)||0,d=(a.price-c)*(u.commissionRate/100),e=c*((u.productCommissionRate||0)/100);return(0,b.jsxs)("div",{className:"p-3 border-b border-gray-100 flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:new Date(a.date).toLocaleDateString()}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:t.services.find(b=>b.id===a.serviceId)?.name})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:["Total: R$ ",a.price.toFixed(2)]}),(0,b.jsxs)("div",{className:"text-sm font-bold text-green-600",children:["+ R$ ",(d+e).toFixed(2)]})]})]},a.id)}),0===J.length&&(0,b.jsx)("div",{className:"p-4 text-center text-gray-400 text-sm",children:"Nenhum serviço concluído este mês."})]})]});case"store":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900",children:"Produtos / Vendas"}),(0,b.jsxs)("div",{className:"bg-orange-50 p-4 rounded-xl text-center text-orange-800 text-sm",children:["Funcionalidade de vendas rápidas em breve!",(0,b.jsx)("br",{}),"Aqui você poderá lançar produtos vendidos para os clientes."]})]});case"profile":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center py-6 bg-white rounded-xl border border-gray-100 shadow-sm",children:[(0,b.jsx)("img",{src:u.avatarUrl,className:"w-24 h-24 rounded-full border-4 border-white shadow-lg mb-3"}),(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:u.name}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:u.email})]}),(0,b.jsx)(f.Card,{title:"Suas Taxas",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Comissão Serviços"}),(0,b.jsxs)("span",{className:"font-bold text-gray-900",children:[u.commissionRate,"%"]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Comissão Produtos"}),(0,b.jsxs)("span",{className:"font-bold text-gray-900",children:[u.productCommissionRate||0,"%"]})]})]})})]});case"settings":return(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsx)(f.Card,{title:"Ajustes",children:(0,b.jsxs)(f.Button,{variant:"danger",onClick:p,className:"w-full flex items-center justify-center gap-2",children:[(0,b.jsx)(j.LogOut,{className:"w-4 h-4"})," Sair da Conta"]})})})}})(),(0,b.jsx)(f.Modal,{isOpen:x,onClose:()=>y(!1),title:"Novo Agendamento",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(f.Input,{label:"Nome do Cliente",placeholder:"Ex: Cliente Balcão",value:z.clientName,onChange:a=>A({...z,clientName:a.target.value})}),(0,b.jsx)(f.Input,{label:"Telefone (Opcional)",placeholder:"Apenas números",value:z.clientPhone,onChange:a=>A({...z,clientPhone:a.target.value})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serviço"}),(0,b.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",value:z.serviceId,onChange:a=>A({...z,serviceId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Selecione..."}),t.services.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name," - R$ ",a.price]},a.id))]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)(f.Input,{type:"date",label:"Data",value:z.date,onChange:a=>A({...z,date:a.target.value})}),(0,b.jsx)(f.Input,{type:"time",label:"Hora",value:z.time,onChange:a=>A({...z,time:a.target.value})})]}),(0,b.jsx)(f.Button,{className:"w-full mt-2",onClick:()=>{if(!z.clientName||!z.serviceId||!z.date||!z.time)return;let a=t.services.find(a=>a.id===z.serviceId);if(!a)return;let b=new Date(`${z.date}T${z.time}:00`).toISOString();s(t.id,{id:Math.random().toString(36).substr(2,9),salonId:t.id,serviceId:z.serviceId,professionalId:u.id,clientName:z.clientName,clientPhone:z.clientPhone||"00000000",date:b,status:"scheduled",price:a.price}),y(!1),A({clientName:"",clientPhone:"",serviceId:"",date:"",time:""}),alert("Agendamento realizado!")},children:"Confirmar"})]})})]})})};function q({params:a}){let d=(0,c.useRouter)(),{salonId:e,professionalId:f}=a;return(0,b.jsx)(p,{salonId:e,professionalId:f,onLogout:()=>d.push("/login")})}a.s(["default",()=>q],78703)}];

//# sourceMappingURL=app_dashboard_pro_%5BsalonId%5D_%5BprofessionalId%5D_page_tsx_ad9938d3._.js.map