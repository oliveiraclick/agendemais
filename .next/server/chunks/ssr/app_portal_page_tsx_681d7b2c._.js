module.exports=[34666,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(94134),f=a.i(68377),g=a.i(78138),h=a.i(16201);let i=({salonName:a,stamps:c,totalRequired:d,reward:e})=>{let f=[];for(let a=1;a<=d;a++){let d=a<=c;f.push((0,b.jsx)("div",{className:`
                w-10 h-10 rounded-full flex items-center justify-center border-2 
                ${d?"bg-brand-600 border-brand-600 text-white":"bg-white border-dashed border-gray-300"}
            `,children:d?(0,b.jsx)(h.CheckCircle,{size:20}):(0,b.jsx)("span",{className:"text-gray-300 text-xs font-bold",children:a})},a))}return(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden relative",children:[(0,b.jsxs)("div",{className:"bg-brand-600 p-4 text-white flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-bold text-lg",children:a}),(0,b.jsx)(g.Gift,{className:"opacity-80"})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("div",{className:"flex flex-wrap gap-3 justify-center mb-6",children:f}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Prêmio ao completar:"}),(0,b.jsx)("p",{className:"font-bold text-brand-700 text-lg",children:e})]}),c>=d&&(0,b.jsx)("div",{className:"mt-4 bg-green-100 text-green-700 p-3 rounded-lg text-center font-bold animate-pulse",children:"Cartão Completo! Resgate seu prêmio na recepção."})]}),(0,b.jsx)("div",{className:"absolute top-1/2 left-0 w-4 h-8 bg-gray-50 rounded-r-full -translate-y-1/2 border-r border-t border-b border-gray-200"}),(0,b.jsx)("div",{className:"absolute top-1/2 right-0 w-4 h-8 bg-gray-50 rounded-l-full -translate-y-1/2 border-l border-t border-b border-gray-200"})]})};var j=a.i(20005),k=a.i(41675),l=a.i(24987),m=a.i(46842),n=a.i(81010),o=a.i(41710),p=a.i(45222),q=a.i(69292),r=a.i(44494),s=a.i(91965),t=a.i(57990),u=a.i(13749),v=a.i(32860),w=a.i(21374),x=a.i(38632),y=a.i(74830);let z=({clientPhone:a,onSelectSalon:d,onLogout:h})=>{let{salons:z,getClientByPhone:A,cancelAppointment:B}=(0,e.useStore)(),[C,D]=(0,c.useState)("list"),[E,F]=(0,c.useState)("home"),[G,H]=(0,c.useState)(null),I=A(a),J=z.filter(b=>b.appointments.some(b=>b.clientPhone===a)),K=J.length>0?J:z,L=z.find(a=>a.id===G),M=()=>{D("list"),H(null)},N=()=>{G&&d(G)};return(0,b.jsx)(f.AppShell,{header:"list"===C?(0,b.jsx)("div",{className:"px-4 py-4 bg-white border-b border-gray-100",children:(0,b.jsx)("div",{className:"font-bold text-lg text-brand-600",children:"Agende +"})}):(0,b.jsxs)("div",{className:"px-4 py-3 bg-white flex items-center gap-3 border-b border-gray-100 shadow-sm",children:[(0,b.jsx)("button",{onClick:M,className:"p-1 -ml-1 text-gray-600 rounded-full hover:bg-gray-100",children:(0,b.jsx)(u.ChevronLeft,{className:"w-6 h-6"})}),(0,b.jsx)("div",{className:"font-bold text-gray-900 truncate",children:L?.name})]}),bottomNav:"dashboard"===C?(0,b.jsxs)(f.MobileNav,{children:[(0,b.jsx)(f.MobileNavItem,{icon:(0,b.jsx)(n.Home,{}),label:"Home",active:"home"===E,onClick:()=>F("home")}),(0,b.jsx)(f.MobileNavItem,{icon:(0,b.jsx)(k.Calendar,{}),label:"Agenda",active:!1,onClick:N}),(0,b.jsx)(f.MobileNavItem,{icon:(0,b.jsx)(m.User,{}),label:"Perfil",active:"profile"===E,onClick:()=>F("profile")})]}):null,children:(0,b.jsx)("div",{className:"p-4 pb-24",children:"list"===C?(0,b.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-left-4",children:[(0,b.jsx)("div",{className:"bg-brand-600 p-6 rounded-b-[2rem] -mx-4 -mt-4 shadow-lg mb-6",children:(0,b.jsxs)("div",{className:"flex justify-between items-start text-white",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold",children:["Olá, ",I?.name?.split(" ")[0]||"Visitante"]}),(0,b.jsx)("p",{className:"text-brand-100 text-sm",children:"Onde vamos agendar hoje?"})]}),(0,b.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:(0,b.jsx)(m.User,{className:"w-5 h-5 text-white"})})]})}),(0,b.jsxs)("div",{className:"px-1",children:[(0,b.jsxs)("h2",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(w.Star,{className:"w-5 h-5 text-yellow-500 fill-current"})," Favoritos"]}),(0,b.jsx)("div",{className:"space-y-4",children:K.map(a=>(0,b.jsxs)("div",{onClick:()=>{H(a.id),D("dashboard"),F("home")},className:"bg-white p-4 rounded-2xl border border-gray-100 shadow-sm flex items-center gap-4 cursor-pointer active:scale-[0.98] transition-transform hover:shadow-md",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-xl overflow-hidden flex-shrink-0",children:(0,b.jsx)("img",{src:a.coverImage||`https://ui-avatars.com/api/?name=${a.name}`,className:"w-full h-full object-cover"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900 text-lg truncate leading-tight",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500 truncate mb-1",children:a.address}),(0,b.jsx)("div",{className:"inline-flex items-center gap-1 bg-gray-100 px-2 py-0.5 rounded text-[10px] font-bold text-gray-600 uppercase",children:a.category})]}),(0,b.jsx)("div",{className:"bg-brand-50 p-2 rounded-full text-brand-600",children:(0,b.jsx)(v.ArrowRight,{className:"w-5 h-5"})})]},a.id))})]}),(0,b.jsx)("div",{className:"px-4 py-6",children:(0,b.jsxs)(f.Button,{variant:"outline",className:"w-full border-red-200 text-red-600 hover:bg-red-50",onClick:h,children:[(0,b.jsx)(j.LogOut,{className:"w-4 h-4 mr-2"})," Sair da Conta"]})})]}):(()=>{if(!L)return null;let c=L.appointments.filter(b=>b.clientPhone===a).sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime());return"profile"===E?(0,b.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-right-4 pt-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-gray-200 rounded-full mx-auto mb-3 flex items-center justify-center text-gray-400 font-bold text-2xl",children:I?.name?.[0]}),(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:I?.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:I?.phone})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl border border-gray-100 divide-y divide-gray-100",children:(0,b.jsxs)("div",{className:"p-4 flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Visitas neste local"}),(0,b.jsx)("span",{className:"font-bold text-gray-900",children:c.length})]})}),(0,b.jsxs)(f.Button,{variant:"outline",className:"w-full",onClick:M,children:[(0,b.jsx)(v.ArrowRight,{className:"w-4 h-4 mr-2 rotate-180"})," Trocar de Estabelecimento"]})]}):(0,b.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500 pt-2",children:[(0,b.jsxs)("div",{className:"bg-brand-600 text-white p-6 rounded-2xl shadow-lg shadow-brand-200 relative overflow-hidden",children:[(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold mb-1",children:["Bem-vindo(a), ",I?.name?.split(" ")[0],"!"]}),(0,b.jsxs)("p",{className:"text-brand-100 text-sm mb-4 opacity-90",children:["É ótimo ter você no ",L.name,"."]}),(0,b.jsxs)("div",{className:"inline-flex bg-white/20 backdrop-blur-md px-3 py-1.5 rounded-lg items-center gap-2 text-xs font-medium",children:[(0,b.jsx)(o.Clock,{className:"w-3 h-3"})," Aberto: ",L.openTime," - ",L.closeTime]})]}),(0,b.jsx)("div",{className:"absolute right-0 bottom-0 opacity-10 transform translate-x-4 translate-y-4",children:(0,b.jsx)(t.Store,{className:"w-32 h-32"})}),(0,b.jsx)("div",{className:"absolute right-0 bottom-0 opacity-10 transform translate-x-4 translate-y-4",children:(0,b.jsx)(t.Store,{className:"w-32 h-32"})})]}),I?.loyaltyCards?.find(a=>a.salonId===L.id)&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-900 text-lg mb-3 px-1 flex items-center gap-2",children:[(0,b.jsx)(g.Gift,{className:"w-5 h-5 text-brand-600"})," Fidelidade"]}),(0,b.jsx)(i,{salonName:L.name,...I.loyaltyCards.find(a=>a.salonId===L.id)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900 text-lg mb-3 px-1",children:"Sobre Nós"}),(0,b.jsx)("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm text-sm text-gray-600 leading-relaxed",children:L.aboutUs||"Descrição não informada."})]}),(0,b.jsx)("div",{className:"pt-2",children:(0,b.jsxs)(f.Button,{className:"w-full py-4 text-lg font-bold shadow-xl shadow-brand-200 flex items-center justify-center gap-2",onClick:N,children:[(0,b.jsx)(k.Calendar,{className:"w-5 h-5"})," Agendar Agora"]})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-900 text-lg mb-3 px-1 flex items-center gap-2",children:[(0,b.jsx)(x.Image,{className:"w-5 h-5 text-brand-600"})," Galeria de Fotos"]}),L.gallery&&L.gallery.length>0?(0,b.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-4 no-scrollbar -mx-4 px-4",children:L.gallery.map((a,c)=>(0,b.jsx)("div",{className:"flex-shrink-0 w-40 h-40 rounded-xl overflow-hidden shadow-sm bg-gray-100",children:(0,b.jsx)("img",{src:a,className:"w-full h-full object-cover"})},c))}):(0,b.jsx)("div",{className:"bg-gray-50 p-6 rounded-xl text-center text-gray-400 text-sm",children:"Sem fotos disponíveis."})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-900 text-lg mb-3 px-1 flex items-center gap-2",children:[(0,b.jsx)(l.MapPin,{className:"w-5 h-5 text-brand-600"})," Localização"]}),(0,b.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[(0,b.jsx)("p",{className:"text-sm text-gray-700 font-medium mb-3",children:L.address}),(0,b.jsx)("div",{className:"h-32 bg-gray-200 rounded-lg w-full flex items-center justify-center text-gray-400 text-xs font-bold uppercase tracking-wider",children:"Mapa do Google"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-900 text-lg mb-3 px-1 flex items-center gap-2",children:[(0,b.jsx)(s.History,{className:"w-5 h-5 text-brand-600"})," Histórico"]}),(0,b.jsx)("div",{className:"space-y-3",children:c.length>0?c.slice().reverse().map(a=>(0,b.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-bold text-gray-900 text-sm",children:new Date(a.date).toLocaleDateString()}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5",children:[new Date(a.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," • ",L.services.find(b=>b.id===a.serviceId)?.name]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2",children:["completed"===a.status&&(0,b.jsx)("div",{className:"text-xs font-bold text-green-600 bg-green-50 px-2 py-1 rounded",children:"Concluído"}),"cancelled"===a.status&&(0,b.jsx)("div",{className:"text-xs font-bold text-red-600 bg-red-50 px-2 py-1 rounded",children:"Cancelado"}),"scheduled"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"text-xs font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded",children:"Agendado"}),(0,b.jsx)("button",{onClick:()=>(a=>{if(L){if(!1===L.allowClientCancellation)return void alert(`O estabelecimento ${L.name} n\xe3o permite cancelamentos pelo aplicativo. Por favor, entre em contato diretamente.`);confirm("Tem certeza que deseja cancelar este agendamento?")&&B(L.id,a)}})(a.id),className:"text-[10px] text-red-500 underline hover:text-red-700",children:"Cancelar"})]})]})]},a.id)):(0,b.jsx)("div",{className:"text-center py-6 text-gray-400 text-sm",children:"Você ainda não tem agendamentos aqui."})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-2 pt-4",children:[L.socials?.whatsapp&&(0,b.jsxs)("a",{href:`https://wa.me/${L.socials.whatsapp}`,target:"_blank",className:"bg-green-50 p-3 rounded-xl flex flex-col items-center gap-1 text-green-700 hover:bg-green-100 transition-colors",children:[(0,b.jsx)(p.MessageCircle,{className:"w-6 h-6"}),(0,b.jsx)("span",{className:"text-[10px] font-bold",children:"Whats"})]}),L.socials?.instagram&&(0,b.jsxs)("a",{href:`https://instagram.com/${L.socials.instagram.replace("@","")}`,target:"_blank",className:"bg-purple-50 p-3 rounded-xl flex flex-col items-center gap-1 text-purple-700 hover:bg-purple-100 transition-colors",children:[(0,b.jsx)(q.Instagram,{className:"w-6 h-6"}),(0,b.jsx)("span",{className:"text-[10px] font-bold",children:"Insta"})]}),L.socials?.facebook&&(0,b.jsxs)("a",{href:L.socials.facebook,target:"_blank",className:"bg-blue-50 p-3 rounded-xl flex flex-col items-center gap-1 text-blue-700 hover:bg-blue-100 transition-colors",children:[(0,b.jsx)(y.Facebook,{className:"w-6 h-6"}),(0,b.jsx)("span",{className:"text-[10px] font-bold",children:"Face"})]}),L.socials?.website&&(0,b.jsxs)("a",{href:L.socials.website,target:"_blank",className:"bg-gray-50 p-3 rounded-xl flex flex-col items-center gap-1 text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,b.jsx)(r.Globe,{className:"w-6 h-6"}),(0,b.jsx)("span",{className:"text-[10px] font-bold",children:"Site"})]})]})]})})()})})};function A(){let a=(0,d.useRouter)(),c=(0,d.useSearchParams)().get("phone")||"";return c?(0,b.jsx)(z,{clientPhone:c,onSelectSalon:b=>a.push(`/booking/${b}?clientPhone=${c}&fromPortal=true`),onLogout:()=>a.push("/")}):(0,b.jsx)("div",{children:"Erro: Telefone não informado."})}function B(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{children:"Carregando..."}),children:(0,b.jsx)(A,{})})}a.s(["default",()=>B],34666)}];

//# sourceMappingURL=app_portal_page_tsx_681d7b2c._.js.map